!function(){var e={277:function(e,t,i){(t=i(645)(!1)).push([e.id,".ob_adTitleDescWrapper .ob_column{flex:1;min-width:0;display:flex;flex-direction:column;flex-basis:auto}.ob_adTitleDescWrapper .ob_item{flex-grow:1;display:flex}.ob_adTitleDescWrapper .adVideoTitle{order:1;flex-grow:1;margin:7px 5px 5px 5px;text-align:left;font-size:18px;font-weight:600;line-height:1.22;color:#282828}.ob_adTitleDescWrapper .adVideoDescription{order:3;line-height:1.33;color:#93908c;padding-bottom:1px;margin:5px;text-align:left;font-size:14px;font-weight:normal}.ob_adTitleDescWrapper .adVideoDescChild{font-weight:normal;color:black}.ob_adTitleDescWrapper .adVideoSponsored{display:flex;order:4;margin:2px;text-align:left}.ob_adTitleDescWrapper .adVideoSponsoredLogo{flex:0 0 3%;align-items:center;font-weight:500;min-width:20px;min-height:20px}.ob_adTitleDescWrapper .adVideoSponsoredChild{flex:1;align-items:center;font-size:12px;font-weight:normal;color:#93908c;padding-left:1px}.ob_adTitleDescWrapper .adVideoSponsoredChild.defaultAboveVideo{font-size:16px;font-weight:700;color:#282828;order:2;align-items:flex-start;padding-right:5px;margin-top:1px}.ob_adTitleDescWrapper .adVideoSponsoredChild.aboveVideoSponsorBy{font-family:italic;order:1;align-items:flex-end;padding-right:5px;margin-bottom:1px}.ob_adTitleDescWrapper .ctaUrlBtn{flex-grow:0;justify-content:flex-end;color:#4A90E2 !important;order:2;text-decoration:none;overflow:hidden}.ob_adTitleDescWrapper .ctaBtn{border:1px solid #4A90E2 !important;margin:0;line-height:1.846153846;border-radius:4px;padding:0 10px;cursor:pointer;white-space:nowrap;font-size:12px;font-weight:normal;overflow:hidden;text-overflow:ellipsis}.ob_adTitleDescWrapper .ctaBtn.addPadding{padding:3px 10px}.adTitleDescWrapper{display:flex;height:auto}.AboveAdTitleDescWrapper{display:flex;height:auto;flex-direction:row}.AboveAdTitleDescWrapper .adVideoCtaBtn{display:flex;height:auto;order:2}.AboveAdTitleDescWrapper .adVideoSponsoredExtra{display:flex;height:auto;flex-grow:1;order:1}\n",""]),e.exports=t},816:function(e,t,i){(t=i(645)(!1)).push([e.id,"@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v55/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format(\"woff2\"),url(//libs.outbrain.com/iconfont/MaterialIcons-Regular.woff) format(\"woff\")}.vidget-material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:'liga';-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.ob-native-endcard{background:rgba(0,0,0,0.5);vertical-align:middle;text-align:center;border:2px solid white;color:white;font-weight:400;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border-radius:4px}.omp-cover{width:100%;height:100%;top:0;left:0;position:absolute;background:rgba(0,0,0,0.5)}.obv-skip-wrapper{position:absolute;display:table;direction:ltr !important;width:100px;height:20px;bottom:18%;right:0;z-index:3;border-radius:2px;border:solid 0.5px rgba(255,255,255,0.7);background-color:rgba(0,0,0,0.8);cursor:pointer;font-family:Lato;font-size:12px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;color:#ffffff}.obv-skip-wrapper.minimize-skip-button{width:80px;bottom:30%}.obv-skip-title{display:inline-block;direction:ltr !important;height:100%;float:left;font-family:Arial;font-size:18px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;color:#ffffff;vertical-align:middle;padding:10%}.obv-skip-title.minimize-skip-button-text{font-size:13px}.obv-skip-arrow{display:table-cell;direction:ltr !important;position:absolute;vertical-align:middle;width:16px;height:auto;right:10%;top:49%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.obv-display-ad{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);border:none}.obv-display-icon{background-image:url(\"https://widgets.outbrain.com/images/widgetIcons/achoice.svg\");width:16px;height:16px;right:4px;background-size:16px;top:4px;cursor:pointer;z-index:11;position:absolute}.vidget-reel-read-more{cursor:pointer !important;visibility:visible;opacity:1 !important}.vidget-reel-source-text{opacity:1 !important;visibility:visible;margin-left:4px;margin-right:2px}.vidget-reel-source{display:flex !important}.vidget-reel-title{display:flex !important;visibility:visible !important}.vidget-reel-description{display:none !important}.vidget-reel-footer{visibility:hidden;z-index:11 !important}.vidget-reel-controls{z-index:0 !important}.vidget-reel-two-line-height{height:71px !important}.vidget-reel-one-line-height{height:41px !important}.vidget-reel-remove-cursor{cursor:auto !important}.vidget-reel-no-title{height:26px !important;display:flex !important}\n",""]),e.exports=t},645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(d," */")),n=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(n).concat([o]).join("\n")}var a,s,d;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var n=0;n<this.length;n++){var a=this[n][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);r&&o[d[0]]||(i&&(d[2]?d[2]="".concat(i," and ").concat(d[2]):d[2]=i),t.push(d))}},t}},702:function(e,t,i){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,n=void 0,a=void 0,s=function(e,t){P[o]=e,P[o+1]=t,2===(o+=2)&&(a?a(b):I())};function d(e){a=e}function l(e){s=e}var p="undefined"!=typeof window?window:void 0,g=p||{},h=g.MutationObserver||g.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){return process.nextTick(b)}}function y(){return void 0!==n?function(){n(b)}:C()}function f(){var e=0,t=new h(b),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function m(){var e=new MessageChannel;return e.port1.onmessage=b,function(){return e.port2.postMessage(0)}}function C(){var e=setTimeout;return function(){return e(b,1)}}var P=new Array(1e3);function b(){for(var e=0;e<o;e+=2)(0,P[e])(P[e+1]),P[e]=void 0,P[e+1]=void 0;o=0}function w(){try{var e=Function("return this")().require("vertx");return n=e.runOnLoop||e.runOnContext,y()}catch(e){return C()}}var I=void 0;function E(e,t){var i=this,r=new this.constructor(A);void 0===r[x]&&J(r);var o=i._state;if(o){var n=arguments[o-1];s((function(){return q(o,r,n,i._result)}))}else F(i,r,e,t);return r}function S(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(A);return B(i,e),i}I=c?v():h?f():u?m():void 0===p?w():C();var x=Math.random().toString(36).substring(2);function A(){}var T=void 0,V=1,W=2;function k(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function D(e,t,i,r){try{e.call(t,i,r)}catch(e){return e}}function O(e,t,i){s((function(e){var r=!1,o=D(i,t,(function(i){r||(r=!0,t!==i?B(e,i):N(e,i))}),(function(t){r||(r=!0,H(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,H(e,o))}),e)}function _(e,t){t._state===V?N(e,t._result):t._state===W?H(e,t._result):F(t,void 0,(function(t){return B(e,t)}),(function(t){return H(e,t)}))}function L(e,i,r){i.constructor===e.constructor&&r===E&&i.constructor.resolve===S?_(e,i):void 0===r?N(e,i):t(r)?O(e,i,r):N(e,i)}function B(t,i){if(t===i)H(t,k());else if(e(i)){var r=void 0;try{r=i.then}catch(e){return void H(t,e)}L(t,i,r)}else N(t,i)}function M(e){e._onerror&&e._onerror(e._result),z(e)}function N(e,t){e._state===T&&(e._result=t,e._state=V,0!==e._subscribers.length&&s(z,e))}function H(e,t){e._state===T&&(e._state=W,e._result=t,s(M,e))}function F(e,t,i,r){var o=e._subscribers,n=o.length;e._onerror=null,o[n]=t,o[n+V]=i,o[n+W]=r,0===n&&e._state&&s(z,e)}function z(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var r=void 0,o=void 0,n=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+i],r?q(i,r,o,n):o(n);e._subscribers.length=0}}function q(e,i,r,o){var n=t(r),a=void 0,s=void 0,d=!0;if(n){try{a=r(o)}catch(e){d=!1,s=e}if(i===a)return void H(i,R())}else a=o;i._state!==T||(n&&d?B(i,a):!1===d?H(i,s):e===V?N(i,a):e===W&&H(i,a))}function U(e,t){try{t((function(t){B(e,t)}),(function(t){H(e,t)}))}catch(t){H(e,t)}}var j=0;function G(){return j++}function J(e){e[x]=j++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Q(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(A),this.promise[x]||J(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&N(this.promise,this._result))):H(this.promise,Q())}return e.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,r=i.resolve;if(r===S){var o=void 0,n=void 0,a=!1;try{o=e.then}catch(e){a=!0,n=e}if(o===E&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(i===te){var s=new i(A);a?H(s,n):L(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new i((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,i){var r=this.promise;r._state===T&&(this._remaining--,e===W?H(r,i):this._result[t]=i),0===this._remaining&&N(r,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;F(e,void 0,(function(e){return i._settledAt(V,t,e)}),(function(e){return i._settledAt(W,t,e)}))},e}();function Y(e){return new X(this,e).promise}function K(e){var t=this;return r(e)?new t((function(i,r){for(var o=e.length,n=0;n<o;n++)t.resolve(e[n]).then(i,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function $(e){var t=new this(A);return H(t,e),t}function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[x]=G(),this._result=this._state=void 0,this._subscribers=[],A!==t&&("function"!=typeof t&&Z(),this instanceof e?U(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var i=this,r=i.constructor;return t(e)?i.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):i.then(e,e)},e}();function ie(){var e=void 0;if(void 0!==i.g)e=i.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=E,te.all=Y,te.race=K,te.resolve=S,te.reject=$,te._setScheduler=d,te._setAsap=l,te._asap=s,te.polyfill=ie,te.Promise=te,te}()},246:function(e,t,i){var r,o,n={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(i){return void 0===t[i]&&(t[i]=e.call(this,i)),t[i]}}((function(e){return document.querySelector(e)})),d=null,l=0,p=[],g=i(463);function h(e,t){for(var i=0;i<e.length;i++){var r=e[i],o=n[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(m(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(m(r.parts[a],t));n[r.id]={id:r.id,refs:1,parts:s}}}}function c(e,t){for(var i=[],r={},o=0;o<e.length;o++){var n=e[o],a=t.base?n[0]+t.base:n[0],s={css:n[1],media:n[2],sourceMap:n[3]};r[a]?r[a].parts.push(s):i.push(r[a]={id:a,parts:[s]})}return i}function u(e,t){var i=s(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===e.insertAt)r?r.nextSibling?i.insertBefore(t,r.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),p.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function v(e){e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",f(t,e.attrs),u(e,t),t}function f(e,t){Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))}function m(e,t){var i,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var a=l++;i=d||(d=y(t)),r=b.bind(null,i,a,!1),o=b.bind(null,i,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",f(t,e.attrs),u(e,t),t}(t),r=I.bind(null,i,t),o=function(){v(i),i.href&&URL.revokeObjectURL(i.href)}):(i=y(t),r=w.bind(null,i),o=function(){v(i)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=a()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var i=c(e,t);return h(i,t),function(e){for(var r=[],o=0;o<i.length;o++){var a=i[o];(s=n[a.id]).refs--,r.push(s)}e&&h(c(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete n[s.id]}}}};var C,P=(C=[],function(e,t){return C[e]=t,C.filter(Boolean).join("\n")});function b(e,t,i,r){var o=i?"":r.css;if(e.styleSheet)e.styleSheet.cssText=P(t,o);else{var n=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(n,a[t]):e.appendChild(n)}}function w(e,t){var i=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function I(e,t,i){var r=i.css,o=i.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=g(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},463:function(e){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,r=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?i+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},830:function(e,t,i){var r=i(277);"string"==typeof r&&(r=[[e.id,r,""]]);var o={transform:undefined};i(246)(r,o);r.locals&&(e.exports=r.locals)},367:function(e,t,i){var r=i(816);"string"==typeof r&&(r=[[e.id,r,""]]);var o={transform:undefined};i(246)(r,o);r.locals&&(e.exports=r.locals)},656:function(){window.VIDGET_VERSION="v6.116.5"}},t={};function i(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={id:r,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){"use strict";var e;!function(e){e.Avoid="avoid",e.Strict="strict",e.Allow="allow",e.AllowInstream="allow instream",e.AvoidInViewport="avoid in viewport"}(e||(e={}));var t,r,o,n,a,s=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function s(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))},d=function(e,t){var i,r,o,n,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},l=function(){function t(){}return t.addPolyfills=function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,r=function(){},o=function(){return i.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),window.Promise=window.Promise||i(702).Promise,this.polyfillClosest(),this.polyfillCustomEvent()},t.enumHasValue=function(e,t){for(var i in e)if(i===t)return!0;return!1},t.polyfillClosest=function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},t.polyfillCustomEvent=function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}},t.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),i=e.indexOf("Trident/"),r=e.indexOf("Edge/"),o=0;if(t>0&&(o=parseInt(e.substring(t+5,e.indexOf(".",t)),10)),i>0){var n=e.indexOf("rv:");o=parseInt(e.substring(n+3,e.indexOf(".",n)),10)}return r>0&&(o=parseInt(e.substring(r+5,e.indexOf(".",r)),10)),o},t.titleInlineHTML=function(){return this.isIE()?"<span style=' display: block; white-space: normal; max-width: calc(100% + 1px);'></span>":"<span></span>"},t.appendDots=function(e){return e&&e.length?"."===e[e.length-1]?e+"..":e+"...":""},t.renderTitle=function(e,t){var i=t,r=document.createElement("div");r.innerHTML="<span>Ty</span>",i.appendChild(r);var o=r.firstChild instanceof HTMLElement?r.firstChild.offsetHeight:"";i.innerHTML="";var n=e.split(" "),a=[],s=1,d=document.createElement("div");for(i.children.length&&(i=this.clearChildren(i)),this.isIE()&&(d.style.width="100%"),d.innerHTML=this.titleInlineHTML(),i.appendChild(d);n.length&&s<=2;){var l=n.shift();a.push(l),d.firstChild.textContent=a.join(" ");var p=d.firstChild instanceof HTMLElement?d.firstChild.offsetHeight:"";if(p!==o&&1===a.length&&(o=p),p>o&&(a.pop(),n.unshift(l),d.firstChild.textContent=a.join(" "),n.length)){if(2===s){d.firstChild.textContent=this.appendDots(d.firstChild.textContent);for(var g=d.firstChild instanceof HTMLElement?d.firstChild.offsetHeight:"";g>o;)a.pop(),d.firstChild.textContent=this.appendDots(a.join(" "));break}(d=document.createElement("div")).innerHTML=this.titleInlineHTML(),i.appendChild(d),a.length=0,s++}}},t.getViewportSizeGlobal=function(){var e,t,i,r={height:0,width:0};return e=void 0!==window.innerWidth,t=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth,i=!1===e&&!1===t,e?(r.height=window.innerHeight,r.width=window.innerWidth):t?(r.height=document.documentElement.clientHeight,r.width=document.documentElement.clientWidth):i&&(r.height=document.getElementsByTagName("body")[0].clientHeight,r.width=document.getElementsByTagName("body")[0].clientWidth),r},t.elementInViewport=function(e,i){if(i||(i=0),!e||i<0||i>100)return!1;var r=e.getBoundingClientRect(),o=t.getViewportSizeGlobal().height,n=e.clientHeight,a=Math.round(n*i/100);return a=a>o?o-1:a,r.top+a<=o&&r.bottom-a>=0},t.viewPercentage=function(e){if(!e)return 0;var i=e.getBoundingClientRect(),r=t.getViewportSizeGlobal().height,o=e.clientHeight;if(!o)return 0;var n=i.top,a=i.top+o,s=0;if(n>0){if(n>r)return 0;if(a<r)return 100;s=r-n}else{if(a<0)return 0;s=a>r?r:a}return Math.round(100*s/o)},t.elementPercHeightInViewport=function(e,i,r,o,n){if(void 0===n&&(n="both"),r||(r=0),!e||r<0||r>100)return!1;var a=t.getViewportSizeGlobal().height,s=Math.round(i*r/100);if(s=s>a?a-1:s,o)return e+s<=a&&e+i-s>=0;var d=e+i-s<0,l=e+s>a;switch(n){case"both":return d||l;case"above":return d;case"below":return l}},t.getDocumentUrl=function(){var e=window.location.href;return window.self!==window.top&&(e=window.parent.location.href),e},t.isIframe=function(){try{return window.self!==window.top}catch(e){return console.error(e),!0}},t.multiLineTruncation=function(e,t){var i,r=e.cloneNode(!0);if(r.style.position="absolute",r.style.top="0",r.style.width="10%",r.style.overflow="hidden",r.style.visibility="hidden",r.style.whiteSpace="nowrap",e.parentNode.appendChild(r),i=(r.clientHeight+2)*t,e.parentNode.removeChild(r),r=null,e.clientHeight>i)for(var o=0,n=35*t;e.clientHeight>i&&(e.innerHTML=e.textContent.slice(0,-2)+"&hellip;",++o!==n););},t.toDash=function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))},t.getFormattedDate=function(){var e=function(e){return e>=10?e:"0"+e},t=new Date,i=e(t.getDate()),r=e(t.getMonth()+1),o=e(t.getHours()),n=e(t.getMinutes()),a=e(t.getSeconds()),s=t.getMilliseconds();return[t.getFullYear(),"-",r,"-",i," ",o,":",n,":",a,".",s].join("")},t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.getTextSize=function(e,i){var r=document.createElement("div");r.style.position="absolute",r.style.visibility="hidden",r.style.height="auto",r.style.width="auto",r.style.whiteSpace="nowrap",r.innerHTML=e;var o=["color","fontStyle","lineHeight","fontFamily","fontWeight","padding","margin","border","fontSize","textAlign"];for(var n in o){var a=o[n];i.hasOwnProperty(a)&&(r.style[t.toDash(a)]=i[a])}var s=document.getElementsByTagName("body")[0];s.appendChild(r);var d=r.offsetHeight+1||0,l=r.offsetWidth+1||0;return s.removeChild(r),{height:d,width:l}},t.isVideoPlayingOnPageSync=function(i){switch(i){case e.Allow:return!1;case e.Strict:return t.isVideoElementsOnPageStrictMode();case e.Avoid:case e.AllowInstream:case e.AvoidInViewport:return t.isVideoPlayingOnPageAvoidMode(i);default:return t.isVideoPlayingOnPageAvoidMode(e.Avoid)}},t.isVideoPlayingOnPageAsync=function(i,r){return s(this,void 0,void 0,(function(){return d(this,(function(o){return i===e.Allow?[2,Promise.resolve(!1)]:[2,t.delay(r).then((function(){return Promise.resolve(t.isVideoPlayingOnPageSync(i))}))]}))}))},t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.isMobile=function(){return!!/(iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/.test(navigator.userAgent.toLowerCase())},t.isWifiConnection=function(){if(!navigator)return!1;var e=navigator.connection;if(e){var t=e.type;if(t&&"unknown"!=t)return"wifi"===t}return!1},t.checkYoutubeElements=function(t){if(void 0===t&&(t=e.Strict),t!==e.Strict){var i=document.querySelectorAll("iframe[src*='youtube.com'][src*=\"autoplay=1\"], object[data*='youtube.com'][data*=\"autoplay=1\"]");if(t===e.AvoidInViewport){for(var r=0;r<i.length;r++){var o=i.item(r);if(this.elementPercHeightInViewport(o.getBoundingClientRect().top,o.getBoundingClientRect().height,0,!0))return!0}return!1}return!!i.length}return!!document.querySelector("iframe[src*='youtube.com'], object[data*='youtube.com']")},t.checkIframeElements=function(){return!!document.querySelector('iframe[src*="autoplay=1"], iframe[src*="mute="]')},t.checkVideoElements=function(t){void 0===t&&(t=e.Strict);var i=document.getElementsByTagName("video");if(0===i.length)return!1;if(t===e.Strict)return!0;for(var r=0;r<i.length;r++){var o=i.item(r);if(o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2){if(t===e.Avoid||t===e.AllowInstream&&!o.closest(".ob-ivid"))return!0;if(t===e.AvoidInViewport&&this.elementPercHeightInViewport(o.getBoundingClientRect().top,o.getBoundingClientRect().height,0,!0))return!0}}return!1},t.checkEmbedElements=function(){return!!document.querySelector("embed[src$='.mov'], embed[src$='.mp4']")},t.isVideoPlayingOnPageAvoidMode=function(e){var i=t.checkYoutubeElements(e);return i||t.checkVideoElements(e)},t.isVideoElementsOnPageStrictMode=function(){var i=t.checkVideoElements(e.Strict);if(i)return i;var r=t.checkYoutubeElements(e.Strict);if(r)return r;var o=t.checkIframeElements();return o||t.checkEmbedElements()},t.performRandomWithBalance=function(e){var t=0,i=[];if(!e)return null;for(var r in e)t+=e[r],i.push({name:r,balance:e[r]});t<1&&(i[0].balance+=1-t),t>1&&(i[0].balance-=t-1);for(var o=Math.random(),n=0,a=0;n<i.length;n++){var s=i[n];if(o<s.balance+a)return s.name;a+=s.balance}return null},t.waterfall=function(e,t){return this.reducePollyfill.call(e,(function(e,i){return e.then(t?i.bind(t):i)}),Promise.resolve())},t.reducePollyfill=function(e,t){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,r=Object(this),o=r.length>>>0,n=0;if(2==arguments.length)i=arguments[1];else{for(;n<o&&!r.hasOwnProperty(n);)n++;if(n>=o)throw new TypeError("Reduce of empty array with no initial currentValue");i=r[n++]}for(;n<o;n++)n in r&&(i=e(i,r[n],n,r));return i},t.nodeToString=function(e){var t=document.createElement("div");t.appendChild(e.cloneNode(!0));var i=t.innerHTML;return t=e=null,i},t.getCallerName=function(){try{var e=(new Error).stack;if(e){var t=e.match(/(Vidget|Function|CommonUtils|obServices|SingleRun|WidgetService|BasePlayer|AniviewPlayer|TeadsPlayer|VidazooPlayer|VidazooProvider|AniviewProvider|OutbrainRtbProvider|TeadsProvider|ObServices)([^\s(]*)/g);if(t&&Array.isArray(t))for(var i=2;i<t.length;i++){var r=t[i].split("."),o=r[r.length-1];if(!o.includes("anonymous"))return o}}return""}catch(e){return"[FAILURE] getCallerName (CommonUtils): "+e}},t.checkWidgetElementExists=function(e){if(e.widgetSettings&&e.widgetSettings.containerID&&!R.getWidgetElement(e.widgetSettings.containerID))throw"Could not find widget on DOM"},t.ieDecrypt=function(e){for(var t=e.split("#"),i=[],r=0;r<t.length;r++)i.push(String.fromCharCode(t[r]/26));return i.reverse().join("")},t.getSiblingsBetweenRecs=function(e,t){for(var i=[],r=!1,o=0,n=Array.from(e.parentNode.children).concat(e.parentNode!==t.parentNode?Array.from(t.parentNode.children):[]);o<n.length;o++){var a=n[o],s=a===e,d=a===t;if(r||s)if(s){if(d)break;r=!0}else if(r){if(d)break;i.push(a)}}return i},t.firePassbackSportrac=function(e){e=(e=e.replace("<script>","")).replace("<\/script>","");var t=document.createElement("script");t.type="text/javascript",t.text=e,document.getElementsByTagName("head")[0].appendChild(t)},t.getSubtree=function(e){return e.shadowRoot||e},t.clearChildren=function(e){var t=e.cloneNode(!1);return e.parentElement.replaceChild(t,e),t},t}(),p=l,g=function(){function e(){}return e.get=function(e,t,i){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?void 0!==t&&t(r.responseText):void 0!==i&&i("Request failed.  Returned status of "+r.status)},r.send()},e.post=function(e,t,i,r){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){200===o.status?void 0!==i&&i(o.responseText):void 0!==r&&r("Request failed.  Returned status of "+o.status)},o.send(JSON.stringify(t))},e.jsonp=function(e,t){var i=document.createElement("script");i.setAttribute("src",e+"&callback="+t),document.getElementsByTagName("head")[0].appendChild(i)},e}(),h=function(){function e(){}return e.isRunning=function(){return e.running},e.getRunningWidgetIdx=function(){return e.widgetIdx},e.setRunning=function(t){e.running=!0,e.widgetIdx.push(t)},e.setNotRunning=function(t){for(var i=0;i<e.widgetIdx.length;i++)e.widgetIdx[i]===t&&e.widgetIdx.splice(i,1);0===e.widgetIdx.length&&(e.running=!1)},e.running=!1,e.widgetIdx=[],e}();!function(e){e.Loaded="VIDGET_LOADED",e.Verbose="VIDGET_VERBOSE",e.Pending="VIDGET_PENDING",e.Viewability="VIDGET_VIEWABILITY",e.IterationCanceled="VIDGET_ITERATION_CANCELED",e.Ready="READY",e.Play="PLAY",e.Pause="PAUSE",e.Resume="RESUME",e.Complete="COMPLETE",e.Click="CLICK",e.Mute="MUTE",e.Unmute="UNMUTE",e.Close="CLOSE",e.Error="ERROR",e.FirstQuartile="FIRST_QUARTILE",e.SecondQuartile="SECOND_QUARTILE",e.ThirdQuartile="THIRD_QUARTILE",e.SliderSkipped="SLIDER_SKIPPED",e.ProviderPass="PROVIDER_PASS",e.PixelFired="PIXEL_FIRED",e.Debug="VIDGET_DEBUG",e.VideoRejected="VIDEO_REJECTED",e.StartRequest="VIDGET_START_REQ",e.PlayReadyRequest="VIDGET_START_READY",e.Skip="SKIP",e.FillCount="FILL_COUNT",e.KeepWatching="KEEP_WATCHING",e.VidgetConfigError="VIDGET_CONFIG_ERROR",e.VidgetFailure="VIDGET_FAILURE",e.ProviderFailure="PROVIDER_FAILURE",e.vidgetLog="VIDGET_LOG",e.EngagedPlay="ENGAGED_PLAY",e.VidgetFeature="VIDGET_FEATURE"}(t||(t={})),function(e){e.Aniview="Aniview",e.Teads="Teads",e.Vidazoo="Vidazoo",e.OPA="OPA",e.OPAdisplay="OPAdisplay"}(r||(r={})),function(e){e.Load="load",e.View="view",e.ViewPreload="viewPreload",e.Controlled="controlled",e.ControlledPauseOutOfView="controlPauseOutOfView"}(o||(o={}));var c,u=((n={})[r.Aniview]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.Teads]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.Vidazoo]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.OPA]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.OPAdisplay]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n),v=((a={})[r.Aniview]=0,a[r.Teads]=0,a[r.Vidazoo]=0,a[r.OPA]=0,a[r.OPAdisplay]=0,a),y=[r.Vidazoo],f="https://videoevents.outbrain.com/events/recordjp",m="https://sim-eventsrecorder.outbrain.com/EventsRecorder/api/events/recordjp",C="https://videovastore.outbrain.com/VideoVastore/api",P="http://videovastore-sim.outbrain.com:8080/VideoVastore/api";!function(e){e.InWidget="inWidget",e.AboveWidget="aboveWidget",e.BelowWidget="belowWidget",e.Midroll="midroll"}(c||(c={}));var b,w=function(){return w=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)},I=function(){function e(e,t,i,r){this.logLevel=0,this.sessionId=e,this._widgetReqId=r,this._providerConfig=t||{},this._playerConfig=i||{},this._win=window,this._iframe=t.isIframe,this.auditUrl=this.getAuditUrl(),this.logLevel=t.loglevel.level,this.consoleLog=t.loglevel.consoleLog,this._version=window.VIDGET_VERSION?window.VIDGET_VERSION:null,"function"!=typeof this._win.OB_VidgetAuditCallback&&(this._win.OB_VidgetAuditCallback=this.onAuditResponse.bind(this))}return e.prototype.updateProviderConfig=function(e){e&&(this._providerConfig=e)},e.prototype.updatePlayerConfig=function(e){e&&(this._playerConfig=e)},e.prototype.updateCurrentReload=function(e){this._providerConfig.currentReload=e},e.prototype.send=function(){var e=this.cleanEmpty(this.extractAuditParams()),t=[this.auditUrl,"?json=",encodeURIComponent(JSON.stringify(e))].join("");g.jsonp(t,"OB_VidgetAuditCallback")},e.prototype.onAuditResponse=function(e){},e.prototype.updateWaterfallModified=function(){if(this._providerConfig.optimizeLogicExcludeCount.waterfallExcludeList.length>0){var e=this._providerConfig.optimizeLogicExcludeCount.waterfallExcludeList,t=this._providerConfig.providersWaterfall.filter((function(t){return e.indexOf(t)<0}));return t.length>0?t.toString():"Empty"}},e.prototype.getAuditUrl=function(){switch(this._providerConfig.env){case"SIM":case"TEST":return m;default:return f}},e.prototype.getAuditPlayMode=function(){switch(this._providerConfig.playMode){case o.Load:return"AUTO_PLAY";case o.View:return"VIEW_TO_PLAY";case o.ViewPreload:return"VIEW_PRELOAD";default:return"UNKNOWN"}},e.prototype.getAuditPlayerLocation=function(){return this._providerConfig.playerLocation?this._providerConfig.isReelWidget?c.Midroll:this._providerConfig.playerLocation:null},e.prototype.extractAuditParams=function(){var e={abTestList:this._providerConfig.layeredTestInfo,abTestVal:this._providerConfig.abTestVal,adBlocker:this._providerConfig.adBlockStatus,agencyId:this._providerConfig.agencyId,bid:this.getBid(),cardIdx:this._providerConfig.cardIdx,campaignId:this._playerConfig.campaignId,ccpaPrivacy:this._providerConfig.ccpaPrivacy,configuredNative:this._providerConfig.nativeVideoMode,configuredProvidersCount:this._providerConfig.providersWaterfall?this._providerConfig.providersWaterfall.length:1,configuredReloadCount:this._providerConfig.configuredReloadCount||1,contentSource:this._providerConfig.vidgetContentSource&&"none"!==this._providerConfig.vidgetContentSource?this._providerConfig.vidgetContentSource:null,contentProvider:this._providerConfig.contentProvider?this._providerConfig.contentProvider:null,currentReload:void 0===this._providerConfig.currentReload?1:this._providerConfig.currentReload,docId:this._providerConfig.docId,externalCampaignId:this._providerConfig.externalCampaignId?this._providerConfig.externalCampaignId:null,featureFlag:this._providerConfig.featureFlag,feedVersion:this._providerConfig.feedVersion,gdpr:this._providerConfig.gdprInt,iframe:this._iframe,isNative:!!this._providerConfig.isNativeVideoPlay&&this._providerConfig.isNativeVideoPlay,isRequestInView:this._providerConfig.isVideoRequestInView,localTime:(new Date).toString(),marketerId:this._playerConfig.marketerId,marketerName:this._playerConfig.marketerName,mediaOrientation:this._providerConfig.mediaOrientation,obRecsAbtestAndVars:this._providerConfig.obRecsAbtestAndVars,odbVidTag:this._providerConfig.odbVidTag,opaAdId:this._providerConfig.opaAdId,opaPartnerId:this._providerConfig.opaPartnerId,opaProductId:this._providerConfig.opaProductId,orientation:this._win.innerHeight>this._win.innerWidth?"PORTRAIT":"LANDSCAPE",partner:this.getPartner(),placementType:this._providerConfig.placementType,playerLocation:this.getAuditPlayerLocation(),pauseOutOfView:this._providerConfig.pauseOutOfView||null,playMode:this.getAuditPlayMode(),prebid:!!this._playerConfig.prebid&&this._playerConfig.prebid,provider:this._providerConfig.provider?this._providerConfig.provider.toUpperCase():"UNKNOWN",providerIndex:this._providerConfig.providerIndex||1,publisherId:this._providerConfig.pubID?this._providerConfig.pubID:"10683",runningWidgetIdx:h.getRunningWidgetIdx().toString(),screenResolution:[this._win.screen.availHeight,"x",this._win.screen.availWidth].join(""),sessionId:this.sessionId,sourceDocUrl:this._providerConfig.datasrc||this._win.location.href,sourceId:this._providerConfig.sourceId?this._providerConfig.sourceId:"6852067",sourcePvId:this._providerConfig.pageViewId,sourceRequestId:this._widgetReqId,sourceSubWidgetId:this._providerConfig.reportedSubWidgetId,sourceWidgetId:this._providerConfig.reportedWidgetId?this._providerConfig.reportedWidgetId:"AR_1",sticky:this._providerConfig.stickyPlayer,subPlatform:this._providerConfig.inApp?this._providerConfig.inApp?"app":"web":null,trafficType:this._providerConfig.trafficType,version:this._version?this._version:void 0,videoBitRate:this._playerConfig.adBitrate||null,videoClickUrl:null,videoDuration:this._providerConfig.videoDuration||0,videoHeight:this._playerConfig.height?parseInt(this._playerConfig.height):null,videoId:this._playerConfig.videoId,videoPositionInWidget:this._providerConfig.index,videoProgress:0,videoWidth:this._playerConfig.width?parseInt(this._playerConfig.width):null,viewability:-1,waterfall:this._providerConfig.providersWaterfall?this._providerConfig.providersWaterfall.toString():null,waterfallModified:this.updateWaterfallModified(),widgetIdx:this._providerConfig.widgetIdx};return w(w({eventType:null},e),this._body)},e.prototype.cleanEmpty=function(e){for(var t in e)e.hasOwnProperty(t)&&/^(^$|null|undefined)$/.test(e[t])&&delete e[t];return e},e.prototype.getBid=function(){if(this._playerConfig.bid&&this._body.eventType===t.Play)return this._playerConfig.bid;delete this._playerConfig.bid},e.prototype.getPartner=function(){if(this._playerConfig.partner)return this._playerConfig.partner;delete this._playerConfig.partner},Object.defineProperty(e.prototype,"body",{get:function(){return this._body},set:function(e){this._body=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerConfig",{get:function(){return this._providerConfig},set:function(e){this._providerConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playerConfig",{get:function(){return this._playerConfig},set:function(e){this._playerConfig=e},enumerable:!0,configurable:!0}),e}();!function(e){e[e.INFO=0]="INFO",e[e.DEBUG=1]="DEBUG",e[e.VERBOSE=2]="VERBOSE"}(b||(b={}));var E,S=function(){return S=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},x=function(){function e(){}return e.setAudit=function(e,t,i,r){return this.audits[e]||(this.audits[e]=new I(e,t,i,r),R.setNewAuditSession(e)),this.audits[e]},e.getAuditBySessionId=function(e,t,i){if(this.audits[e])return t&&this.audits[e].updateProviderConfig(t),i&&this.audits[e].updatePlayerConfig(i),this.audits[e]},e.increaseReload=function(e,t){this.audits[e].updateCurrentReload(t)},e.sendAudit=function(e,t,i,r,o){void 0===i&&(i=""),void 0===r&&(r=b.INFO);var n=this.audits[e];!n||r>n.logLevel||(n.body=S({eventType:t,description:i||""},o),n.send(),n.consoleLog&&i&&console.log("Debug: "+i))},e.debug=function(e,i,r){void 0===i&&(i=""),void 0===r&&(r=t.Debug),this.sendAudit(e,r,i,b.DEBUG)},e.error=function(e,i,r){void 0===i&&(i="Error"),void 0===r&&(r=b.INFO),this.sendAudit(e,t.Error,i,r)},e.verbose=function(i,r,o){if(void 0===r&&(r="in"),void 0===o&&(o=""),this.audits[i]&&this.audits[i].logLevel===b.VERBOSE){var n=p.getCallerName();e.sendAudit(i,t.Verbose,"["+r+"] "+(n||"Could not get function name")+" "+(o?": "+o:o),b.VERBOSE)}},e.audits={},e}();!function(e){e.Horizontal="horizontal",e.Vertical="vertical",e.Both="both"}(E||(E={}));var A,T,V=function(){return V=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)},W=window,k=function(){function t(){}return t.createPlayerWrapperElement=function(e){x.verbose(this.sessionId);var i=t.getPlayerWrapperElement(e);switch(i&&i.parentNode.removeChild(i),e.playerLocation){case c.AboveWidget:return t.createAboveWidgetPlayerWrapper(e);case c.BelowWidget:return t.createBelowWidgetPlayerWrapper(e);case c.InWidget:default:return t.createInWidgetPlayerWrapper(e)}},t.reset=function(e){x.verbose(this.sessionId);var i=t.getPlayerWrapperElement(e);i&&i.parentNode.removeChild(i)},t.getOpaFirstAuction=function(e){return t.widgetProxy.getRawResponse&&t.widgetProxy.getRawResponse(e)},t.getPlayerDimensionsByMediaSize=function(e,i,r){try{if("inWidget"===e.playerLocation||!i||!r)return t.getUpdatedPlayerDimensions(e);var o=e.playerMaxWidth[e.playerOrientation];t.providerConfig=e;var n=t.getWidgetElement(e.containerID),a=p.getSubtree(n).querySelector(".ob-widget-items-container"),s=i/r,d=window.innerWidth>n.offsetWidth?n.offsetWidth:window.innerWidth;return d=a&&(d>a.offsetWidth||0===d)?a.offsetWidth:d,{width:d=o&&o<d?o:d,height:d/s<.9*window.innerHeight?d/s:.9*window.innerHeight}}catch(e){throw x.error(this.sessionId,"error inside getPlayerDimensionsByMediaSize"),"EXIT"}},t.getUpdatedPlayerDimensions=function(e){try{x.verbose(this.sessionId);var i={};t.providerConfig=e;var r=e.containerID,o=t.getWidgetElement(r),n=e.playerMaxWidth[e.playerOrientation];switch(e.playerLocation){case c.InWidget:var a=parseInt(e.firstIndex),s=parseInt(e.lastIndex),d=p.getSubtree(o).querySelector(".ob-recIdx-"+a),l=p.getSubtree(o).querySelector(".ob-recIdx-"+s);if(!0===e.coveredWidget){var g=p.getSubtree(o).querySelector(".ob-widget > .ob-first")||p.getSubtree(o).querySelector(".ob-widget > .ob-widget-items-container"),h=t.getCoveredPlayerHeight(e,g,g.clientWidth);i={width:g.clientWidth,height:h}}else i=t.getPlayerDimensions(d,l);break;case c.AboveWidget:var u=p.getSubtree(o).querySelector(".ob-widget-items-container")||p.getSubtree(o).querySelector(".ob-widget");i=t.getPlayerDimensionsForOuterPlayer(u,o,n,"horizontal");break;case c.BelowWidget:var v=p.getSubtree(o).querySelectorAll(".ob-widget-items-container")||p.getSubtree(o).querySelectorAll(".ob-widget");if(v&&v.length){var y=v[v.length-1];i=t.getPlayerDimensionsForOuterPlayer(y,o,n,"horizontal")}}return i}catch(e){throw x.error(this.sessionId,"getUpdatedPlayerDimensions(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},t.getPlayerWrapperElement=function(e){x.verbose(this.sessionId);var t=e.containerID,i=t+"_"+e.widgetID+"_playerWrapper";return this.getWidgetElement(t).querySelector("#"+i)},t.createInWidgetPlayerWrapper=function(e){try{x.verbose(this.sessionId);var i=e.containerID,r=t.getWidgetElement(i),o=e.widgetID,n=parseInt(e.firstIndex),a=parseInt(e.lastIndex),s=p.getSubtree(r).querySelector(".ob-recIdx-"+n),d=p.getSubtree(r).querySelector(".ob-recIdx-"+a),l=void 0;if(!0===e.coveredWidget){var g=p.getSubtree(r).querySelector(".ob-widget > .ob-first")||p.getSubtree(r).querySelector(".ob-widget > .ob-widget-items-container"),h=t.getCoveredPlayerHeight(e,g,g.clientWidth);(l=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",g.clientWidth,h)).style.top="unset",null!=(c=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&g.insertBefore(c,g.firstChild)}else if(e.isReelWidget){g=p.getSubtree(r).querySelector(".ob-widget > .ob-reel-track");(l=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",r.offsetWidth,s.clientHeight)).style.zIndex="10",null!=(c=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&g.appendChild(c)}else{var c;this.playerDimensions=t.getPlayerDimensions(s,d),l=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),null!=(c=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&s.appendChild(c)}return l}catch(t){var u=this.getExtraDataForDomError(e);return x.error(this.sessionId,"createInWidgetPlayerWrapper(): "+this.defaultErrorMessage+" - "+t.toString()+" - "+u),null}},t.createAboveWidgetPlayerWrapper=function(e){try{x.verbose(this.sessionId);var i=e.containerID,r=t.getWidgetElement(i),o=e.widgetID,n=p.getSubtree(r).querySelector(".ob-widget-items-container")||p.getSubtree(r).querySelector(".ob-widget"),a=e.playerMaxWidth[e.playerOrientation];if(n){var s=e.ghostFixedSize?r:n;this.playerDimensions=t.getPlayerDimensionsForOuterPlayer(s,r,a,"horizontal",e.ghostFixedSize);var d=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),l=this.preparePlayerWrapperToDOM(i,r,d,!!r.shadowRoot);return null!=l&&(n.parentElement?n.parentElement.insertBefore(l,n):n.appendChild(l)),d}}catch(t){var g=this.getExtraDataForDomError(e);return x.error(this.sessionId,"createAboveWidgetPlayerWrapper(): "+this.defaultErrorMessage+" - "+t.toString()+" - "+g),null}},t.preparePlayerWrapperToDOM=function(e,t,i,r){if(void 0===r&&(r=!1),r){var o="wrapperContainerForShadowDom_"+e,n=t.querySelector("#"+o);n&&n.remove();var a=window.document.createElement("div");return a.id=o,a.appendChild(i),t.appendChild(a),null==t.shadowRoot.querySelector("slot")?window.document.createElement("slot"):null}return i},t.getExtraDataForDomError=function(e){try{var t=Array.from(document.getElementsByClassName("OUTBRAIN")),i=[];return t.map((function(e){return i.push(e.id+"-"+e.dataset.widgetId)})),"containerID="+e.containerID+", widgetId="+e.widgetID+", widgetsOnPage="+i}catch(e){return""}},t.isDfpIframe=function(e){try{if(window.self===window.top)return;var t=e.containerID,i=this.getWidgetElement(t);if(e.playerLocation===c.AboveWidget||e.playerLocation===c.BelowWidget){var r;r=window.parent&&window.parent.document?window.parent.document.getElementsByTagName("iframe"):[];for(var o=0;o<r.length;o++)r[o].contentDocument===i.ownerDocument&&r[o].name&&r[o].name.includes("google_ads")&&(e.dfpInfo.dfpFrame=r[o],e.dfpOriginalHeight=r[o].height,e.dfpInfo.isDfp=!0)}}catch(e){x.verbose(this.sessionId,"dfp - "+e)}},t.getConsentData=function(e){var i=t.getWidgetRequest(e.widget,"cnsntv2",null);return i||t.getWidgetRequest(e.widget,"cnsnt","")},t.changeDFP=function(e,t,i){i?(e.dfpInfo.dfpFrame.style.paddingTop="0px",e.dfpInfo.dfpFrame.height=e.dfpInfo.dfpOriginalHeight):(e.dfpInfo.dfpOriginalHeight=parseInt(e.dfpInfo.dfpFrame.height),e.dfpInfo.dfpFrame.style.paddingTop="10px",e.dfpInfo.dfpFrame.height=e.dfpInfo.dfpOriginalHeight+t+"px")},t.getPlayerDimensionsForOuterPlayer=function(e,i,r,o,n){if(void 0===n&&(n=!1),x.verbose(this.sessionId),i.getAttribute("data-feed-idx")){var a=p.getSubtree(i).querySelector(".ob-widget-section");return t.getPlayerDimensions(a,null,r,o,n)}return t.getPlayerDimensions(e,null,r,o,n)},t.createBelowWidgetPlayerWrapper=function(e){try{x.verbose(this.sessionId);var i=e.containerID,r=t.getWidgetElement(i),o=e.widgetID,n=e.playerMaxWidth[e.playerOrientation],a=p.getSubtree(r).querySelectorAll(".ob-widget-items-container")||p.getSubtree(r).querySelectorAll(".ob-widget");if(a&&a.length){var s=a[a.length-1];this.playerDimensions=t.getPlayerDimensionsForOuterPlayer(s,r,n,"horizontal");var d=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),l=this.preparePlayerWrapperToDOM(i,r,d,!!r.shadowRoot);return null!=l&&(s.parentElement?s.parentElement.insertBefore(l,s.nextSibling):s.appendChild(l)),d}}catch(t){var g=this.getExtraDataForDomError(e);return x.error(this.sessionId,"createBelowWidgetPlayerWrapper(): "+this.defaultErrorMessage+" - "+t.toString()+" - "+g),null}},t.createPlayerWrapperDiv=function(e,t,i){x.verbose(this.sessionId);var r=window.document.createElement("div");return r.id=e,r.style.setProperty("width",t+"px","important"),r.style.height=i+"px",r.style.zIndex="1",r.style.visibility="hidden",r.style.top="0px",r.style.position="absolute",r.style.marginRight="auto",r.style.marginLeft="auto",r.style.display="flex",r.style.flexDirection="column",r},t.getTopLeftPoint=function(e,i){try{x.verbose(this.sessionId);var r=t.getWidgetElement(e);if(i){var o=p.getSubtree(r).querySelector(".ob-recIdx-"+i);if(o)return o.getBoundingClientRect().top}return r.getBoundingClientRect().top}catch(e){throw x.error(this.sessionId,"getTopLeftPoint(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},t.getPlayerEffectiveTopLeftPosition=function(e,i,r){try{x.verbose(this.sessionId);var o=t.getWidgetElement(e);switch(i){case c.InWidget:var n=p.getSubtree(o).querySelector(".ob-recIdx-"+r);if(n)return n.getBoundingClientRect().top;break;case c.BelowWidget:return o.getBoundingClientRect().bottom;case c.AboveWidget:default:return o.getBoundingClientRect().top}}catch(e){throw x.error(this.sessionId,"getPlayerEffectiveTopLeftPosition(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},t.getWidgetHeight=function(e){try{return x.verbose(this.sessionId),t.getWidgetElement(e).getBoundingClientRect().height}catch(e){throw x.error(this.sessionId,"getPlayerEffectiveTopLeftPosition(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},t.getWidgetRecInfo=function(e,i){x.verbose(this.sessionId);var r={},o=t.getWidgetElement(e.containerID),n="title"===i?"text":i,a=p.getSubtree(o).querySelector(".ob-recIdx-0 .ob-rec-"+n);return a&&(r.style=window.getComputedStyle(a)||{},r.size=p.getTextSize(e[i],r.style)),r},t.isEmptyWidget=function(e){try{x.verbose(this.sessionId);var i=t.getWidgetElement(e);return!p.getSubtree(i).querySelector(".ob-recIdx-0")}catch(e){throw x.error(this.sessionId,"isEmptyWidget(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},t.displayWidgetElements=function(e,i){void 0===i&&(i=!0);try{x.verbose(this.sessionId);for(var r=t.getWidgetElement(e.containerID),o=t.getPlayerWrapperElement(e),n=0,a=e.indexes;n<a.length;n++){var s=a[n],d=p.getSubtree(r).querySelector(".ob-recIdx-"+(s-1));i?(d.style.visibility="visible",d.classList.remove("playerPlay")):this.isElementPositionedInsideElement(d,o)&&(d.style.visibility="hidden",d.classList.add("playerPlay"))}}catch(e){throw x.error(this.sessionId,"displayWidgetElements(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},t.isElementPositionedInsideElement=function(e,t){return e.getBoundingClientRect().top>=t.getBoundingClientRect().top&&e.getBoundingClientRect().left>=t.getBoundingClientRect().left&&e.getBoundingClientRect().right<=t.getBoundingClientRect().right&&e.getBoundingClientRect().bottom<=t.getBoundingClientRect().bottom},t.getWidgetElement=function(e,t){return void 0===t&&(t=!0),x.verbose(this.sessionId),document.getElementById(e)},t.getPlayerDimensions=function(e,t,i,r,o){if(void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1),x.verbose(this.sessionId),o)return{width:e.clientWidth,height:e.clientHeight};var n=e.getBoundingClientRect();if(t){for(var a=t.getBoundingClientRect(),s={top:Math.min(n.top,a.top),bottom:Math.max(n.bottom,a.bottom),left:Math.min(n.left,a.left),right:Math.max(n.right,a.right)},d=0,l=p.getSiblingsBetweenRecs(e,t);d<l.length;d++){var g=l[d].getBoundingClientRect().bottom;g>s.bottom&&(s.bottom=g)}var h=s.right-s.left,c=s.bottom-s.top;return{width:h&&h>0?h:0,height:c&&c>0?c:0}}var u=i&&i<n.width?i:n.width;return{width:u,height:null==r||"horizontal"===r?Math.floor(9*u/16):Math.floor(16*u/9)}},t.getCoveredPlayerHeight=function(e,i,r,o){void 0===r&&(r=null),void 0===o&&(o=null);var n=null==o||"horizontal"===o?Math.floor(9*r/16):Math.floor(16*r/9);if(i.clientHeight<n)return i.clientHeight;for(var a=t.getWidgetElement(e.containerID),s=0,d=e.indexes;s<d.length;s++){var l=d[s],g=p.getSubtree(a).querySelector(".ob-recIdx-"+(l-1)).getBoundingClientRect().bottom-i.getBoundingClientRect().top;if(g>n){n=g;break}}return n},t.getWidgetSetting=function(e,i,r){return x.verbose(this.sessionId),t.widgetProxy.getSet(e,i,r)},t.addBrandingStyle=function(e,t,i){x.verbose(this.sessionId);var r=document.createElement("style");r.innerHTML="#"+e+"videoBranding .ob_what{background:none !important; padding: 0 5px;}",r.innerHTML+=t?"#"+e+"videoBranding{float:left;}":"#"+e+"videoBranding{float:right;}",i?r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-bottom: 5px; top: 5px; display: block;position: absolute; right: 2px;}":(r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-top: 5px;}",p.isMobile()&&(r.innerHTML+="#"+e+"videoBranding .ob_what{top: auto;}")),document.body.appendChild(r)},t.addDefaultBrandingStyle=function(e,t,i){x.verbose(this.sessionId);var r=document.createElement("style"),o=e+"videoBranding";r.innerHTML="#"+o+" .ob_logo:hover {background-position: center bottom !important;}",i?(r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: right;}":"",r.innerHTML+="#"+o+' .ob_what a:before {content: ""; vertical-align: baseline; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-right: 4px; margin-right:4px; display: inline-block; background-repeat: no-repeat; background-position: left center; border-right: 1px solid #999;}'):(r.innerHTML+="#"+o+' .ob_what a:after {vertical-align: baseline; content:""; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-left: 4px; display: inline-block; background-repeat: no-repeat; background-position: right center; border-left: 1px solid #999; }',r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: left;}":""),document.body.appendChild(r)},t.getVideoProviderWidgetSettings=function(i){try{x.verbose(this.sessionId);var r=t.getWidgetIndex(i),o=r?"outbrain_widget_"+r:"outbrain_widget_0",n=t.getWidgetElement(o),a=t.getGenericProviderSettings(i,o),s=t.getProvidersWaterfall(i),d=s&&s.length?s[0]:"",l=t.getWidgetSetting(i,"vidgetPlayerMaximalWidth",null),g={widget:i,widgetID:t.getWidgetId(i),reportedWidgetId:t.getReportedWidgetJSId(i,n),widgetIdx:r||0,isSmartFeed:t.isSmartFeed(n),isSmartFeedFather:t.isSmartFeedFather(n),pubID:t.getWidgetRequest(i,"pid",null),reqID:t.getWidgetRequest(i,"req_id",-1),pageViewId:t.getWidgetRequest(i,"pvId",""),containerID:o,docId:t.getWidgetRequest(i,"did",-1),sourceId:t.getWidgetRequest(i,"sid",null),lazyListingsPixel:t.getWidgetMeta(i,"lazyListingsPixel",null),datasrc:t.widgetProxy.getDataSrcFinalUrl?t.widgetProxy.getDataSrcFinalUrl(i):this.getDocUrl(n),parallelPlay:t.getWidgetSetting(i,"vidgetParallelPlay",e.Avoid),viewabiltyEventTime:t.getWidgetSetting(i,"vidgetViewabilityMinDuration",2),viewabilityPercentageThreshold:t.getWidgetSetting(i,"vidgetViewabilityPercentageThreshold",50),playerMaxWidth:this.getPlayerMaxWidth(l),playerOrientation:"horizontal",screenOrientation:this.getScreenOrientation(),playOnlyOnWifi:t.getWidgetSetting(i,"vidgetPlayOnlyOnWifi",!0),reportedSubWidgetId:t.getReportedSubWidgetId(i,n),ccpaPrivacy:t.getWidgetRequest(i,"ccpa",void 0),abTestVal:t.getAbTestVal(i,"abTestVal","no_abtest")||"void",obRecsAbtestAndVars:t.getWidgetRequest(i,"obRecsAbtestAndVars",void 0),isIframe:p.isIframe(),recsNumber:t.getWidgetRequest(i,"tcr",0),fAB:t.widgetProxy.getFeedFatherAB(i)?t.widgetProxy.getFeedFatherAB(i):"no_abtest",layeredTestInfo:t.getWidgetRequest(i,"layeredTestInfo",void 0),fid:t.getFeedFatherId(i,n),fIndex:t.getFeedFatherIndex(i,n),feedIdx:t.widgetProxy.getRequest(i,"feedIdx"),cardIdx:t.getCardIdx(i),stickyPlayer:t.getStickyPlayerType(i),brandingType:t.getWidgetSetting(i,"whatIsBrandingType","Amelia + copy"),isTopBranding:t.isTopBranding(n),titleHeight:21,adBlockStatus:"true"===t.widgetProxy.getAdBlockerStatus(),feedVersion:t.widgetProxy.getRequest(i,"feedVersion"),rtlWidget:this.isRTLWidget(n),onlyVideoWidget:0===t.getWidgetRequest(i,"tcr",0)||/odb_dynamic_video-reel/gi.test(t.getWidgetSetting(i,"recMode","")),odbVidTag:t.getWidgetRequest(i,"odb_vid_tag",void 0),externalCampaignId:t.getObExtId(i),externalCampaignId2:t.getObExtId2(i),featureFlag:t.getWidgetSetting(i,"vidgetFeatureFlag","GA"),vidgetOrientation:t.getWidgetSetting(i,"vidgetOrientation",E.Horizontal),nativeVideoMode:t.getWidgetSetting(i,"vidgetNativeVideo","never"),nativeVideoBtnPosition:t.getWidgetSetting(i,"nativeVideoBtnPosition","belowVideo"),nativeVideoLogoPosition:t.getWidgetSetting(i,"nativeVideoLogoPosition","belowVideo"),recMode:t.getWidgetSetting(i,"recMode",""),isVideoReel:/odb_dynamic_video-reel/gi.test(t.getWidgetSetting(i,"recMode","")),vidgetContentSource:t.getWidgetSetting(i,"VidgetContentSource","none"),reelsTransitionDuration:t.getWidgetSetting(i,"reelsTransitionDuration",20),maxOrganicRecs:t.getWidgetSetting(i,"maxOrganicVideos",5),isProviderControlledPauseOutOfView:!1,adLoaded:!1,displayAdMaxSize:t.getWidgetSetting(i,"displayAdSize",""),vidgetWaterfallOptimization:t.getWidgetSetting(i,"vidgetWaterfallOptimization",0),logLevel:t.getWidgetSetting(i,"vidgetLogLevel","INFO").toUpperCase(),vidgetPassBack:t.getWidgetSetting(i,"vidgetPassBack",""),configuredReloadTime:1e3*parseInt(t.getWidgetSetting(i,"vidgetReloadTime",4)),configuredReloadCount:t.getWidgetSetting(i,"vidgetReloadCount",3),actualReloadCount:t.getWidgetSetting(i,"vidgetReloadCount",3),vidgetCustomControls:this.isValidJson(t.getWidgetSetting(i,"vidgetCustomControls","")),vidgetNativeEndCard:t.getWidgetSetting(i,"VidgetNativeEndCard",!0),vidgetDeliveryMode:t.getWidgetSetting(i,"vidgetDeliveryMode","progressive"),playerLocation:t.getPlayerLocation(i),vidgetFootprint:t.getWidgetSetting(i,"vidgetFootprint","standard"),vidgetExternalMeasure:t.getWidgetSetting(i,"VidgetExternalMeasure",!1),firstAucationExceuted:!1,vidgetDynamicReloads:t.getWidgetSetting(i,"vidgetDynamicReloads",0),sellerJsonChain:{ver:"1.0",complete:1,nodes:[{asi:"outbrain.com",sid:"0000000000000000000000000000000000",hp:1}]},dfpInfo:{isDfp:!1,dfpFrame:null,dfpOriginalHeight:null},playedReloadIndexes:[],optimizeLogicExcludeCount:{providers:V({},v),waterfallExcludeList:[],numberOfStrikes:2}};if(a.isReelWidget&&(a.closeButton=!1),g.isSyndicationAllowed=g.isVideoReel&&"syndication"===g.vidgetContentSource.toLowerCase(),"None"!==g.brandingType)if(this.isFeedBranding(i,n,g)||g.onlyVideoWidget)g.brandingTag='<div class="ob_what" style="text-align: right; direction: ltr; clear: both; ">\n\t\t<a href="https://www.outbrain.com/what-is/default/en" rel="nofollow" onclick="OBR.extern.callWhatIs(\'https://www.outbrain.com/what-is/default/en\',\'\',-1,-1,true ,null);return false" style="color: #999; font-size: 11px; font-family: arial; text-decoration: none;">Recommended by<span class="ob_logo" title="Outbrain - content marketing" style="background: url(https://widgets.outbrain.com/images/widgetIcons/ob_logo_67x12.png) no-repeat center top; width: 67px; height: 12px;vertical-align: baseline !important; display: inline-block; padding: 0px 5px; box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box;"></span></a></div>',this.addDefaultBrandingStyle(o+"_"+g.widgetID+"_",g.onlyVideoWidget,g.rtlWidget),this.addBrandingStyle(o+"_"+g.widgetID+"_",g.rtlWidget,g.isTopBranding);else{var h=p.getSubtree(n).querySelector(".ob_what");h&&(g.brandingTag=p.nodeToString(h),this.addBrandingStyle(o+"_"+g.widgetID+"_",g.rtlWidget,g.isTopBranding))}return V(V(V({},g),a),{providersWaterfall:s,provider:d})}catch(e){throw x.error(this.sessionId,"getVideoProviderWidgetSettings(): "+this.defaultErrorMessage+" - "+e.toString()),"getVideoProviderWidgetSettings(): "+this.defaultErrorMessage+" - "+e.toString()}},t.getPlayerLocation=function(e){switch(t.getWidgetSetting(e,"recMode","")){case"odb_dynamic_reel":return c.InWidget;case"odb_dynamic_video-reel":return c.AboveWidget;default:var i=t.getQueryString("obLocation"),r=t.getWidgetSetting(e,"vidgetPlayerLocation",c.InWidget);return i||r}},t.getObExtId=function(e){if(x.verbose(this.sessionId),t.widgetProxy&&t.widgetProxy.getExtId)try{return t.widgetProxy.getExtId(e)}catch(e){throw x.verbose(this.sessionId,"FAILURE",e.toString()),"*** Get OB_ExtId from widget proxy failed ***"}},t.getObExtId2=function(e){if(x.verbose(this.sessionId),t.widgetProxy&&t.widgetProxy.getExtId2)try{return t.widgetProxy.getExtId2(e)}catch(e){throw x.verbose(this.sessionId,"FAILURE",e.toString()),"*** Get OB_ExtId2 from widget proxy failed ***"}},t.isRTLWidget=function(e){x.verbose(this.sessionId);var t=p.getSubtree(e).querySelector(".ob-widget-items-container");return!!t&&"rtl"===window.getComputedStyle(t).getPropertyValue("direction")},t.isReelWidget=function(e){return/(odb_dynamic_reel|odb_dynamic_video-reel)/gi.test(t.getWidgetSetting(e,"recMode",""))},t.showOBBranding=function(e){x.verbose(this.sessionId);var t=p.getSubtree(this.getWidgetElement(e)).querySelector(" [id*=videoBranding] .ob_what");t&&(t.style.display="inline-block")},t.hideOBBranding=function(e){x.verbose(this.sessionId);var t=p.getSubtree(this.getWidgetElement(e)).querySelector(" [id*=videoBranding] .ob_what");t&&(t.style.display="none",t.style.whiteSpace="nowrap")},t.isTopBranding=function(e){x.verbose(this.sessionId);var t=p.getSubtree(e).querySelector(".ob_what");if(t&&!p.isMobile()){var i=document.defaultView.getComputedStyle(t);if(["absolute","static"].includes(i.getPropertyValue("position"))&&!["auto",null].includes(i.getPropertyValue("top")))return!0}return!1},t.isFeedBranding=function(e,i,r){try{x.verbose(this.sessionId);var o=i=p.getSubtree(i);if(r.isSmartFeed?o=t.getWidgetElement("outbrain_widget_"+this.getFeedFatherIndex(e,i)):r.isSmartFeedFather&&(o=i),o){var n=o.querySelector(".ob_what");if(n&&(n.querySelector(".ob_feed_logo")||n.querySelector(".ob_sfeed_logo")))return!0}return!1}catch(e){throw x.error(this.sessionId,"isFeedBranding(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},t.getDocUrl=function(e){x.verbose(this.sessionId);var t=e.getAttribute("data-src");if(t&&t.includes("http"))return t;var i=e.getAttribute("data-ob-contentUrl");if(i)return i;var r=e.getAttribute("data-ob-bundleUrl");if(r)return r;var o=e.getAttribute("data-ob-portalUrl");return o||window.location.href},t.getProvidersWaterfall=function(e){x.verbose(this.sessionId);var i=[],r=t.getWidgetSetting(e,"vidgetProvidersWaterfall",null),o=t.getWidgetSetting(e,"providersBalancing",null);if(r){if((i=(i=r.split(",").map((function(e){return e.trim()}))).filter((function(e){return"Teads"!=e&&"teads"!=e})))&&i.length)return i}else if(o){try{o=W.JSON.parse(o)}catch(e){o={}}var n=p.performRandomWithBalance(o);if(n&&"Teads"!==n)return i.push(n),i}return i.push("Aniview","Vidazoo","OPA"),i},t.renamingPlayMode=function(e,t){switch(x.verbose(this.sessionId),t){case"in-view":return o.View;case"in-view-preload":return o.ViewPreload;case"auto-play":return o.Load;default:return u[e].playMode?u[e].playMode:o.Load}},t.prepareVidgetData=function(e){var i;try{i=JSON.parse(t.getWidgetSetting(e,"vidgetData","{}"))}catch(e){i={},x.error(this.sessionId,"Failed to parse vidgetData")}return i},t.getGenericProviderSettings=function(e,i){x.verbose(this.sessionId);var r={},o=this.prepareVidgetData(e);r.isReelWidget=this.isReelWidget(e);var n=t.getWidgetSetting(e,"vidgetIndexes",null);if("0"===(n=/^([0-9]+(,[0-9]+)*)?$/.test(n)&&!r.isReelWidget?n:"1")){var a=t.getWidgetElement(i);n="0,"+p.getSubtree(a).querySelectorAll("[class*='ob-recIdx-']").length,r.coveredWidget=!0}var s=t.getWidgetSetting(e,"vidgetAdUnitType",null),d=0,l=0,g=Array.from(new Set(n.split(",")));return g.length>=2&&g.sort(),n&&n.length&&(d=g.length&&parseInt(g[0])>0?parseInt(g[0])-1:0,l=g.length?parseInt(g[g.length-1])-1:0),r.firstIndex=d,r.lastIndex=l,r.indexes=g.length>1?Array.from({length:l-d+1},(function(e,t){return t+d+1+""})):g,r.pubDomain=document.location.hostname||document.location.href,r.ctaText=o.ctaText||"",r.instream=s&&"instream"===s,r.unMuteOnMouseEnter=void 0!==o.unMuteOnMouseEnter&&o.unMuteOnMouseEnter,r.closeButton=void 0===o.closeButton||o.closeButton,r.initialDelay=t.setInitialDelay(o,e),r.consoleLog=void 0!==o.consoleLog&&o.consoleLog,r.sliderPercentBottom=t.getSliderPercentBottom(o),r.providerPlayerReuse=void 0!==o.providerPlayerReuse&&o.providerPlayerReuse,r.sticky=t.getStickyPlayerSettings(o),r.avoidSliderWhenSmall=o.avoidSliderWhenSmall||-1/0,r.placementType=this.getPlacementType(o.stickyPlayer,t.getWidgetSetting(e,"placementType","footer")),r.specificAdvName=void 0!==o.specificAdvName?o.specificAdvName:void 0,r.ghostFixedSize=void 0!==o.ghostFixedSize&&o.ghostFixedSize,r.fillEvent=void 0!==o.fillEvent&&o.fillEvent,r.storeVast=void 0!==o.storeVast&&o.storeVast,r.vidgetContentSourceDemo=void 0!==o.vidgetContentSourceDemo&&o.vidgetContentSourceDemo,r.source=void 0!==o.source?o.source:void 0,r.title=void 0!==o.title?o.title:void 0,r.retries=void 0!==o.retries?o.retries:void 0,r.timeout=void 0!==o.timeout?o.timeout:void 0,r.contentProvider=void 0!==o.contentProvider?o.contentProvider:void 0,r.publisherId=o.publisherId||"58a5addb28a0612d3529bc5e",r.errorLimit=o.errorLimit||null,r.channelId=t.getQueryString("obChannelId")||o.channelId,r.playerId=o.playerId||"5ae0a5c0da5fdd00042f78f5",r.isReelWidget&&!o.playerId&&(r.playerId="600584ef43e5240004a62649"),r.userId=o.userId||"5a9ea5a0225f7d0004c70045",r.allowParallelInview=t.getQueryString("allowParallelInview")||o.allowParallelInview,r.tagId=t.getQueryString("obTagId")||o.tagId,r.providerTimeout=this.getTimeoutSetting(o,"Teads"),t.isInAppWidget(e)?t.setInAppWidgetConfig(r,o,e):r.inApp=!1,r.env=W.location.search.includes("vidgetEnv=test")?"TEST":"PROD",r.NativeVideoMaxStreamingDuration=void 0!==o.NativeVideoMaxStreamingDuration?parseInt(o.NativeVideoMaxStreamingDuration):30,r.opaDemoBidder=void 0!==o.opaDemoBidder?o.opaDemoBidder:void 0,r.workerBypass="boolean"==typeof o.workerBypass&&o.workerBypass,r.sliderBelowParent=o.sliderBelowParent||!1,r.gdprInt=this.getGdprOrLegit(e,o),r.header=void 0!==o.header?o.header:void 0,r.endCardDuration=void 0!==o.endCardDuration?o.endCardDuration:void 0,r},t.isInAppWidget=function(e){var i="mobile-app-js-widget"===t.getWidgetSetting(e,"InstallationType","web-js-widget"),r=!1,o=t.getWidgetExtraParams(e);return o&&o.indexOf("inApp=true")>-1&&(r=!0),i||r},t.setInAppWidgetConfig=function(e,i,r){e.inApp=!0;var o=t.getWidgetExetrnalParamMap(r);if(e.inAppBridge=o&&"true"===o.inApp,e.appName=i.appName||o.appName||t.getWidgetRequest(r,"app_name",void 0),e.appCategory=i.appCategory||void 0,e.packageName=i.packageName||o.appBundle||t.getWidgetRequest(r,"app_id",void 0),e.bundleId=i.bundleId||o.appBundle||t.getWidgetRequest(r,"app_id",void 0),e.appStoreUrl=i.appStoreUrl||void 0,e.playStoreUrl=i.playStoreUrl||void 0,e.mobileUserId=t.getApiUserId(r),o.platform)e.platform=o.platform.toLowerCase();else{var n=navigator.userAgent;n.includes("iPhone")||n.includes("iPad")?e.platform="ios":n.includes("Android")&&(e.platform="android")}},t.getWidgetExetrnalParamMap=function(e){var i=t.getWidgetExtraParams(e),r={};return i&&i.split("&").reduce((function(e,t){var i=t.split("=");return e[i[0]]=i[1]?decodeURIComponent(i[1]):"",e}),r),r},t.setInitialDelay=function(e,i){x.verbose(this.sessionId);var r=t.getStickyPlayerType(i);return"none"!==r&&"regular"!==r?2e3:void 0!==e.initialDelay?1e3*parseInt(e.initialDelay):5e3},t.getSliderPercentBottom=function(e){return x.verbose(this.sessionId),void 0!==e.sliderPercentBottom?Math.max(0,(e.sliderPercentBottom-17)%100)+"%":"2px"},t.getStickyPlayerType=function(e){return x.verbose(this.sessionId),t.getQueryString("obSticky")||t.getWidgetSetting(e,"vidgetActivateStickyPlayer","none").toString()},t.getCardIdx=function(e){return t.widgetProxy&&t.widgetProxy.getCardIdx?t.widgetProxy.getCardIdx(e):null},t.getStickyPlayerSettings=function(e){x.verbose(this.sessionId);return{sliderPosition:e.sliderPosition||"right",sliderEntry:e.sliderEntry||"side",width:t.getStickyWidth(e.sliderWidthPercent,400),get height(){return Math.ceil(this.width/this.ratio)},ratio:16/9,widthDefault:400}},t.getPlayerMaxWidth=function(e){x.verbose(this.sessionId);var t={horizontal:null,vertical:null},i=this.isValidJson(e);return i&&isNaN(Number(e))?(isNaN(Number(i.horizontal))||0==i.horizontal||(t.horizontal=i.horizontal),isNaN(Number(i.vertical))||0==i.vertical||(t.vertical=i.vertical)):t.horizontal=isNaN(Number(e))||0==e?null:e,t},t.getScreenOrientation=function(){return W.matchMedia("(orientation: portrait)").matches?"vertical":"horizontal"},t.getPlacementType=function(e,t){return x.verbose(this.sessionId),"slider"===e||"sliderAlwaysRight"===e?"slider":/in-article|sidebar|in-feed|header/gi.test(t)?t:"footer"},t.getStickyWidth=function(e,t){return x.verbose(this.sessionId),e?Math.min(Math.max(e,50),250)*(t/100):t},t.isValidJson=function(e){try{return x.verbose(this.sessionId),JSON.parse(e)}catch(e){return}},t.getVidgetProviders=function(e){x.verbose(this.sessionId);var i=t.getWidgetSetting(e.widgetSettings.widget,"vidgetPlayMode",void 0);return this.buildProvidersSetting(e,i)},t.buildProvidersSetting=function(e,t){x.verbose(this.sessionId);for(var i=[],o=this.getVidegtPlayMode(t),n=function(t){var n={};n.name=r[t],n.name&&(n.playMode=o[n.name].playMode),n.appearanceCounter=i.filter((function(e){return e.name===n.name})).length,n.bidFloor=a.getBidFloor(e,n.name,n.appearanceCounter),n.name&&(n.pauseOutOfView=o[n.name].pauseOutOfView),n.name&&(n.iterations=o[n.name].iterations),i.push(n)},a=this,s=0,d=e.widgetSettings.providersWaterfall;s<d.length;s++){n(d[s])}return i.filter((function(e){return null!=e.name}))},t.getVidegtPlayMode=function(e){var i=t.getQueryString("playMode")?decodeURIComponent(t.getQueryString("playMode")):void 0,r=JSON.parse(JSON.stringify(u)),o=this.isValidJson(e);if(o&&Array.isArray(o)){var n=function(e){var t=i||(o.some((function(t){return t.name===e}))?o.find((function(t){return t.name===e})).playMode:void 0);r[e].playMode=a.renamingPlayMode(e,t),o.some((function(t){return t.name===e&&!0===t.pauseOutOfView}))&&(r[e].pauseOutOfView=!0),o.forEach((function(t){t.name===e&&t.iterations>1&&(r[e].iterations=t.iterations)}))},a=this;for(var s in r)n(s)}else if(i||o&&o.globalPlayMode){var d=i||o.globalPlayMode;for(var s in r)r[s].playMode=this.renamingPlayMode(s,d)}else void 0!==e&&x.error(this.sessionId,"Vidget Play Mode JSON not valid");return r},t.getBidFloor=function(e,i,o){return i!=r.OPA?null:+t.getWidgetSetting(e.widgetSettings.widget,"vidgetOPABidFloor","").split(",")[o]||null},t.getTimeoutSetting=function(e,t){x.verbose(this.sessionId);var i=void 0!==e.timeout?e.timeout:null;return i&&i.length&&((i=i.split(",").map((function(e){return e.trim()})))[0]==t||"All"==i[0])?1e3*parseInt(i[1]):2e4},t.getGdprOrLegit=function(e,i){x.verbose(this.sessionId);var r=t.getWidgetRequest(e,"gdpr",0);return 1==r&&"void"!=t.getWidgetRequest(e,"cnsnt","void")?1:"undefined"!==i.gdpr&&"legitimate"==i.gdpr?2:r},t.getQueryString=function(e){x.verbose(this.sessionId);var t=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(window.location.href);return t?t[1]:null},t.makeHandshake=function(e){x.verbose(this.sessionId),t.widgetProxy&&t.widgetProxy.makeHandshake&&t.widgetProxy.makeHandshake(e)},t.getWidgetId=function(e){return x.verbose(this.sessionId),t.getWidgetRequest(e,"widgetJsId",t.widgetProxy.getWidgetId(e))},t.getWidgetIndex=function(e){if(x.verbose(this.sessionId),t.widgetProxy.getWidgetIndex)return t.widgetProxy.getWidgetIndex(e)},t.getReportedWidgetJSId=function(e,i){x.verbose(this.sessionId);var r=t.getWidgetId(e);if(t.isSmartFeed(i)){var o=t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e;r=t.getWidgetId(o)}return r},t.getFeedFatherId=function(e,i){if(x.verbose(this.sessionId),t.isSmartFeed(i)){var r=t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e;return t.getWidgetRequest(r,"wnid",null)}return null},t.getFeedFatherWidgetIndex=function(e,i){if(t.isSmartFeed(i)){var r=t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e;return t.getWidgetRequest(r,"idx",null)}return null},t.getFeedFatherWidget=function(e,i){return t.isSmartFeed(i)?t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e:null},t.getFeedFatherIndex=function(e,i){if(x.verbose(this.sessionId),t.isSmartFeed(i)){var r=t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e;return t.getWidgetIndex(r)}return null},t.isSmartFeed=function(e){return x.verbose(this.sessionId),!(!e||!e.getAttribute("data-feed-idx")&&!e.getAttribute("data-card-idx"))},t.isSmartFeedFather=function(e){return x.verbose(this.sessionId),!!p.getSubtree(e).querySelector(".ob-widget[class*='ob-smartfeed']")||!!p.getSubtree(e).querySelector(".ob-widget[class*='ob-feed-layout']")},t.getReportedSubWidgetId=function(e,i){x.verbose(this.sessionId);var r=t.getWidgetId(e);return t.isSmartFeed(i)?r:null},t.getWidgetRequest=function(e,i,r){if(x.verbose(this.sessionId),t.widgetProxy.getRequest)return t.widgetProxy.getRequest(e,i,r)},t.getWidgetMeta=function(e,i,r){if(x.verbose(this.sessionId),t.widgetProxy&&"function"==typeof t.widgetProxy.getMeta)try{return t.widgetProxy.getMeta(e,i,r)}catch(e){throw"*** Get widget meta from widget proxy failed ***"}return null},t.getAbTestVal=function(e,i,r){x.verbose(this.sessionId);var o=t.widgetProxy.getFeedFatherAB;if(o.constructor===Function&&o(e)){var n=o(e);if(n&&n!==r){var a=this.getWidgetRequest(e,i,r).split("-")[1];return a?n+"-"+a:n}return n}return this.getWidgetRequest(e,i,r)},t.getApiUserId=function(e){if(x.verbose(this.sessionId),t.widgetProxy&&"function"==typeof t.widgetProxy.getUserId)try{return t.widgetProxy.getUserId(e)}catch(e){throw"*** Get Api user id from widget proxy failed ***"}return null},t.getWidgetExtraParams=function(e){if(t.widgetProxy&&"function"==typeof t.widgetProxy.getExtraParams)try{return t.widgetProxy.getExtraParams(e)}catch(e){throw"*** Get Widget extra params from widget proxy failed ***"}return null},t.shouldRetryValidationOnWidget=function(e){return e&&e.inAppBridge},t.shouldStartExecutionWithDelay=function(e){return e&&e.inAppBridge},t.isWidgetExistingOnPage=function(e){return!!p.getSubtree(t.getWidgetElement(e))},t.canVideoBeProvided=function(e){x.verbose(this.sessionId);var i=e.containerID,r=e.sourceId,o=p.getSubtree(t.getWidgetElement(i));if(!o||!r)return!1;if(e.inAppBridge&&o&&o.getBoundingClientRect&&o.getBoundingClientRect().width<t.minimalWidgetSize)return!1;var n=null;switch(e.playerLocation){case c.InWidget:var a=parseInt(e.firstIndex),s=parseInt(e.lastIndex),d=o.querySelector(".ob-recIdx-"+a),l=o.querySelector(".ob-recIdx-"+s);return d&&l;case c.AboveWidget:return n=o.querySelector(".ob-widget-items-container")||o.querySelector(".ob-widget");case c.BelowWidget:return(n=o.querySelectorAll(".ob-widget-items-container")||o.querySelectorAll(".ob-widget"))&&n.length;default:return!1}},t.stylePropertyValid=function(e,t){return x.verbose(this.sessionId),void 0!==t&&"object"!=typeof t&&"function"!=typeof t&&t.length>0&&t!=parseInt(t)},t.odbCall=function(e,t){x.verbose(this.sessionId),W.OBR.extern.callRecs(e,t)},t.setNewAuditSession=function(e){x.verbose(this.sessionId),this.sessionId=e},t.callWidgetCallback=function(e,t,i){e&&e[t]&&e[t](i)},t.widgetProxy=W.OB_PROXY||{},t.providerConfig={},t.defaultErrorMessage="Error in function that use the widget DOM element",t.playerDimensions=null,t.vidgetBottomMargin=10,t.minimalWidgetSize=75,t}(),R=k,D=function(){function e(e,t,i,r,o){this.extractVideoConfig(e,i,r),this.videoProviderConfig.provider=o.name,this.videoProviderConfig.playMode=o.playMode,this.videoProviderConfig.pauseOutOfView=o.pauseOutOfView,this.videoProviderConfig.bidFloor=o.bidFloor?o.bidFloor.toString():null,this.videoProviderConfig.isVideoRequestInView=null,this.updateExtraProviderSettings(),this.sessionId=t}return e.prototype.extractVideoConfig=function(e,t,i){this.videoProviderConfig=e,this.videoProviderConfig.providerIndex=t,this.videoProviderConfig.currentReload=i},e.prototype.updateCurrentReload=function(e){this.videoProviderConfig.currentReload=e},e.prototype.provide=function(e){},e.prototype.updateExtraProviderSettings=function(){this.videoProviderConfig.trafficType=7,this.videoProviderConfig.providerTimeout=R.getTimeoutSetting(this.videoProviderConfig,this.videoProviderConfig.provider)},e.prototype.isWidgetInView=function(){return p.elementInViewport(R.getWidgetElement(this.videoProviderConfig.containerID),0)},e}();!function(e){e.Never="never",e.AsOutstream="asOutstream",e.Allowed="allowed",e.Required="required"}(A||(A={})),function(e){e.Portrait="portrait",e.Landscape="landscape",e.Squared="squared"}(T||(T={}));var O;i(367);!function(e){e.AdLoaded="adLoaded",e.AdStarted="adStarted",e.AdCompleted="adCompleted"}(O||(O={}));var _,L,B,M,N,H=function(){function e(e,t,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.isMobile=!1,this.playerHeight=0,this.playerWrapperHeight=0,this.isInstream=!1,this.playerPlay=!1,this.widgetElementsHidden=!1,this.playerVisibleFirstTime=!0,this.playerDescriptionHeight=0,this.playerBrandingHeight=0,this.cancelProviderTimeoutDuration=null,this.rejectProviderTimeout=null,this.viewabiltyEventInterval=null,this.totalContinuosViewTime=0,this.viewabiltyEventTime=null,this.viewabiltyIntervalTime=100,this.viewabilityPercentageThreshold=0,this.adPaused=!1,this.internalPause=!1,this.isPlayerOutOfViewport=!1,this.boxSizingOriginal="inherit",this.streamingInterval=0,this.streamingQuartile=0,this.streamingTimePassed=0,this.handleStreamingEvent=0,this.bitrateInterval=0,this.isPlayCanBeCalledViewable=!1,this.activeCompletionTimeMillis=3e4,this.totalPlayDuration=0,this.shouldPlayerAllowUiTransition=!0,this.providerConfig=e,this.sessionId=t,this.playerIdsPrefix=e.containerID+"_"+e.widgetID+"_",this.playerWrapperElementId=this.playerIdsPrefix+"playerWrapper",this.noVideoCallback=i,this.videoPlayCallback=o,this.viewabiltyEventTime=this.providerConfig.provider===r.OPAdisplay?1e3:1e3*this.providerConfig.viewabiltyEventTime,this.viewabilityPercentageThreshold=this.providerConfig.provider===r.OPAdisplay?50:this.providerConfig.viewabilityPercentageThreshold,this.cancelProviderTimeoutDuration=this.providerConfig.providerTimeout,this.isMobile=p.isMobile(),this.stickyPlayer=this.providerConfig.stickyPlayer,this.streamingQuartile=this.providerConfig.NativeVideoMaxStreamingDuration/4}return e.prototype.getPlayerWrapperElementId=function(){return this.playerWrapperElementId},e.prototype.getPlayerContainerId=function(){return""},e.prototype.destroyPlayer=function(){this.player&&this.player.destroy&&this.player.destroy()},e.prototype.getPlayer=function(){return this.player},e.prototype.getAdCurrentTime=function(){return 0},e.prototype.isValidEvent=function(e){return!!p.enumHasValue(this.playerEvents,e)},e.prototype.onEvent=function(e,i){if(e===t.Click)this.audit({eventType:e,consentData:this.providerConfig.loglevel.level>=1?R.getConsentData(this.providerConfig):void 0,videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability()});else this.audit({eventType:e,videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability()})},e.prototype.registerEvents=function(){try{this.registerEvent("onPlay",this.onPlay.bind(this)),this.registerEvent("onLoad",this.onLoad.bind(this)),this.registerEvent("onPause",this.onPause.bind(this)),this.registerEvent("onResume",this.onResume.bind(this)),this.registerEvent("onClose",this.onClose.bind(this)),this.providerConfig.loglevel.level>=1&&(this.registerEvent("onPlay25",this.onEvent.bind(this,t.FirstQuartile)),this.registerEvent("onPlay50",this.onEvent.bind(this,t.SecondQuartile)),this.registerEvent("onPlay75",this.onEvent.bind(this,t.ThirdQuartile))),this.registerEvent("onPlay100",this.onPlay100.bind(this)),this.registerEvent("onSkip",this.hidePlayer.bind(this)),this.registerEvent("onClick",this.onEvent.bind(this,t.Click)),this.registerEvent("onError",this.onError.bind(this)),this.registerEvent("onPlayerError",this.onOPAError.bind(this)),this.registerEvent("onNoAd",this.onNoAd.bind(this)),this.registerEvent("onMute",this.onEvent.bind(this,t.Mute)),this.registerEvent("onUnmute",this.onEvent.bind(this,t.Unmute)),this.registerEvent("onPixelFired",this.onPrintEventTracker.bind(this)),this.registerEvent("onJsTrackerAdded",this.onPrintEventTracker.bind(this)),this.providerConfig.unMuteOnMouseEnter&&this.handleMuteOnMouseEnter()}catch(e){console.log(e)}},e.prototype.onError=function(e){var t=this;this.isInstream||(this.providerConfig.lazyListingsPixel&&((new Image).src=this.providerConfig.lazyListingsPixel),this.playerOutOfViewportLeaveAnimationEffect().then((function(){t.closePlayerNoAd()})))},e.prototype.onOPAError=function(e){var i=this;if(e&&e.detail&&e.detail.message){var r=e.detail.message;e.detail.canContinuePlay||/^Warning/.test(e.detail.message)?this.audit({eventType:t.Error,description:r}):this.playerOutOfViewportLeaveAnimationEffect().then((function(){i.closePlayerVideoRejected(r)}))}else this.playerOutOfViewportLeaveAnimationEffect().then((function(){i.closePlayerVideoRejected()}))},e.prototype.onNoAd=function(){this.closePlayerNoAd()},e.prototype.onPause=function(){"streaming"===this.playerConfig.deliveryMode&&0===this.handleStreamingEvent?(this.adPaused=!1,this.handleStreamingEvent++):(this.adPaused=!0,this.audit({eventType:t.Pause,description:this.internalPause?"paused OutOfView":"",viewability:this.getCurrentViewability()})),this.pausePlayDurationMeasurment()},e.prototype.pausePlayDurationMeasurment=function(){window.clearTimeout(this.playDurationMeasurmentTimeout),this.playDurationMeasurmentTimeout=null,this.totalPlayDuration=(new Date).getTime()-this.videoPlayStartTime},e.prototype.onResume=function(){this.adPaused=!1,this.audit({eventType:t.Resume,viewability:this.getCurrentViewability()}),this.startVideoPlayDurationMeasurment()},e.prototype.pauseProvider=function(){this.destroyPlayer()},e.prototype.pausePlayer=function(){},e.prototype.resumePlayer=function(){},e.prototype.loadAd=function(){},e.prototype.playLoadedAd=function(){},e.prototype.onClose=function(e){void 0===e&&(e=!0),this.hidePlayer(e),R.callWidgetCallback(this.providerConfig.callbacks,"onClose",this.providerConfig.widgetIdx),R.callWidgetCallback(this.providerConfig.callbacks,"onOrganicClose",this.providerConfig.widgetIdx)},e.prototype.registerEvent=function(e,t){},e.prototype.getPlayerWidth=function(){return this.playerElement.clientWidth},e.prototype.getPlayerHeight=function(){return this.playerHeight},e.prototype.getCurrentPlayerHeight=function(){if(this.playerElement&&this.playerElement.getBoundingClientRect().height)return this.playerElement.getBoundingClientRect().height},e.prototype.buildHeaderHTML=function(){var e,t,i=null,r="";if("string"==typeof this.providerConfig.header)e=this.providerConfig.header,t="inherit",r+='<div id="'+this.playerIdsPrefix+'headerWrapper" class="ob_vid_header" >'+e+"</div>";else{var o=this.playerElement.closest(".ob-widget-section");o&&(i=o.getElementsByClassName("ob-widget-header")[0])&&(e=i.textContent,t=window.getComputedStyle(i,null).getPropertyValue("font-family"),r+='<div id="'+this.playerIdsPrefix+'headerWrapper" class="ob_vid_header">'+e+"</div>")}this.providerConfig.brandingTag&&this.providerConfig.isTopBranding&&(r=r+'<div id="'+this.playerIdsPrefix+'videoBranding">'+this.providerConfig.brandingTag+"</div>");var n=this.providerConfig.widgetID+"_ob_vid_hd";if(!document.querySelector("#"+n)){var a=document.createElement("style"),s=t?"font-family:"+t:"";a.innerHTML=".ob_vid_header {display:none; "+s+"}",a.id=n,document.body.appendChild(a)}return r},e.prototype.buildDescriptionHTML=function(){var e="";return(this.providerConfig.title||this.providerConfig.source)&&(e=e+'<div id="'+this.playerIdsPrefix+'titleSrcWrapper">'),this.providerConfig.title&&(e=e+'<div id="'+this.getTitleElementId()+'"><span class="titleStrWrap" style="display: inline-block">'+this.providerConfig.title+"</span></div>"),this.providerConfig.source&&(e=e+'<div id="'+this.playerIdsPrefix+'videoSource"><span class="srcStrWrap" style="display: inline-block">'+this.providerConfig.source+"</span></div>"),(this.providerConfig.title||this.providerConfig.source)&&(e+="</div>"),this.providerConfig.brandingTag&&!this.providerConfig.isTopBranding&&(e=e+'<div id="'+this.playerIdsPrefix+'videoBranding">'+this.providerConfig.brandingTag+"</div>"),e},e.prototype.getTitleElementId=function(){return this.playerIdsPrefix+"videoTitle"},e.prototype.getSrcElementId=function(){return this.playerIdsPrefix+"videoSource"},e.prototype.getHeaderElementId=function(){return this.playerIdsPrefix+"headerWrapper"},e.prototype.getTitleSrcWrapperElementId=function(){return this.playerIdsPrefix+"titleSrcWrapper"},e.prototype.handleVideoDescription=function(){var e=0,t=0,i=0,o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoSource"),n=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoTitle"),a=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoBranding .ob_what"),s=this.providerConfig.title||!1,d=this.providerConfig.source||!1;if(this.playerHeight=parseInt(this.playerElement.style.height.split("px")[0]),R.isEmptyWidget(this.providerConfig.containerID)||!s&&!d)R.isEmptyWidget(this.providerConfig.containerID)&&(s&&(e=parseInt(window.getComputedStyle(n,null).getPropertyValue("height"))),d&&(t=parseInt(window.getComputedStyle(o,null).getPropertyValue("height"))));else{var l=d?R.getWidgetRecInfo(this.providerConfig,"source"):{},g=s?R.getWidgetRecInfo(this.providerConfig,"title"):{},h=["color","fontStyle","lineHeight","fontFamily","fontWeight","padding","border","fontSize","textAlign"];for(var u in h){var v=h[u];d&&l.style.hasOwnProperty(v)&&(o.style[p.toDash(v)]=l.style[v]),s&&g.style.hasOwnProperty(v)&&(n.style[p.toDash(v)]=g.style[v])}s&&(e=parseInt(g.size.height)),d&&(t=parseInt(l.size.height))}if(null!==a){var y=window.getComputedStyle(a,null);i=parseInt(y.getPropertyValue("height"))+parseInt(y.getPropertyValue("padding-top"))+parseInt(y.getPropertyValue("padding-bottom"))}this.playerDescriptionHeight=e+t,this.playerBrandingHeight=i,this.setMarginWhenDescription(),this.providerConfig.playerLocation===c.InWidget&&this.providerConfig.provider!==r.OPA&&(this.playerHeight=this.getProviderPlayerHeight()),this.avoidSliderWhenSmall(),this.playerHeight="sliderAlwaysRight"===this.stickyPlayer?this.providerConfig.sticky.height:this.playerHeight},e.prototype.getProviderPlayerHeight=function(){return this.playerHeight-this.playerDescriptionHeight},e.prototype.setMarginWhenDescription=function(e){void 0===e&&(e=this.playerDescriptionHeight),this.providerConfig.isTopBranding||(e=Math.max(e,this.playerBrandingHeight),!p.getSubtree(R.getWidgetElement(this.providerConfig.containerID)).querySelector(".ob_adTitleDescWrapper")||this.providerConfig.nativeVideoMode!==A.Allowed&&this.providerConfig.nativeVideoMode!==A.Required||(e+=this.playerBrandingHeight)),this.playerElement.style.paddingBottom=e+"px",this.playerElement.style.marginBottom=R.vidgetBottomMargin+"px"},e.prototype.getPlayerDescriptionHeight=function(){return this.playerDescriptionHeight},e.prototype.handlePlayerWrapperHeight=function(){this.providerConfig.playerLocation!==c.InWidget&&(this.playerWrapperHeight=parseInt(this.playerElement.style.height.split("px")[0]),this.isMobile||(this.playerElement.style.overflow="hidden"),this.playerElement.style.height="0px")},e.prototype.handleMuteOnMouseEnter=function(){var e=this;this.playerElement.addEventListener("mouseenter",(function(t){setTimeout((function(){e.player.unmute()}),5)})),this.playerElement.addEventListener("mouseleave",(function(t){setTimeout((function(){e.player.mute()}),5)}))},e.prototype.startBitrateInterval=function(){if(this.providerConfig.provider===r.OPA){var e=this,t=0;this.bitrateInterval=setInterval((function(){if(!this.adPaused){try{e.playerConfig.adBitrate=e.player.getVideoBitrate()}catch(t){x.error(e.sessionId,"getVideoBitrate(): "+t.toString())}3==++t&&e.clearBitrateInterval()}}),2e3)}},e.prototype.onPlay=function(e,i){void 0===i&&(i=null),this.clearPlayRelatedResources(),this.startViewabilityInterval(),this.providerConfig.dfpInfo.isDfp&&R.changeDFP(this.providerConfig,R.playerDimensions.height,!1),this.playerPlay=!0,this.providerConfig.provider!==r.OPA&&(this.providerConfig.mediaOrientation=null),this.showPlayer(),this.addResizeEventListener(),this.handleStickiness();var o=this.playerConfig.companionAds&&this.playerConfig.companionAds[0]?this.playerConfig.companionAds[0]:void 0;try{var n=this.playerElement.getElementsByTagName("video")[0];n&&n.duration&&(this.providerConfig.videoDuration=n.duration)}catch(e){x.error(this.sessionId,"Unable to get video duration:"+e)}if(i&&i.organicEvent||(this.startVideoPlayDurationMeasurment(),this.audit({eventType:t.Play,deliveryMode:this.playerConfig.deliveryMode,consentData:this.providerConfig.loglevel.level>=1?R.getConsentData(this.providerConfig):void 0,supplyChain:this.providerConfig.loglevel.level>=1?this.printSellerJsonSerialized():void 0,companionAdUrl:o?o.staticResource:void 0,companionClickThrough:o?o.companionClickThroughURLTemplate:void 0,heavyAd:this.providerConfig.provider===r.OPA&&"minimal"===this.providerConfig.vidgetFootprint?this.handleHeavyAds(this.playerConfig.heavyAdStatus):void 0})),this.sendEventsToOBR(O.AdStarted),this.startBitrateInterval(),"streaming"===this.playerConfig.deliveryMode&&(this.hidePlayerButtons(),this.streamingInterval=setInterval(this.onStreamPlay.bind(this),1e3),this.adPaused=!1),R.callWidgetCallback(this.providerConfig.callbacks,"onPlay",this.providerConfig.widgetIdx),R.callWidgetCallback(this.providerConfig.callbacks,"onPaidPlay",this.providerConfig.widgetIdx),this.providerConfig.playedReloadIndexes.push(this.providerConfig.currentReload),this.providerConfig.optimizeLogicExcludeCount.providers[this.providerConfig.provider]=0,this.providerConfig.fillEvent){var a=new CustomEvent("onPlay");R.getWidgetElement(this.providerConfig.containerID).dispatchEvent(a)}this.bindedplayerPauseResumeAdCallback=this.playerPauseResumeAdCallback.bind(this),window.addEventListener("pauseResumeAd",this.bindedplayerPauseResumeAdCallback)},e.prototype.handleStickiness=function(){"slider"===this.stickyPlayer||"sliderAlwaysRight"===this.stickyPlayer?this.playerViewCallbackActivateSlider():"regular"===this.stickyPlayer&&(this.bindedStartStickyPlayerCallback=this.PlayerViewCallbackActivateRegular.bind(this),window.addEventListener("scroll",this.bindedStartStickyPlayerCallback))},e.prototype.printSellerJsonSerialized=function(){return this.providerConfig.sellerJsonChain.ver+","+this.providerConfig.sellerJsonChain.complete+"!"+this.providerConfig.sellerJsonChain.nodes[0].asi+","+this.providerConfig.sellerJsonChain.nodes[0].sid+","+this.providerConfig.sellerJsonChain.nodes[0].hp+",,,"},e.prototype.hidePlayerButtons=function(){this.player.hidePlayerButtons()},e.prototype.onStreamPlay=function(){if(!this.adPaused){var e=this.streamingTimePassed;e>=this.streamingQuartile&&e<this.streamingQuartile+1?x.sendAudit(this.sessionId,t.FirstQuartile,"",b.DEBUG):e>=2*this.streamingQuartile&&e<2*this.streamingQuartile+1?x.sendAudit(this.sessionId,t.SecondQuartile,"",b.DEBUG):e>=3*this.streamingQuartile&&e<3*this.streamingQuartile+1?x.sendAudit(this.sessionId,t.ThirdQuartile,"",b.DEBUG):e>=4*this.streamingQuartile&&(this.stopStreamingInterval(),this.onPlay100(this)),this.streamingTimePassed++}},e.prototype.stopStreamingInterval=function(){this.streamingInterval&&window.clearInterval(this.streamingInterval)},e.prototype.startViewabilityInterval=function(){var e=this;this.markPlayAsViewablePlay(!1),this.viewabiltyEventInterval&&window.clearTimeout(this.viewabiltyEventInterval),this.viewabiltyEventInterval=window.setInterval((function(){var i=e.getCurrentViewability();!e.adPaused&&i&&i>=e.viewabilityPercentageThreshold?e.totalContinuosViewTime+=e.viewabiltyIntervalTime:e.totalContinuosViewTime=0,e.totalContinuosViewTime>=e.viewabiltyEventTime&&(window.clearInterval(e.viewabiltyEventInterval),e.fireViewabilityTracker(),e.markPlayAsViewablePlay(!0),e.audit({eventType:t.Viewability,viewability:i,description:"viewability percentage threshold: "+e.viewabilityPercentageThreshold}))}),this.viewabiltyIntervalTime)},e.prototype.startVideoPlayDurationMeasurment=function(){var e=this;this.videoPlayStartTime=(new Date).getTime(),this.playDurationMeasurmentTimeout&&window.clearTimeout(this.playDurationMeasurmentTimeout),this.isAlreadyActiveCompleted()||(this.playDurationMeasurmentTimeout=window.setTimeout((function(){e.audit({eventType:t.EngagedPlay,videoProgress:Math.round(e.getAdCurrentTime()/1e3),viewability:e.getCurrentViewability(),isViewablePlay:e.isPlayCanBeCalledViewable})}),this.activeCompletionTimeMillis-this.totalPlayDuration))},e.prototype.isAlreadyActiveCompleted=function(){return this.totalPlayDuration&&this.totalPlayDuration>this.activeCompletionTimeMillis},e.prototype.markPlayAsViewablePlay=function(e){this.isPlayCanBeCalledViewable=e||!1},e.prototype.fireViewabilityTracker=function(){},e.prototype.getCurrentViewability=function(){return p.viewPercentage(this.playerElement)},e.prototype.onLoad=function(e){this.providerLoad(),this.providerConfig.adLoaded=!0,this.clearProviderRejectTimeout(),this.providerConfig.loglevel.level>=b.DEBUG&&this.audit({eventType:t.Ready}),R.callWidgetCallback(this.providerConfig.callbacks,"onReady",this.providerConfig.widgetIdx),this.sendEventsToOBR(O.AdLoaded)},e.prototype.addResizeEventListener=function(){this.resizeCallback=this.resizePlayer.bind(this),window.addEventListener("resize",this.resizeCallback)},e.prototype.clearResizeEventListener=function(){window.removeEventListener("resize",this.resizeCallback)},e.prototype.clearPauseResumeEventListener=function(){window.removeEventListener("pauseResumeAd",this.bindedplayerPauseResumeAdCallback)},e.prototype.clearPlayLoadedAdEventListener=function(){window.removeEventListener("playLoadedAd",this.bindedPlayAdCallback)},e.prototype.resizePlayer=function(){if(this.player){var e=void 0;if(null===(e=this.providerConfig.provider===r.OPA&&this.isMobile?R.getPlayerDimensionsByMediaSize(this.providerConfig,this.mediaWidth,this.mediaHeight):R.getUpdatedPlayerDimensions(this.providerConfig)))return;this.resize(e.width,e.height),this.playerElement.style.width=e.width+"px",this.playerElement.style.maxWidth=e.width+"px",this.playerElement.style.height=e.height+"px"}},e.prototype.checkMediaRatio=function(){if(this.mediaWidth&&this.mediaHeight){var e=this.mediaWidth/this.mediaHeight;switch(this.providerConfig.mediaOrientation=1===e?T.Squared:e>=1?T.Landscape:T.Portrait,this.providerConfig.vidgetOrientation){case E.Horizontal:e<1&&this.closePlayerVideoRejected("skipped due to video orientation ("+this.mediaWidth+":"+this.mediaHeight+")",t.VideoRejected);break;case E.Vertical:e>1&&this.closePlayerVideoRejected("skipped due to video orientation ("+this.mediaWidth+":"+this.mediaHeight+")",t.VideoRejected)}}},e.prototype.updatePlayerByRatio=function(){this.providerConfig.mediaOrientation===T.Portrait?this.providerConfig.playerOrientation="vertical":this.providerConfig.mediaOrientation===T.Landscape&&(this.providerConfig.playerOrientation="horizontal")},e.prototype.onPlay100=function(e){this.audit({eventType:t.Complete,videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability(),isViewablePlay:this.isPlayCanBeCalledViewable}),this.shouldDisplayNativeEndCard()?this.handleNativeEndCardAndComplete():this.callVideoComplete()},e.prototype.shouldDisplayNativeEndCard=function(){return this.providerConfig.isNative&&this.providerConfig.vidgetNativeEndCard&&this.playerConfig.ctaButton&&this.playerConfig.ctaButton.length&&this.playerConfig.ctaButton.length>1},e.prototype.handleNativeEndCardAndComplete=function(){var e=this,t=6;this.providerConfig.endCardDuration&&(t=this.providerConfig.endCardDuration<=10?this.providerConfig.endCardDuration:10),this.setNativeEndCard(),setTimeout((function(){e.callVideoComplete()}),1e3*t)},e.prototype.callVideoComplete=function(){this.isStickyOutOfViewAnmationNeeded()?this.playerOutOfViewportLeaveAnimationEffect().then(this.videoCompletedPlaying.bind(this)):this.videoCompletedPlaying(),R.callWidgetCallback(this.providerConfig.callbacks,"onClose",this.providerConfig.widgetIdx),R.callWidgetCallback(this.providerConfig.callbacks,"onOrganicClose",this.providerConfig.widgetIdx)},e.prototype.isStickyOutOfViewAnmationNeeded=function(){return"sliderAlwaysRight"===this.stickyPlayer||"none"!==this.stickyPlayer&&this.isPlayerOutOfViewport},e.prototype.setNativeEndCard=function(){},e.prototype.videoCompletedPlaying=function(e){void 0===e&&(e=!0),e?this.hidePlayer():this.clearPlayRelatedResources(),this.sendEventsToOBR(O.AdCompleted)},e.prototype.clearPlayRelatedResources=function(){this.clearProviderRejectTimeout(),this.clearViewabilityInterval(),this.clearVideoPlayMeasurmentTimeout()},e.prototype.getTopLeftWidgetPosition=function(){return R.getTopLeftPoint(this.providerConfig.containerID,null)},e.prototype.getPlayerTopLeftPosition=function(){return this.playerPlay?this.playerElement.getBoundingClientRect().top:R.getPlayerEffectiveTopLeftPosition(this.providerConfig.containerID,this.providerConfig.playerLocation,this.providerConfig.firstIndex)},e.prototype.getPlaceHolderTopLeftPosition=function(){return this.playerPlaceholder.getBoundingClientRect().top},e.prototype.getWidgetHeight=function(){return R.getWidgetHeight(this.providerConfig.containerID)},e.prototype.getPlaceholderHeight=function(){return this.playerPlaceholder.getBoundingClientRect().height},e.prototype.showPlayer=function(){var e=this;this.providerConfig.isReelWidget&&"syndication"!==this.providerConfig.vidgetContentSource.toLowerCase()&&this.showSkipButton(),this.listenToPlayerHeightTransitionEnd();var t=this.playerElement.getElementsByTagName("canvas");if(t&&t.length&&(t[0].style.top="0px"),this.isMobile||this.providerConfig.isReelWidget||!this.shouldPlayerAllowUiTransition||(this.playerElement.style.transition="height 1s"),this.providerConfig.playerLocation===c.InWidget){!0!==this.providerConfig.coveredWidget&&(this.playerElement.style.top="0px"),"sliderAlwaysRight"!==this.stickyPlayer&&(this.widgetElementsHidden=!0,R.displayWidgetElements(this.providerConfig,!1));var i=0;this.providerConfig.provider===r.OPA&&(i=1e3),window.setTimeout((function(){e.playerElement.style.visibility="visible"}),i)}else this.playerElement.style.position="relative",this.playerElement.style.top="0px",this.playerElement.style.visibility="visible",this.playerElement.style.display="block",function(){var e=this,t=this;window.setTimeout((function(){var i;if("sliderAlwaysRight"===t.stickyPlayer||"regular"!==t.stickyPlayer&&"none"!==t.stickyPlayer&&!t.isPlaceholderInView())i=t.calculatePlayerHeightByPlatform.call(t);else if(e.providerConfig.provider===r.OPA&&e.isMobile&&e.mediaWidth&&e.mediaHeight){var o=R.getWidgetElement(e.providerConfig.containerID).offsetWidth,n=e.mediaWidth/e.mediaHeight;i=Math.min(o/n+e.getNativeAssetsHeight(),.9*window.innerHeight)}else i=t.playerWrapperHeight;!e.isPlayerOutOfViewport&&(t.playerElement.style.height=i+"px")}),100)}.bind(this)();this.providerConfig.onlyVideoWidget||R.hideOBBranding(this.providerConfig.containerID)},e.prototype.listenToPlayerHeightTransitionEnd=function(){},e.prototype.minimizeSkipButtonSize=function(e,t){(this.providerConfig.isVideoReel?this.playerWrapperHeight:this.playerElement.offsetHeight)<350&&(e.classList.add("minimize-skip-button"),t.classList.add("minimize-skip-button-text"))},e.prototype.showSkipButton=function(){var e=this,i=document.createElement("div");i.classList.add("obv-skip-wrapper"),i.style.opacity="0.5",i.id=this.getPlayerWrapperElementId()+"-skip";var r=document.createElement("span");r.classList.add("obv-skip-title"),this.minimizeSkipButtonSize(i,r),r.innerText="Skip Ad";var o=document.createElement("span");o.classList.add("obv-skip-arrow"),o.classList.add("vidget-material-icons"),o.innerHTML="skip_next",window.setTimeout((function(){i.style.opacity="1",i.addEventListener("click",(function(){x.sendAudit(e.sessionId,t.Skip,"",b.INFO),e.onClose(!1)}))}),2e3),i.appendChild(r),i.appendChild(o),this.playerElement.appendChild(i)},e.prototype.getNativeAssetsHeight=function(e){void 0===e&&(e=!1)},e.prototype.calculatePlayerHeightByPlatform=function(){return Math[this.isMobile?"min":"max"](parseInt(this.playerElement.style.height.split("px")[0]),this.providerConfig.sticky.height)},e.prototype.hidePlayer=function(e){var i=this;if(void 0===e&&(e=!1),this.clearResources(),!this.isInstream&&this.player){this.widgetElementsHidden&&R.displayWidgetElements(this.providerConfig,!0),this.playerVisibleFirstTime=!0,this.isMobile||this.providerConfig.isReelWidget||!this.shouldPlayerAllowUiTransition||(this.playerElement.style.transition="height 1s"),this.playerElement.style.height="0px",this.playerElement.style.padding="0px";var o=this.providerConfig.playerLocation===c.InWidget||this.providerConfig.isVideoReel?0:1e3,n=Math.round(this.getAdCurrentTime()/1e3);window.setTimeout((function(){i.playerElement.style.display="none",i.playerPlaceholder&&(i.playerPlaceholder.style.display="none"),i.playerPlay=!1,i.widgetElementsHidden=!1,"providerPlayerReuse"===i.providerConfig.featureFlag?i.providerConfig.currentReload>=i.providerConfig.actualReloadCount?(i.destroyPlayer(),setTimeout((function(){i.playerElement&&i.playerElement.parentNode&&(i.providerConfig.dfpInfo.isDfp&&R.changeDFP(i.providerConfig,0,!0),i.playerElement.parentNode.removeChild(i.playerElement),i.player=null),e&&i.audit({eventType:t.Close,videoProgress:n}),h.setNotRunning(i.providerConfig.widgetIdx),i.videoPlayCallback&&i.videoPlayCallback(e)}),5)):(i.pauseProvider(),e&&i.audit({eventType:t.Close,videoProgress:n}),h.setNotRunning(i.providerConfig.widgetIdx),i.videoPlayCallback&&i.videoPlayCallback(e)):(i.destroyPlayer(),setTimeout((function(){i.playerElement&&i.playerElement.parentNode&&(i.providerConfig.dfpInfo.isDfp&&R.changeDFP(i.providerConfig,0,!0),i.playerElement.parentNode.removeChild(i.playerElement),i.player=null),(e||i.providerConfig.provider===r.Teads)&&i.audit({eventType:t.Close,videoProgress:n}),h.setNotRunning(i.providerConfig.widgetIdx),i.videoPlayCallback&&i.videoPlayCallback(e)}),5))}),o)}},e.prototype.playerViewCallbackActivateSlider=function(){!this.isPlayerPositionInlineWithWidget()&&(this.isPlayerOutOfViewport=!0),this.createPlayerPlaceholder(),this.playerOutOfViewportLeaveAnimationEffect(),"sliderAlwaysRight"===this.stickyPlayer&&this.removeScrollListener(),this.isPlayerPositionInlineWithWidget()&&"slider"===this.stickyPlayer||(this.playerOutOfViewport(),"true"==this.providerConfig.sticky.stickRight&&this.removeScrollListener())},e.prototype.createPlayerPlaceholderWrapper=function(){if(this.providerConfig.playerLocation!==c.InWidget||!0===this.providerConfig.coveredWidget){var e=document.createElement("div");e.setAttribute("class","outbrain-place-holder-wrapper"),e.style.position="relative",this.playerElement.parentNode.insertBefore(e,this.playerElement),e.appendChild(this.playerElement)}},e.prototype.PlayerViewCallbackActivateRegular=function(){var e=this.providerConfig.playerLocation===c.BelowWidget,t=e?1:this.getWidgetHeight(),i=this.getTopLeftWidgetPosition(),r=this.getTopLeftWidgetPosition()+this.getWidgetHeight()-(this.playerElement?parseInt(this.playerElement.style.height.split("px")[0]):0);p.elementPercHeightInViewport(e?r:i,t,30,!0)&&(window.removeEventListener("scroll",this.bindedStartStickyPlayerCallback),this.createPlayerPlaceholder())},e.prototype.createPlayerPlaceholder=function(){this.playerPlaceholder=this.playerElement.cloneNode(!1),this.playerPlaceholder.setAttribute("id","player-place-holder"),this.playerPlaceholder.style.position="absolute",this.playerPlaceholder.style.zIndex="0",this.playerPlaceholder.style.marginBottom="0","sliderAlwaysRight"!==this.stickyPlayer&&(this.playerPlaceholder.style.height=this.playerHeight+"px"),this.playerElement.parentNode.insertBefore(this.playerPlaceholder,this.playerElement.nextSibling),this.bindedPlaceholderVisibleCallback=this.placeholderVisibilityCallback.bind(this,!0),this.bindedPlaceholderDissapearCallback=this.placeholderVisibilityCallback.bind(this,!1),window.addEventListener("scroll",this.bindedPlaceholderDissapearCallback)},e.prototype.placeholderVisibilityCallback=function(e){e?this.isPlaceholderInView()&&(window.removeEventListener("scroll",this.bindedPlaceholderVisibleCallback),window.addEventListener("scroll",this.bindedPlaceholderDissapearCallback),window.addEventListener("scroll",this.bindedViewCallback),this.playerInViewport()):this.isPlaceholderInView(!1)&&(window.removeEventListener("scroll",this.bindedViewCallback),window.removeEventListener("scroll",this.bindedPlaceholderDissapearCallback),window.addEventListener("scroll",this.bindedPlaceholderVisibleCallback),this.playerOutOfViewport())},e.prototype.avoidSliderWhenSmall=function(){"none"!==this.stickyPlayer&&(!this.isMobile&&this.providerConfig.avoidSliderWhenSmall>=document.body.clientHeight&&(this.stickyPlayer="none",this.audit({eventType:t.SliderSkipped,description:"Skipped due to screen height limit"})))},e.prototype.isPlaceholderInView=function(e){void 0===e&&(e=!0);var t=this.getPlaceHolderTopLeftPosition(),i=this.getPlaceholderHeight(),r=this.isMobile?99:15,o="regular"===this.stickyPlayer&&!e&&this.providerConfig.sliderBelowParent?"above":"both";return p.elementPercHeightInViewport(t,i,r,e,o)},e.prototype.isPlayerPositionInlineWithWidget=function(){var e=this.providerConfig.playerLocation===c.BelowWidget,t=e?1:this.getWidgetHeight(),i=this.getTopLeftWidgetPosition(),r=this.getTopLeftWidgetPosition()+this.getWidgetHeight()-(this.playerElement?parseInt(this.playerElement.style.height.split("px")[0]):0);return p.elementPercHeightInViewport(e?r:i,t,5,!0)},e.prototype.playerInViewport=function(){this.isPlayerOutOfViewport=!1;var e=this.providerConfig.sticky.sliderPosition,t=this.playerHeight;this.isMobile&&this.providerConfig.provider===r.OPA&&this.mediaWidth&this.mediaHeight&&(t=this.mediaWidth/this.mediaHeight/this.widgetWidth);var i=R.getPlayerWrapperElement(this.providerConfig);if(i.classList.remove("obSticky"),!this.providerConfig.onlyVideoWidget){R.hideOBBranding(this.providerConfig.containerID);var o=i.querySelector("[id*=titleSrcWrapper]");o&&(o.style.maxWidth="none",o.style.display="block")}this.playerPlaceholder.style.position="absolute",this.playerElement.style.position=this.providerConfig.playerLocation===c.InWidget?"absolute":"relative",this.playerElement.style.top="0",this.playerElement.style.bottom="0",this.playerElement.style[e]="inherit",this.playerElement.style.height=t+"px",i.style.display=this.providerConfig.playerLocation===c.InWidget?"flex":"block",i.style.boxSizing=this.boxSizingOriginal,this.resize(this.playerPlaceholder.clientWidth,this.playerHeight),this.playerElement.style.width=this.playerPlaceholder.style.width,this.playerDescriptionHeight&&this.setMarginWhenDescription(),i.style.paddingTop="0px",this.isMobile||this.providerConfig.isReelWidget||(this.playerElement.style.transition="height 1s")},e.prototype.getElementMultiLineTruncation=function(){var e=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),t=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"titleSrcWrapper");e&&e.textContent&&e.textContent.length>180&&(e.textContent=e.textContent.substring(0,180)),e&&p.multiLineTruncation(e,2),t&&p.multiLineTruncation(t,2),i&&p.multiLineTruncation(i,2)},e.prototype.playerOutOfViewport=function(){this.isPlayerOutOfViewport=!0;var e="bottom"===this.providerConfig.sticky.sliderEntry?this.providerConfig.sticky.sliderEntry:this.providerConfig.sticky.sliderPosition;this.playerElement.style.transition=e+" 2s";var t=this.providerConfig.sticky.sliderPosition,i=this.providerConfig.sliderPercentBottom,o=this.providerConfig.sticky.width,n=this.providerConfig.sticky.widthDefault,a=this.providerConfig.sticky.height,s=R.getPlayerWrapperElement(this.providerConfig);if(s.classList.add("obSticky"),s.style.display="block",this.playerElement.style.position="fixed",this.boxSizingOriginal=s.style.boxSizing,s.style.boxSizing="content-box",this.playerPlaceholder.style.position=this.providerConfig.playerLocation===c.InWidget?"absolute":"relative",this.adPaused&&this.internalPause&&(this.internalPause=!1,this.resume()),this.isMobile){if(this.playerElement.style.bottom="2px",this.playerElement.style[t]="2px",this.playerElement.style.top="auto",this.providerConfig.title)this.playerElement.querySelector("#"+this.getTitleElementId()).style.fontSize="10px";var d=Math.max(document.documentElement.clientWidth,window.innerWidth||0),l=d/1.6*(o/n);a=(o=Math.min(d,l))/this.providerConfig.sticky.ratio}else this.playerElement.style.top="auto",this.playerElement.style[t]="2px";if(this.handleDescriptionInSlider(s,o),this.playerElement.style.bottom=i,this.resize(o,a),this.playerElement.style.width=o+"px",this.playerElement.style.height=a+"px",this.clearResizeEventListener(),this.providerConfig.provider==r.OPA){this.getElementMultiLineTruncation();var p=this.getNativeAssetsHeight(!0);s.style.paddingBottom=p+this.playerBrandingHeight+"px"}},e.prototype.handleDescriptionInSlider=function(e,t){var i,r,o=e.querySelector("[id*=headerWrapper]"),n=e.querySelector("[id*=titleSrcWrapper]"),a=e.querySelector(".ob_what");if((a&&this.providerConfig.isTopBranding||o&&""!==o.innerText)&&(this.isMobile?e.style.paddingTop="20px":e.style.paddingTop="30px"),a&&(R.showOBBranding(this.providerConfig.containerID),!this.providerConfig.isTopBranding&&n)){i=n.getElementsByClassName("titleStrWrap")[0],r=n.getElementsByClassName("srcStrWrap")[0];var s=null;i&&r?s=i.clientWidth>r.clientWidth?i.clientWidth:r.clientWidth:i?s=i.clientWidth:r&&(s=r.clientWidth),s>t-a.clientWidth-5?n.style.display="none":n.style.maxWidth=t-a.clientWidth-5+"px"}},e.prototype.getBrandingWidth=function(){var e=this.playerElement.querySelector(".ob_what");return e?e.clientWidth+5:0},e.prototype.addStickyDescriptionGeneralStyling=function(){if(null===this.playerElement.querySelector("#"+this.playerIdsPrefix+"ob_sticky_general_style")){var e=document.createElement("style");e.innerHTML=".obSticky {background:rgba(255,255,255,0.8)}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {display: block !important; position: absolute; } .obSticky #"+this.getHeaderElementId()+" {padding: 0 0 5px 0 !important; margin: 0px 3px 3px 3px !important;}",this.providerConfig.rtlWidget&&(e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {right: 0}"),e.id=this.playerIdsPrefix+"ob_sticky_general_style",document.body.appendChild(e)}},e.prototype.addStickyDescriptionStyling=function(){if(null===this.playerElement.querySelector("#"+this.playerIdsPrefix+"ob_sticky_description_style")){var e=document.createElement("style");e.innerHTML=".obSticky #"+this.getTitleElementId()+", .obSticky .srcStrWrap {font-size:14px !important; line-height:16px !important; padding: 0 !important; font-size:14px !important;margin: 0 !important;}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" { top: 5px; } .obSticky #"+this.getHeaderElementId()+" { font-size:14px !important; line-height:17px !important; }",e.innerHTML+=".obSticky #"+this.getTitleSrcWrapperElementId()+" {margin-top:5px !important;}",e.innerHTML+=".obSticky #"+this.playerIdsPrefix+"videoBranding {font-size: 14px; line-height: 14px;}",this.providerConfig.isTopBranding&&(e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;max-width:calc(100% - "+this.getBrandingWidth()+"px);}"),this.providerConfig.rtlWidget?(e.innerHTML+=".obSticky #"+this.getTitleElementId()+", .obSticky #"+this.getSrcElementId()+"{text-align:right !important;} .obSticky #"+this.getTitleSrcWrapperElementId()+"{float:right !important; margin-right: 3px !important;}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {right: 0}"):e.innerHTML+=".obSticky #"+this.getTitleElementId()+", .obSticky #"+this.getSrcElementId()+"{text-align:left !important;} .obSticky #"+this.getTitleSrcWrapperElementId()+"{float:left !important;}",e.id=this.playerIdsPrefix+"ob_sticky_description_style",document.body.appendChild(e)}},e.prototype.addStickyDescriptionMobileStyling=function(){if(null===this.playerElement.querySelector("#"+this.playerIdsPrefix+"ob_sticky_mobile_description_style")){var e=document.createElement("style");e.innerHTML=".obSticky #"+this.getTitleSrcWrapperElementId()+"{display:none !important;}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" { top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;} .obSticky #"+this.getHeaderElementId()+" { font-size:8px !important; line-height:11px !important; }",this.providerConfig.rtlWidget&&(e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {right: 0}"),e.id=this.playerIdsPrefix+"ob_sticky_mobile_description_style",document.body.appendChild(e)}},e.prototype.playerOutOfViewportLeaveAnimationEffect=function(){var e=this.providerConfig.sticky.sliderPosition,t=this.providerConfig.sticky.sliderEntry;if("sliderAlwaysRight"===this.stickyPlayer||"none"!==this.stickyPlayer&&this.isPlayerOutOfViewport){if("bottom"===t){var i=R.getPlayerWrapperElement(this.providerConfig),r=i.querySelector("[id$='_headerWrapper']"),o=i.querySelector("[id$='_adTitleDescWrapper']"),n=i.querySelector("[id$='_videoBranding']"),a=parseInt(getComputedStyle(i).getPropertyValue("padding-bottom")),s=this.providerConfig.sticky.height;return s+=r?r.clientHeight:0,s+=o?o.clientHeight:0,s+=n?n.clientHeight:0,s+=a,this.playerElement.style.bottom="-"+Math.ceil(s)+"px",this.waitForAnimationEnd("bottom")}return this.playerElement.style[e]="-"+Math.ceil(this.playerElement.clientWidth)+"px",this.waitForAnimationEnd(e)}return Promise.resolve("Done")},e.prototype.waitForAnimationEnd=function(e){var t=this;return new Promise((function(i,r){t.playerElement.addEventListener("transitionend",t.animationDone.bind(t,i,r,e))}))},e.prototype.animationDone=function(e,t,i,r){var o=r.propertyName;if(this.playerElement.removeEventListener("animationend",this.animationDone.bind(this,e,t,i)),!i||o===i)return e("Animation Done")},e.prototype.playerViewCallback=function(e){var t=this;window.setTimeout((function(){var i=t.getPlayerTopLeftPosition(),r=t.getPlayerHeight();e?p.elementPercHeightInViewport(i,r,50,!0)?t.playerVisibleFirstTime?(t.playerVisibleFirstTime=!1,t.play()):t.adPaused&&t.internalPause&&(t.internalPause=!1,t.resume()):t.adPaused||t.playerVisibleFirstTime||(t.internalPause=!0,t.pause()):p.elementPercHeightInViewport(i,r,50,!0)&&t.playerVisibleFirstTime&&(t.playerVisibleFirstTime=!1,window.removeEventListener("scroll",t.bindedViewCallback),t.play())}),500)},e.prototype.playerPlayAdCallback=function(e){this.providerConfig.widgetIdx==e.detail.widgetIdx&&(window.removeEventListener("playLoadedAd",this.bindedPlayAdCallback),"inViewSynd"===this.providerConfig.featureFlag?(this.bindedInViewPlayAdCallback=this.playAdOnlyInViewport.bind(this),window.addEventListener("scroll",this.bindedInViewPlayAdCallback),this.playAdOnlyInViewport()):this.playLoadedAd())},e.prototype.playAdOnlyInViewport=function(){var e=this.getPlayerTopLeftPosition(),t=this.getPlayerHeight();p.elementPercHeightInViewport(e,t,50,!0)&&(window.removeEventListener("scroll",this.bindedInViewPlayAdCallback),this.playLoadedAd())},e.prototype.playerPauseResumeAdCallback=function(e){this.providerConfig.widgetIdx==e.detail.widgetIdx&&(R.getPlayerWrapperElement(this.providerConfig).style.display=e.detail.displayPlayerWrapper?"none":"block","resume"===e.detail.eventName&&this.resume&&this.resume(),"pause"===e.detail.eventName&&this.pause&&this.pause())},e.prototype.pause=function(){this.adPaused=!0,this.player.pause&&this.player.pause()},e.prototype.resume=function(){this.adPaused=!1,this.playerResume()},e.prototype.playerResume=function(){this.player.resume&&this.player.resume()},e.prototype.start=function(){var e=this.providerConfig.playMode;switch("none"!==this.stickyPlayer&&(this.createPlayerPlaceholderWrapper(),this.addStickyDescriptionGeneralStyling(),this.isMobile?this.addStickyDescriptionMobileStyling():this.addStickyDescriptionStyling()),"regular"!==this.stickyPlayer&&"none"!==this.stickyPlayer&&(e=o.Load),this.providerConfig.isReelWidget&&(e=o.Controlled),this.providerConfig.isProviderControlledPauseOutOfView&&(e=o.ControlledPauseOutOfView),e){case o.ControlledPauseOutOfView:this.providerConfig.pauseOutOfView=!0;case o.View:case o.ViewPreload:this.bindedViewCallback=this.playerViewCallback.bind(this,this.providerConfig.pauseOutOfView),window.addEventListener("scroll",this.bindedViewCallback),this.playerViewCallback(this.providerConfig.pauseOutOfView);break;case o.Controlled:this.loadAd(),this.setProviderTimeout(),this.bindedPlayAdCallback=this.playerPlayAdCallback.bind(this),window.addEventListener("playLoadedAd",this.bindedPlayAdCallback);break;case o.Load:default:this.play()}},e.prototype.play=function(){this.providerPlay(),this.setProviderTimeout()},e.prototype.setProviderTimeout=function(){var e=this;this.rejectProviderTimeout&&this.clearProviderRejectTimeout(),this.rejectProviderTimeout=window.setTimeout((function(){e.closePlayerNoAd("provider timeout")}),this.cancelProviderTimeoutDuration)},e.prototype.providerPlay=function(){this.player.play&&this.player.play()},e.prototype.providerLoad=function(){},e.prototype.resize=function(e,t){this.player.resize&&this.player.resize(e,t)},e.prototype.clearProviderRejectTimeout=function(){window.clearTimeout(this.rejectProviderTimeout)},e.prototype.clearViewabilityInterval=function(){window.clearInterval(this.viewabiltyEventInterval)},e.prototype.clearVideoPlayMeasurmentTimeout=function(){window.clearTimeout(this.playDurationMeasurmentTimeout)},e.prototype.clearBitrateInterval=function(){this.bitrateInterval&&window.clearInterval(this.bitrateInterval)},e.prototype.clearTransitionEndListener=function(){this.playerElement.ontransitionend=null},e.prototype.clearResources=function(){this.clearProviderRejectTimeout(),this.clearViewabilityInterval(),this.clearVideoPlayMeasurmentTimeout(),this.removeScrollListener(),this.clearResizeEventListener(),this.clearPauseResumeEventListener(),this.clearPlayLoadedAdEventListener(),this.clearBitrateInterval(),this.clearTransitionEndListener()},e.prototype.removeScrollListener=function(){window.removeEventListener("scroll",this.bindedViewCallback),window.removeEventListener("scroll",this.bindedStartStickyPlayerCallback),window.removeEventListener("scroll",this.bindedPlaceholderVisibleCallback),window.removeEventListener("scroll",this.bindedPlaceholderDissapearCallback)},e.prototype.closePlayerVideoRejected=function(e,i){void 0===e&&(e="Unable to play video"),void 0===i&&(i=t.VideoRejected),this.clearResources(),this.playerElement&&(this.playerElement.style.display="none"),"providerPlayerReuse"===this.providerConfig.featureFlag?this.providerConfig.currentReload>=this.providerConfig.actualReloadCount?this.destroyPlayer():this.pauseProvider():this.destroyPlayer(),this.widgetElementsHidden&&R.displayWidgetElements(this.providerConfig,!0),this.playerElement&&this.playerElement.parentNode&&(this.playerElement.parentNode.removeChild(this.playerElement),this.player=null),h.setNotRunning(this.providerConfig.widgetIdx),this.audit({eventType:i,description:e}),this.noVideoCallback&&this.noVideoCallback()},e.prototype.closePlayerNoAd=function(e,i){var r=this;void 0===e&&(e="no video provided"),void 0===i&&(i=t.ProviderPass),this.providerConfig.optimizeLogicExcludeCount.providers[this.providerConfig.provider]++,this.providerConfig.adLoaded&&(e+=", ready"),this.clearResources(),this.playerElement&&(this.playerElement.style.display="none"),"providerPlayerReuse"===this.providerConfig.featureFlag?this.providerConfig.currentReload>=this.providerConfig.actualReloadCount?this.destroyPlayer():this.pauseProvider():this.destroyPlayer(),this.widgetElementsHidden&&R.displayWidgetElements(this.providerConfig,!0),setTimeout((function(){r.playerElement&&r.playerElement.parentNode&&(r.playerElement.parentNode.removeChild(r.playerElement),r.player=null),h.setNotRunning(r.providerConfig.widgetIdx),!r.playerPlay&&r.noVideoCallback&&(r.providerConfig.loglevel.level>=1&&r.audit({eventType:i,description:e}),r.noVideoCallback())}),5),this.providerConfig.adLoaded=!1},e.prototype.audit=function(e){var t=x.getAuditBySessionId(this.sessionId,this.providerConfig,this.playerConfig);t.body=e,t.send()},e.prototype.onPrintEventTracker=function(e){this.providerConfig.loglevel.level>=b.DEBUG&&e.detail&&this.audit({eventType:t.PixelFired,description:e.detail.substring(0,100)})},e.prototype.sendEventsToOBR=function(e){var t=window.OBR;if(t&&t.extern&&t.extern.video&&t.extern.video.event){var i={widgetID:this.providerConfig.widgetID,widgetIdX:this.providerConfig.widgetIdx,provider:this.providerConfig.provider};t.extern.video.event(e,i)}},e.prototype.handleHeavyAds=function(e){},e.prototype.preparePlayerElement=function(){if(this.providerConfig.containerID&&(this.playerElement=R.createPlayerWrapperElement(this.providerConfig),this.playerElement)){var e=this.buildHeaderHTML(),t=this.buildDescriptionHTML();this.playerElement.innerHTML=e+' <div id="'+this.getPlayerContainerId()+'"></div> '+t,this.playerElement.classList.add("ob-pvid"),this.handleVideoDescription()}},e}(),F=H;!function(e){e[e.onLoad="onLoad"]="onLoad",e[e.onReady="onReady"]="onReady",e[e.onPlay="onPlay"]="onPlay",e[e.onPlay25="onPlay25"]="onPlay25",e[e.onPlay50="onPlay50"]="onPlay50",e[e.onPlay75="onPlay75"]="onPlay75",e[e.onPlay100="onPlay100"]="onPlay100",e[e.onSkip="onSkip"]="onSkip",e[e.onPause="onPause"]="onPause",e[e.onResume="onResume"]="onResume",e[e.onMute="onMute"]="onMute",e[e.onUnmute="onUnmute"]="onUnmute",e[e.onClick="onClick"]="onClick",e[e.onClose="onClose"]="onClose",e[e.onError="onError"]="onError"}(_||(_={})),function(e){e[e.onLoad="adLoad"]="onLoad",e[e.onPlay="adVideoStart"]="onPlay",e[e.onPlay25="adFirstQuartile"]="onPlay25",e[e.onPlay50="adMidpointQuartile"]="onPlay50",e[e.onPlay75="adThirdQuartile"]="onPlay75",e[e.onPlay100="adFinish"]="onPlay100",e[e.onSkip="adSkip"]="onSkip",e[e.onPause="adPaused"]="onPause",e[e.onResume="adPlaying"]="onResume",e[e.onMute="muted"]="onMute",e[e.onUnmute="unMuted"]="onUnmute",e[e.onClick="adClickThru"]="onClick",e[e.onClose="closed"]="onClose",e[e.onError="adRuntimeError"]="onError",e[e.onContentPlay100="contentFinish"]="onContentPlay100",e[e.onContentPlay="contentStart"]="onContentPlay",e[e.onNoAd="adRollEmpty"]="onNoAd"}(L||(L={})),function(e){e[e.onPlay="adImpression"]="onPlay",e[e.onPlay25="adFirstQuartile"]="onPlay25",e[e.onPlay50="adMidpointQuartile"]="onPlay50",e[e.onPlay75="adThirdQuartile"]="onPlay75",e[e.onPlay100="adFinish"]="onPlay100",e[e.onMute="mute"]="onMute",e[e.onUnmute="unmute"]="onUnmute",e[e.onKeepWatching="highlightsKeepWatching"]="onKeepWatching",e[e.onContentStart="contentStart"]="onContentStart",e[e.onContentPlay="contentPlay"]="onContentPlay",e[e.onContentPlay100="contentFinish"]="onContentPlay100",e[e.onContentPause="contentPause"]="onContentPause",e[e.onDestroy="destroy"]="onDestroy"}(B||(B={})),function(e){e[e.onLoad="AdLoaded"]="onLoad",e[e.onPlay="AdVideoStart"]="onPlay",e[e.onPlay25="AdVideoFirstQuartile"]="onPlay25",e[e.onPlay50="AdVideoMidpoint"]="onPlay50",e[e.onPlay75="AdVideoThirdQuartile"]="onPlay75",e[e.onPlay100="AdVideoComplete"]="onPlay100",e[e.onSkip="AdSkipped"]="onSkip",e[e.onPause="AdPaused"]="onPause",e[e.onResume="AdPlaying"]="onResume",e[e.onMute="mute"]="onMute",e[e.onUnmute="unmute"]="onUnmute",e[e.onClick="AdClickThru"]="onClick",e[e.onClose="AdUserClose"]="onClose",e[e.onContentPlay="AdVideoStart"]="onContentPlay",e[e.onError="AdError"]="onError",e[e.onNoAd="noAd"]="onNoAd"}(M||(M={})),function(e){e[e.onLoad="playerReady"]="onLoad",e[e.onReady="ready"]="onReady",e[e.onPlay="adstarted"]="onPlay",e[e.onPlay25="adfirstquartile"]="onPlay25",e[e.onPlay50="admidpoint"]="onPlay50",e[e.onPlay75="adthirdquartile"]="onPlay75",e[e.onPlay100="adcomplete"]="onPlay100",e[e.onSkip="adskipped"]="onSkip",e[e.onPause="adpaused"]="onPause",e[e.onResume="adresumed"]="onResume",e[e.onMute="mute"]="onMute",e[e.onUnmute="unmute"]="onUnmute",e[e.onClick="adclick"]="onClick",e[e.onClose="aduserclose"]="onClose",e[e.onError="aderror"]="onError",e[e.onPlayerError="playererror"]="onPlayerError",e[e.onPixelFired="pixelfired"]="onPixelFired",e[e.onJsTrackerAdded="jstrackeradded"]="onJsTrackerAdded"}(N||(N={}));var z,q,U,j=(z=function(e,t){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},z(e,t)},function(e,t){function i(){this.constructor=e}z(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),G=window,J=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.timelineUpdate=!1,n.isInstream=!!n.providerConfig.instream,n.playerEvents=_,n.preparePlayerElement(),n}return j(t,e),t.prototype.createPlayer=function(){this.playerElement?(this.providerConfig.providerPlayerReuse&&t.player?this.player=t.player:(this.extractPlayerConfig(),this.player=new G.avPlayer(this.playerConfig),t.player=this.player),this.registerEvents()):(x.error(this.sessionId,"No Player Element created."),this.closePlayerNoAd("No Player Element created."))},t.prototype.extractPlayerConfig=function(){var e=this.providerConfig.reportedSubWidgetId?this.providerConfig.reportedWidgetId+"#"+this.providerConfig.reportedSubWidgetId:this.providerConfig.reportedWidgetId,t=[];this.providerConfig.inApp&&(t.push(""),"android"===this.providerConfig.platform&&(this.providerConfig.packageName&&t.push("AV_APPPKGNAME="+this.providerConfig.packageName),this.providerConfig.playStoreUrl&&t.push("AV_APPSTOREURL="+this.providerConfig.playStoreUrl)),"ios"===this.providerConfig.platform&&(this.providerConfig.bundleId&&t.push("AV_APPPKGNAME="+this.providerConfig.bundleId),this.providerConfig.appStoreUrl&&t.push("AV_APPSTOREURL="+this.providerConfig.appStoreUrl)),this.providerConfig.mobileUserId&&t.push("AV_IDFA="+this.providerConfig.mobileUserId),this.providerConfig.appCategory&&t.push("AV_CATEGORY="+this.providerConfig.appCategory),this.providerConfig.appName&&t.push("AV_APPNAME="+this.providerConfig.appName));var i=this.providerConfig.sellerJsonChain,r=i.ver+","+i.complete+"!"+i.nodes[0].asi+","+i.nodes[0].sid+","+i.nodes[0].hp+",,,",o=this.providerConfig.ccpaPrivacy?"&AV_CCPA="+this.providerConfig.ccpaPrivacy:void 0;this.playerConfig={loglevel:this.providerConfig.loglevel.level>=1?10:void 0,publisherId:this.providerConfig.publisherId,videoPlayerId:"Aniview",channelId:this.providerConfig.channelId,width:this.playerElement.style.width.split("px")[0],height:this.playerHeight,HD:!0,errorlimit:this.getErrorLimit(),ref1:"AV_SUBID="+this.providerConfig.pubID+"&AV_CDIM1="+e+"&AV_UID="+this.providerConfig.reqID+"&AV_CDIM2="+this.providerConfig.abTestVal+"&AV_CDIM3="+this.providerConfig.sourceId+"&AV_CDIM4="+this.providerConfig.placementType+o+"&AV_SCHAIN="+r+t.join("&"),adServerDomain:"observe.aniview.com",baseJsUrl:"https://player.aniview.com/script/6.1/",soundButton:!0,pauseButton:!0,logo:!1,vastRetry:1,maxrun:!1===this.providerConfig.providerPlayerReuse||this.providerConfig.retries?parseInt(this.providerConfig.maxRetries):20,position:this.getPlayerContainerId(),loop:!0===this.providerConfig.instream,closeButton:this.providerConfig.closeButton,noifsnd:!0,autoPlay:!this.providerConfig.isReelWidget,updatewaterfall:this.providerConfig.loglevel.level>=1?function(e){if(e)for(var t=0;t<e.length;t++)try{console.log("Aniview extra log:"+e[t].url)}catch(e){}}:void 0,customLogo:this.providerConfig.vidgetCustomControls&&this.providerConfig.vidgetCustomControls.adIcon?{link:this.providerConfig.vidgetCustomControls.adIcon.link,height:this.providerConfig.vidgetCustomControls.adIcon.height,width:this.providerConfig.vidgetCustomControls.adIcon.width,text:this.providerConfig.vidgetCustomControls.adIcon.text,clickthrough:this.providerConfig.vidgetCustomControls.adIcon.clickthrough}:void 0,midrolltime:this.providerConfig.providerPlayerReuse?5:void 0},this.providerConfig.instream&&(this.playerConfig.preloader={type:"content",link:this.providerConfig.preloaderLink,poster:"",clickthrough:""},this.playerConfig.midrolldelay=10,this.playerConfig.midrolltime=10,this.playerConfig.maxrun=void 0)},t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"aniplayer"},t.prototype.getErrorLimit=function(){return this.providerConfig.errorLimit?parseInt(this.providerConfig.errorLimit):this.providerConfig.providerPlayerReuse?8:3},t.prototype.preparePlayerElement=function(){if(this.providerConfig.containerID&&(this.playerElement=R.createPlayerWrapperElement(this.providerConfig),this.playerElement)){var e=this.providerConfig.ctaText&&this.providerConfig.ctaText.length?'<div class="more-btn" id="'+this.playerIdsPrefix+'more-btn">'+this.providerConfig.ctaText+"</div>":"",t=this.buildHeaderHTML(),i=this.buildDescriptionHTML(),r="";this.providerConfig.vidgetCustomControls&&(r=this.setAniviewPlayerStyle()),this.playerElement.innerHTML=r+t+'<div id="'+this.playerIdsPrefix+'aniAnimation" class="aniAnimationOpen"><div id="'+this.playerIdsPrefix+'aniviewBox"><div id="'+this.playerIdsPrefix+'aniplayer"></div><div id="'+this.playerIdsPrefix+'aniplayerbut" style="display:none">'+e+"</div></div></div>"+i,this.handlePlayerButtons(),this.handleVideoDescription(),this.handlePlayerWrapperHeight()}},t.prototype.handlePlayerButtons=function(){this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniplayerbut");var e=this.playerElement.querySelector("#"+this.playerIdsPrefix+"more-btn"),t=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniAnimation"),i=document.createElement("div");e&&(e.style.cssText="position:absolute;bottom:60px;right:0;padding:0 12px;height:32px;background-color:#323232;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:14px;text-align:center;text-transform:uppercase;line-height:32px;border-color:#fff;border-style:solid;border-width:1px 0 1px 1px;-webkit-transition:all .15s ease-in-out;-moz-transition:all .15s ease-in-out;-o-transition:all .15s ease-in-out;transition:all .15s ease-in-out"),t&&(t.style.height=Node.clientHeight-3+"px",i.id=this.playerIdsPrefix+"aniAnimation_close",t.appendChild(i))},t.prototype.setAniviewPlayerStyle=function(){if(this.providerConfig.vidgetCustomControls){var e="<style>";if(this.providerConfig.vidgetCustomControls.playbackButtons&&this.providerConfig.vidgetCustomControls.playbackButtons.play&&(e+=this.providerConfig.vidgetCustomControls.playbackButtons.play?'#av-container #av-inner #gui #buttons #left #play-pause.play {background-image: url("'+this.providerConfig.vidgetCustomControls.playbackButtons.play+'") !important;}':""),this.providerConfig.vidgetCustomControls.adIcon&&(e+="#aniview-credit {display: inline !important; position: relative !important; } ",(this.providerConfig.vidgetCustomControls.adIcon.height||this.providerConfig.vidgetCustomControls.adIcon.height.width)&&(e+="#aniview-credit span{",this.providerConfig.vidgetCustomControls.adIcon.height&&(e+="height: "+this.providerConfig.vidgetCustomControls.adIcon.height+" !important;"),this.providerConfig.vidgetCustomControls.adIcon.width&&(e+="width: "+this.providerConfig.vidgetCustomControls.adIcon.width+" !important;"),e+="} ")),this.providerConfig.vidgetCustomControls.closeButton){if(e+="#av-container #close-btn {",this.providerConfig.vidgetCustomControls.closeButton.marginLeft)e+="margin-left: "+this.providerConfig.vidgetCustomControls.closeButton.marginLeft+" !important;",e+="right: "+(this.providerConfig.vidgetCustomControls.closeButton.marginRight||0)+" !important;";else this.providerConfig.vidgetCustomControls.closeButton.marginRight&&(e+="margin-right: "+this.providerConfig.vidgetCustomControls.closeButton.marginRight+" !important;");this.providerConfig.vidgetCustomControls.closeButton.marginTop&&(e+="margin-top: "+this.providerConfig.vidgetCustomControls.closeButton.marginTop+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderStyle&&(e+="border-style: "+this.providerConfig.vidgetCustomControls.closeButton.borderStyle+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderColor&&(e+="border-color: "+this.providerConfig.vidgetCustomControls.closeButton.borderColor+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderWidth&&(e+="border-width: "+this.providerConfig.vidgetCustomControls.closeButton.borderWidth+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderRadius&&(e+="border-radius: "+this.providerConfig.vidgetCustomControls.closeButton.borderRadius+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.padding&&(e+="padding: "+this.providerConfig.vidgetCustomControls.closeButton.padding+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.transform&&(e+="transform: "+this.providerConfig.vidgetCustomControls.closeButton.transform+" !important;"),e+="} "}return e+="</style>"}return""},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&(this.player[this.playerEvents[e]]=t)},t.prototype.onPlay=function(t){this.playerConfig.videoId=t.asid;var i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniplayerbut"),r=this.playerElement.querySelector("#"+this.playerIdsPrefix+"more-btn"),o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniAnimation");"NOCNTRL"==t.ops?(this.timelineUpdate=!0,this.player.updateGui({playPause:!1,sound:!1,showTimeline:!1})):this.timelineUpdate&&(this.timelineUpdate=!1,this.player.updateGui({playPause:!0,sound:!0,showTimeline:!0})),t.clickThrough&&(i.style.display="block",r&&(r.onclick=function(){window.open(t.clickThrough)})),o.style.top="",o.style.position="",t&&t.tagInfo&&("pb"===t.tagInfo.type?(this.playerConfig.bid=t.tagInfo.bidCpm,this.playerConfig.partner=t.tagInfo.platform,this.playerConfig.prebid=!0):this.playerConfig.prebid=!1),this.setAniviewCustomePlayer(),e.prototype.onPlay.call(this,t)},t.prototype.setAniviewCustomePlayer=function(){if(this.providerConfig.vidgetCustomControls){if(this.providerConfig.vidgetCustomControls.playbackButtons&&this.providerConfig.vidgetCustomControls.playbackButtons.pause)p.getSubtree(R.getWidgetElement(this.providerConfig.containerID)).querySelector("#av-container #av-inner #gui #buttons #left #play-pause.pause").setAttribute("style",'background-image: url("'+this.providerConfig.vidgetCustomControls.playbackButtons.pause+'")');if(this.providerConfig.vidgetCustomControls.soundButtons){if(this.providerConfig.vidgetCustomControls.soundButtons.on)this.playerElement.querySelector("#sound").style.backgroundImage='url("'+this.providerConfig.vidgetCustomControls.soundButtons.on+'")';if(this.providerConfig.vidgetCustomControls.soundButtons.off)this.playerElement.querySelector("#sound").style.backgroundImage='url("'+this.providerConfig.vidgetCustomControls.soundButtons.off+'")'}if(this.providerConfig.vidgetCustomControls.adIcon){var e=this.playerElement.querySelector("#aniview-credit");if(e.style.position="relative",this.providerConfig.vidgetCustomControls.adIcon.top&&(e.style.top=this.providerConfig.vidgetCustomControls.adIcon.top),this.providerConfig.vidgetCustomControls.adIcon.left&&(e.style.left=this.providerConfig.vidgetCustomControls.adIcon.left),this.providerConfig.vidgetCustomControls.adIcon.right&&(e.style.right=this.providerConfig.vidgetCustomControls.adIcon.right),this.providerConfig.vidgetCustomControls.adIcon.text&&(e.style.content=this.providerConfig.vidgetCustomControls.adIcon.text),this.providerConfig.vidgetCustomControls.adIcon.font&&(e.style.fontFamily=this.providerConfig.vidgetCustomControls.adIcon.font),this.providerConfig.vidgetCustomControls.adIcon.fontSize&&(e.style.fontSize=this.providerConfig.vidgetCustomControls.adIcon.fontSize),this.providerConfig.vidgetCustomControls.adIcon.color&&(e.style.color=this.providerConfig.vidgetCustomControls.adIcon.color),this.providerConfig.vidgetCustomControls.adIcon.space&&(e.style.textIndent=this.providerConfig.vidgetCustomControls.adIcon.space),this.providerConfig.vidgetCustomControls.adIcon.bottom){e.style.top="unset";for(var t=this.providerConfig.vidgetCustomControls.adIcon.bottom,i=t.split(""),r="",o=0;o<i.length;o++)isNaN(i[o])||(r+=i[o]+"");e.style.bottom=""===r?t:0-(this.playerHeight-e.offsetHeight-10)+"px"}}}},t.prototype.onError=function(e){e&&e.errorlimit&&!this.isInstream?(this.providerConfig.lazyListingsPixel&&((new Image).src=this.providerConfig.lazyListingsPixel),this.closePlayerNoAd()):this.playerPlay&&(x.error(this.sessionId,"Error during Aniview player play"),this.hidePlayer())},t.prototype.destroyPlayer=function(){this.player&&(this.player.onClose=null,this.player.onPause=null,this.player.close())},t.prototype.getAdCurrentTime=function(){var e=0;return 1e3*(e=this.player.getAdDuration()-this.player.getAdRemainingTime()||e)},t.prototype.loadAd=function(){this.play()},t.prototype.playLoadedAd=function(){this.player.startAd&&this.player.startAd()},t}(F),Q=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),X=window,Y=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Q(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.trackInit(),e.videoProviderConfig.instream?e.handleInstream(e.waterfallContinue):e.handleOutstream(e.waterfallContinue)}))},i.prototype.handleOutstream=function(e){x.verbose(this.sessionId),this.player=new J(this.videoProviderConfig,this.sessionId,this.waterfallContinue,this.waterfallStop),this.downloadAniviewScript(e)},i.prototype.handleInstream=function(e){var t=this,i=new XMLHttpRequest;i.addEventListener("load",(function(){var r=JSON.parse(i.responseText);t.videoProviderConfig.preloaderLink=r.data.Vurls,t.player=new J(t.videoProviderConfig,t.sessionId,this.waterfallContinue,this.waterfallStop),t.downloadAniviewScript(e)})),i.open("GET","https://s3.amazonaws.com/test.wibbitz.com/boom/wibbitz-videos-en.json"),i.send()},i.prototype.downloadAniviewScript=function(e){var r=this;if(x.verbose(this.sessionId),X.avPlayer)x.verbose(this.sessionId,"in","Aniview script already loaded in page"),this.onAniviewLoaded();else{x.verbose(this.sessionId,"inside","Loading Aniview provider");var o=document.createElement("script");o.src=i.playerProviderUrl,o.onload=this.onAniviewLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?x.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(r.sessionId,t.ProviderFailure,"Aniview provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)}},i.prototype.onAniviewLoaded=function(){this.player.createPlayer(),this.player.getPlayer()&&this.player.start()},i.prototype.trackInit=function(){i.initTracked||(i.initTracked=!0)},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||2},i.playerProviderUrl="https://player.aniview.com/script/6.1/aniview.js",i.initTracked=!1,i}(D),K=Y,$=new(function(){function e(){this.obServiceUrl="https://videoclientsservicescalls.outbrain.com/",this.docFeaturesPromises={}}return e.prototype.getDocFeatures=function(e,t,i){return this.getDocFeaturesPromise(e,i)?this.getDocFeaturesPromise(e,i):this.createDocFeaturePromise(e,t,i)},e.prototype.createDocFeaturePromise=function(e,t,i){var r=this,o=i+"_"+e;return this.docFeaturesPromises[o]=new Promise((function(o,n){var a=[r.obServiceUrl,i,"?callback=OB_VidgetServiceCallBack","&docId=",e,"&pubId=",t].join(""),s=new XMLHttpRequest;s.open("GET",a),s.onload=function(){200===s.status?o(s.responseText):n("Request failed.  Returned status of "+s.status)},s.ontimeout=function(){n("Timeout - No response from server")},s.timeout=5e3,s.send()})),this.docFeaturesPromises[o]},e.prototype.getDocFeaturesPromise=function(e,t){var i=t+"_"+e;if(this.docFeaturesPromises)return this.docFeaturesPromises[i]},e.prototype.getVideoVastoreUrl=function(e){switch(e.env){case"SIM":case"TEST":return P;default:return C}},e}()),Z=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ee=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.playerInitPromise=null,n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=L,n}return Z(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"vidplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Vidazoo",width:this.playerElement.style.width.split("px")[0],HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.createPlayer=function(e){this.playerElement?(this.player=e,this.registerEvents(),this.playerInitPromise=this.player.init()):(x.error(this.sessionId,"No Player Element created."),this.closePlayerNoAd("No Player Element created."))},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},t.prototype.destroyPlayer=function(){this.player&&this.player.destroy()},t.prototype.pauseProvider=function(){this.player&&"providerPlayerReuse"===this.providerConfig.featureFlag?(t.vidazooPlayerObject=this,t.vidazooPlayerObject.player.holdRoll(),t.vidazooPlayerObject.playerContainer||(t.vidazooPlayerObject.playerContainer=document.getElementById(this.getPlayerContainerId()))):this.destroyPlayer()},t.prototype.resumeProvider=function(){t.vidazooPlayerObject&&"providerPlayerReuse"===this.providerConfig.featureFlag&&(this.noVideoCallback=t.vidazooPlayerObject.noVideoCallback,this.videoPlayCallback=t.vidazooPlayerObject.videoPlayCallback,t.vidazooPlayerObject.player.getHighestLoadedPrice()>0?(this.preparePlayerElement(),this.player=t.vidazooPlayerObject.player,document.getElementById(this.getPlayerWrapperElementId()).appendChild(t.vidazooPlayerObject.playerContainer),t.vidazooPlayerObject.player.resumeRoll()):this.closePlayerNoAd())},t.prototype.onPlay=function(i){"providerPlayerReuse"===this.playerConfig.featureFlag&&(t.vidazooPlayerObject&&t.vidazooPlayerObject.player?t.vidazooPlayerObject.player.holdRoll():this.player.holdRoll());var r="indirect";i&&i.tag&&("pre_bid"==i.tag.type||i.tag.isMarketPlace)?(this.playerConfig.prebid=!0,this.playerConfig.bid=i.price,this.playerConfig.partner=i.tag.partnerTagId?i.tag.partnerTagId:r):(this.playerConfig.prebid=!1,this.playerConfig.partner=r),this.postVastXML(this.providerConfig,i.adm,i.adId),e.prototype.onPlay.call(this,i)},t.prototype.postVastXML=function(e,t,i){if(t&&"storeVast"===e.featureFlag){var r=$.getVideoVastoreUrl(e)+"/logVastMeasurement?adId="+i;g.post(r,t)}},t.prototype.playerResume=function(){this.player.play()},t.prototype.providerPlay=function(){var e=this;this.playerInitPromise.then((function(){e.player.start()}))},t.prototype.isPaused=function(){return this.player.isPaused()},t.prototype.resize=function(e,t){this.player.resize(e,t,!0)},t.prototype.getAdCurrentTime=function(){var e=0;return 1e3*(e=this.player.getAdTime()||e)},t.prototype.playLoadedAd=function(){this.play()},t.prototype.hidePlayer=function(i){void 0===i&&(i=!1),"providerPlayerReuse"===this.playerConfig.featureFlag&&t.vidazooPlayerObject&&t.vidazooPlayerObject.player.holdRoll(),e.prototype.hidePlayer.call(this,i)},t}(F),te=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ie=window,re=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return te(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,"providerPlayerReuse"===e.videoProviderConfig.featureFlag&&ee.vidazooPlayerObject?(ee.vidazooPlayerObject.noVideoCallback=e.waterfallContinue,ee.vidazooPlayerObject.videoPlayCallback=e.waterfallStop,ee.vidazooPlayerObject.resumeProvider()):(e.player=new ee(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.extractVidazooBootstrapConfig(),e.downloadVidazooScript(e.waterfallContinue))}))},i.prototype.extractVidazooBootstrapConfig=function(){var e=this.videoProviderConfig.reportedSubWidgetId?this.videoProviderConfig.reportedWidgetId+"-"+this.videoProviderConfig.reportedSubWidgetId:this.videoProviderConfig.reportedWidgetId;return{userId:this.videoProviderConfig.userId,playerId:this.videoProviderConfig.playerId,auto:!1,el:"#"+this.player.getPlayerContainerId(),query:{param1:e,param2:this.videoProviderConfig.sourceId,campaign:this.videoProviderConfig.pubID,param3:this.videoProviderConfig.abTestVal,param4:this.videoProviderConfig.placementType,inApp:this.videoProviderConfig.inApp,appName:this.videoProviderConfig.appName,appBundle:"android"===this.videoProviderConfig.platform?this.videoProviderConfig.packageName:this.videoProviderConfig.bundleId,appCategory:this.videoProviderConfig.appCategory,appStoreUrl:this.videoProviderConfig.appStoreUrl,deviceIfa:"ios"===this.videoProviderConfig.platform?this.videoProviderConfig.mobileUserId:void 0,deviceAid:"android"===this.videoProviderConfig.platform?this.videoProviderConfig.mobileUserId:void 0,schain:this.videoProviderConfig.sellerJsonChain,userConsentStr:R.getConsentData(this.videoProviderConfig),userGdpr:this.videoProviderConfig.gdprInt,usPrivacy:this.videoProviderConfig.ccpaPrivacy},player:{autoPlay:!("providerPlayerReuse"!==this.videoProviderConfig.featureFlag&&!this.videoProviderConfig.isReelWidget),holdStartRollSaga:!("providerPlayerReuse"!==this.videoProviderConfig.featureFlag&&!this.videoProviderConfig.isReelWidget),loop:!0===this.videoProviderConfig.instream,skin:"https://static.vidazoo.com/basev/skins/outbrain/outbrain.js",useNativeRequest:this.videoProviderConfig.workerBypass,skinParams:{hideAdSkin:!1,hideContentSkin:!1,hideOnIma:!1,hideOnVpaid:!1,hideOnVast:!1,animateClose:!0,rounded:!0,close:!!this.videoProviderConfig.closeButton&&{style:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.closeButton?{marginLeft:this.videoProviderConfig.vidgetCustomControls.closeButton.marginLeft,marginRight:this.videoProviderConfig.vidgetCustomControls.closeButton.marginRight,marginTop:this.videoProviderConfig.vidgetCustomControls.closeButton.marginTop,borderStyle:this.videoProviderConfig.vidgetCustomControls.closeButton.borderStyle,borderColor:this.videoProviderConfig.vidgetCustomControls.closeButton.borderColor,borderWidth:this.videoProviderConfig.vidgetCustomControls.closeButton.borderWidth,borderRadius:this.videoProviderConfig.vidgetCustomControls.closeButton.borderRadius,padding:this.videoProviderConfig.vidgetCustomControls.closeButton.padding,transform:this.videoProviderConfig.vidgetCustomControls.closeButton.transform}:{}},progress:!0,sound:!0,playback:!0,playbackButtons:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.playbackButtons?{play:this.videoProviderConfig.vidgetCustomControls.playbackButtons.play,pause:this.videoProviderConfig.vidgetCustomControls.playbackButtons.pause}:void 0,soundButtons:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.soundButtons?{on:this.videoProviderConfig.vidgetCustomControls.soundButtons.on,off:this.videoProviderConfig.vidgetCustomControls.soundButtons.off}:void 0,logo:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.adIcon?{link:this.videoProviderConfig.vidgetCustomControls.adIcon.link,top:this.videoProviderConfig.vidgetCustomControls.adIcon.top,left:this.videoProviderConfig.vidgetCustomControls.adIcon.left,right:this.videoProviderConfig.vidgetCustomControls.adIcon.right,bottom:this.videoProviderConfig.vidgetCustomControls.adIcon.bottom,height:this.videoProviderConfig.vidgetCustomControls.adIcon.height,width:this.videoProviderConfig.vidgetCustomControls.adIcon.width,text:this.videoProviderConfig.vidgetCustomControls.adIcon.text,font:this.videoProviderConfig.vidgetCustomControls.adIcon.font,fontSize:this.videoProviderConfig.vidgetCustomControls.adIcon.fontSize,color:this.videoProviderConfig.vidgetCustomControls.adIcon.color,space:this.videoProviderConfig.vidgetCustomControls.adIcon.space,clickthrough:this.videoProviderConfig.vidgetCustomControls.adIcon.clickthrough,target:this.videoProviderConfig.vidgetCustomControls.adIcon.target}:void 0},tagSentSessionCap:"providerPlayerReuse"===this.videoProviderConfig.featureFlag?void 0:parseInt(this.videoProviderConfig.maxRetries),saasDebug:this.videoProviderConfig.loglevel.level>=1},tpl:{width:"inherit",height:"inherit"},macros:{ob_page_url:encodeURI(this.videoProviderConfig.datasrc),docId:this.videoProviderConfig.docId}}},i.prototype.downloadVidazooScript=function(e){var r=this;if(x.verbose(this.sessionId),ie.vdz&&ie.vdz.create)x.verbose(this.sessionId,"inside","Vidazoo script already loaded in page"),this.onVidazooLoaded();else{x.verbose(this.sessionId,"inside","Loading Vidazoo provider");var o=document.createElement("script");o.src=i.playerProviderUrl,o.onload=this.onVidazooLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?x.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(r.sessionId,t.ProviderFailure,"Vidazoo provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)}},i.prototype.onVidazooLoaded=function(){x.verbose(this.sessionId);var e=this.extractVidazooBootstrapConfig(),t=this;ie.vdz.create(e,(function(e,i){e?t.player.closePlayerNoAd(t.waterfallContinue):(t.player.createPlayer(i),t.player.start(),t.player.resize(t.player.getPlayerWidth(),t.player.playerHeight))}))},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||1},i.playerProviderUrl="https://static.vidazoo.com/basev/vpts.js",i}(D),oe=re,ne=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ae=function(e){function i(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=B,n}return ne(i,e),i.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"vidplayer"},i.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Vidazoo",width:this.playerElement.style.width.split("px")[0],HD:!0}},i.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},i.prototype.onCreatedPlayer=function(e){this.player=e,this.registerEvents(),this.registerOrganicEvents()},i.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},i.prototype.destroyPlayer=function(){this.player&&this.player.destroy()},i.prototype.pauseProvider=function(){this.destroyPlayer()},i.prototype.resize=function(e,t){this.player.resize(e,t,!0)},i.prototype.videoCompletedPlaying=function(){e.prototype.videoCompletedPlaying.call(this,!1)},i.prototype.onOrganicEvent=function(e){this.audit({contentProvider:"vidazoo",provider:"ORGANIC",eventType:e,viewability:this.getCurrentViewability(),trafficType:12})},i.prototype.onPlay=function(t){this.initPrebidData(),t&&t.tag&&(this.playerConfig.prebid=!0,this.playerConfig.bid=t.price,this.playerConfig.partner=t.tag.partnerTagId),this.postVastXML(this.providerConfig,t.adm,t.adId),e.prototype.onPlay.call(this,t)},i.prototype.onPlayOrganic=function(i){this.initPrebidData(),this.onOrganicEvent(t.Play),e.prototype.onPlay.call(this,i,{organicEvent:!0})},i.prototype.initPrebidData=function(){this.playerConfig.prebid=null,this.playerConfig.bid=null,this.playerConfig.partner=null},i.prototype.postVastXML=function(e,t,i){if(t&&"storeVast"===e.featureFlag){var r=$.getVideoVastoreUrl(e)+"/logVastMeasurement?adId="+i;g.post(r,t)}},i.prototype.registerOrganicEvents=function(){this.registerEvent("onContentStart",this.onPlayOrganic.bind(this)),this.registerEvent("onContentPlay",this.onOrganicEvent.bind(this,t.Resume)),this.registerEvent("onContentPlay100",this.onOrganicEvent.bind(this,t.Complete)),this.registerEvent("onContentPause",this.onOrganicEvent.bind(this,t.Pause)),this.registerEvent("onKeepWatching",this.onOrganicEvent.bind(this,t.KeepWatching))},i}(F),se=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),de=window,le=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return se(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new ae(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.downloadVidazooScript(e.waterfallContinue)}))},i.prototype.downloadVidazooScript=function(e){var r=this;x.verbose(this.sessionId),de.onVidazooSyndicationWidgetCreated=function(e){r.onWidgetCreated(e)};var o=document.createElement("script");o.src=i.playerProviderUrl,o.setAttribute("data-widget-id",this.videoProviderConfig.playerId),o.setAttribute("data-widget-created","onVidazooSyndicationWidgetCreated"),o.setAttribute("data-user-gdpr",this.videoProviderConfig.gdprInt),o.setAttribute("data-consent-str",R.getConsentData(this.videoProviderConfig)),o.setAttribute("data-campaign",this.videoProviderConfig.pubID);var n=this.videoProviderConfig.reportedSubWidgetId?this.videoProviderConfig.reportedWidgetId+"-"+this.videoProviderConfig.reportedSubWidgetId:this.videoProviderConfig.reportedWidgetId;o.setAttribute("data-param1",n),o.setAttribute("data-param2",this.videoProviderConfig.sourceId),o.setAttribute("data-param3",this.videoProviderConfig.abTestVal),o.setAttribute("data-param4",this.videoProviderConfig.placementType),this.videoProviderConfig.ccpaPrivacy&&o.setAttribute("data-us-privacy",this.videoProviderConfig.ccpaPrivacy),this.videoProviderConfig.sellerJsonChain&&o.setAttribute("data-schain",encodeURIComponent(JSON.stringify(this.videoProviderConfig.sellerJsonChain))),void 0!==o.async&&(o.async=!0),o.onerror=function(){r.videoProviderConfig.adBlockStatus?x.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(r.sessionId,t.ProviderFailure,"Vidazoo Syndication provider failed to load",b.DEBUG),e()},document.querySelector("#"+this.player.getPlayerContainerId()).appendChild(o)},i.prototype.onWidgetCreated=function(e){this.player.onCreatedPlayer(e)},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||1},i.playerProviderUrl="https://static.vidazoo.com/basev/stage/vwpts.js",i}(D),pe=le,ge=(i(830),function(){function e(){}return e.storeReelElements=function(e){try{var t=p.getSubtree(R.getWidgetElement(e.containerID));this.reelElements={titleDiv:t.querySelector(".ob-reel-title.ob-reel-in"),titleTextDiv:t.querySelector(".ob-reel-title-text"),footerDiv:t.querySelector(".ob-reel-footer"),controlsDiv:t.querySelector(".ob-reel-controls"),sourceDiv:t.querySelector(".ob-reel-source"),sourceTextDiv:t.querySelector(".ob-reel-source-text"),readMoreDiv:t.querySelector(".ob-reel-more"),progressDiv:t.querySelector(".ob-reel-progress")},this.reelElements.titleTextChildSpan=this.reelElements.titleTextDiv.getElementsByTagName("span"),this.reelElements.titleTextChildDiv=this.reelElements.titleTextDiv.getElementsByTagName("div"),this.reelElements.readMoreSpan=this.reelElements.readMoreDiv.getElementsByTagName("span"),this.reelElements.readMoreOriginalText=this.reelElements.readMoreSpan[0].innerHTML}catch(e){x.error("","storeReelElements() "+e.toString())}},e.prepareReelLayoutForNative=function(e,t){try{this.storeReelElements(e),e.adSponsored&&e.adSponsored.length>0&&(this.reelElements.sourceTextDiv.innerHTML="Sponsored by "+e.adSponsored),this.reelElements.sourceTextDiv.classList.add("vidget-reel-source-text"),this.reelElements.sourceDiv.classList.add("vidget-reel-source"),this.reelElements.footerDiv.classList.add("vidget-reel-footer"),this.reelElements.controlsDiv.classList.add("vidget-reel-controls");var i=this.reelElements.titleTextDiv,r=this.reelElements.titleTextChildSpan,o=this.reelElements.titleTextChildDiv;if(e.adTitle.length>0?(this.reelElements.titleDiv.classList.add("vidget-reel-title"),r[0]&&o[0]&&(r[0].innerHTML=e.adTitle,i.removeAttribute("href"),i.removeAttribute("onmousedown"),this.reelElements.titleTextDiv.classList.add("vidget-reel-remove-cursor")),r[0]&&p.renderTitle(e.adTitle,this.reelElements.titleTextDiv),r[1]?this.reelElements.titleDiv.classList.add("vidget-reel-two-line-height"):this.reelElements.titleDiv.classList.add("vidget-reel-one-line-height")):this.reelElements.titleDiv.classList.add("vidget-reel-no-title"),this.reelElements.readMoreDiv.children[0]){var n=this.reelElements.readMoreDiv;e.ctaButton&&e.adCtaUrl&&(n.children[0].innerHTML=e.ctaButton,n.setAttribute("href",e.adCtaUrl),n.setAttribute("target","_blank"),n.setAttribute("onmousedown",""),n.addEventListener("click",t),n.classList.add("vidget-reel-read-more"))}}catch(e){x.error("","prepareReelLayoutForNative() "+e.toString())}},e.removeNativeLayoutFromReel=function(e){try{this.reelElements.footerDiv.classList.remove("vidget-reel-footer"),this.reelElements.sourceDiv.classList.remove("vidget-reel-source"),this.reelElements.titleDiv.classList.remove("vidget-reel-title"),this.reelElements.titleDiv.classList.remove(".vidget-reel-no-title"),this.reelElements.controlsDiv.classList.remove("vidget-reel-controls"),this.reelElements.readMoreDiv.classList.remove("vidget-reel-read-more"),this.reelElements.titleTextDiv.classList.remove("vidget-reel-remove-cursor"),this.reelElements.readMoreSpan[0]&&(this.reelElements.readMoreSpan[0].innerHTML=this.reelElements.readMoreOriginalText,this.reelElements.readMoreDiv.setAttribute("target","_self"),this.reelElements.readMoreDiv.removeEventListener("click",e))}catch(e){x.error("","removeNativeLayoutFromReel() "+e.toString())}},e}()),he=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ce=window,ue=function(e){function i(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.playerInitPromise=null,n.isNativeVideoPlayAllowed=!1,n.isNativeVideoPlayAllowed=n.providerConfig.nativeVideoMode===A.Allowed||n.providerConfig.nativeVideoMode===A.Required,n.preparePlayerElement(),n.outbrainPlayerElement=document.getElementById(n.getPlayerContainerId()),n.playerEvents=N,n.extractPlayerConfig(),n}return he(i,e),i.prototype.createPlayer=function(){if(this.playerElement){if(this.addVideoDataToConfig(),!this.isPlayerShouldBeCreated())return;this.providerConfig.isNativeVideoPlay?(this.setNativeWrapperElement(),this.appendDescriptionHTML(),this.handleVideoDescriptionForNative()):this.handleVideoDescription(),this.handlePlayerWrapperHeight(),this.player=new ce.OutbrainMP(this.getPlayerContainerId()),this.audit({eventType:t.Ready}),this.providerConfig.provider===r.OPAdisplay&&this.setDisplayAd(),this.initPlayer(),this.registerEvents()}else this.closePlayerNoAd("No Player Element created.")},i.prototype.addVideoDataToConfig=function(){this.playerConfig&&(this.playerConfig.vastXML=this.providerConfig.vastXML,this.playerConfig.marketerId=this.providerConfig.advId,this.playerConfig.marketerName=this.providerConfig.advName,this.playerConfig.campaignId=this.providerConfig.campaignId,this.playerConfig.outstream=!0,this.playerConfig.customControls=JSON.stringify(this.providerConfig.vidgetCustomControls),this.playerConfig.containerId=this.providerConfig.containerID+"_"+this.providerConfig.widgetID,this.playerConfig.adDescription=this.providerConfig.adDescription,this.playerConfig.adTitle=this.providerConfig.adTitle,this.playerConfig.adSponsored=this.providerConfig.adSponsored,this.playerConfig.ctaButton=this.providerConfig.ctaButton,this.playerConfig.adCtaUrl=this.providerConfig.adCtaUrl,this.playerConfig.adSponsorLogo=this.providerConfig.adSponsorLogo?this.providerConfig.adSponsorLogo:{},this.playerConfig.width=this.playerElement.offsetWidth,this.playerConfig.publisherId=this.providerConfig.pubID,this.playerConfig.publisherName=this.providerConfig.publisherName,this.playerConfig.domain=this.providerConfig.pubDomain,this.playerConfig.widgetId=this.providerConfig.widgetID,this.playerConfig.partnerId=this.providerConfig.opaPartnerId,this.playerConfig.trackMoat=this.providerConfig.vidgetExternalMeasure,this.playerConfig.bitrateEnabled="minimal"===this.providerConfig.vidgetFootprint,this.playerConfig.placementWidth=this.playerElement.offsetWidth,this.playerConfig.placementHeight=this.playerElement.offsetHeight,this.playerConfig.isNativeVideo=this.providerConfig.isNativeVideo)},i.prototype.isPlayerShouldBeCreated=function(){if(this.providerConfig.isNativeVideo){if(this.providerConfig.nativeVideoMode===A.Never)return this.providerConfig.isNativeVideoPlay=!1,this.audit({eventType:t.VideoRejected,description:"Native video ad mismatch with widget config - configuredNative = Never and native assets available"}),this.closePlayerNoAd("configuredNative = Never and native assets available"),!1;this.providerConfig.nativeVideoMode===A.AsOutstream?this.providerConfig.isNativeVideoPlay=!1:this.providerConfig.isNativeVideoPlay=!0}else if(this.providerConfig.isNativeVideoPlay=!1,this.providerConfig.nativeVideoMode===A.Required)return this.providerConfig.isNativeVideoPlay=!1,this.audit({eventType:t.VideoRejected,description:"Native video ad mismatch with widget config - NativeVideoMode = Required and no native video"}),this.closePlayerNoAd("NativeVideoMode = Required and no native video"),!1;return!0},i.prototype.nativePixelDimensionsCheck=function(){if(this.providerConfig.playerLocation===c.InWidget){var e=R.getUpdatedPlayerDimensions(this.providerConfig);if(e&&(e.width<200||e.height<150)){if(this.providerConfig.nativeVideoMode===A.Required)return void this.closePlayerNoAd("Native assets not displayed, widget smaller than allowed.");this.removeAllNativeElements("Native assets not displayed, widget smaller than allowed.")}else e&&e.height<200&&e.height>150&&(this.playerConfig.adDescription&&x.sendAudit(this.sessionId,t.Debug,"Native description not displayed, widget smaller than allowed.",b.DEBUG),this.playerConfig.adDescription="")}},i.prototype.getVastXML=function(e){return fetch(e).then((function(e){return e.text()}))},i.prototype.extractPlayerConfig=function(){this.playerConfig={relativeSize:!0,autoPlay:!1,muted:!0,videoPlayerId:"Outbrain",showClose:this.providerConfig.closeButton}},i.prototype.initPlayer=function(){var e=this;this.playerInitPromise=new Promise((function(t,i){e.player.init(e.playerConfig),e.outbrainPlayerElement.addEventListener("ready",(function(){t("ready")}))}))},i.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this)},i.prototype.setNativeWrapperElement=function(){try{var e=void 0,t=void 0,i=void 0;this.providerConfig.isReelWidget||(i=this.outbrainPlayerElement,e=this.nativeBuildBelowDescriptionHTML(),i.parentNode.insertBefore(e,i.nextSibling),"aboveVideo"!==this.providerConfig.nativeVideoBtnPosition&&"aboveVideo"!==this.providerConfig.nativeVideoLogoPosition||(t=this.nativeBuildAboveDescriptionHTML(),i.parentNode.insertBefore(t,i)))}catch(e){x.error("","setNativeWrapperElement() "+e.toString())}},i.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.outbrainPlayerElement.addEventListener(this.playerEvents[e],t)},i.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"omp"},i.prototype.fireImpressionTrackers=function(){this.isPixelTrackersFound()&&this.providerConfig.trackers.pixels.impressions&&this.firePixels(this.providerConfig.trackers.pixels.impressions),this.isJsTrackersFound()&&this.providerConfig.trackers.jsTrackers.impressions&&this.attachJsTracker(this.providerConfig.trackers.jsTrackers.impressions)},i.prototype.fireViewabilityTracker=function(){this.isPixelTrackersFound()&&this.providerConfig.trackers.pixels.videoViewable&&this.firePixels(this.providerConfig.trackers.pixels.videoViewable),this.isJsTrackersFound()&&this.providerConfig.trackers.jsTrackers.videoViewable&&this.attachJsTracker(this.providerConfig.trackers.jsTrackers.videoViewable)},i.prototype.isPixelTrackersFound=function(){return this.providerConfig.trackers&&this.providerConfig.trackers.pixels},i.prototype.isJsTrackersFound=function(){return this.providerConfig.trackers&&this.providerConfig.trackers.jsTrackers},i.prototype.firePixels=function(e){for(var t=0;t<e.length;t++){(new Image).src=e[t],this.reportTrackersToKibana(e[t])}},i.prototype.attachJsTracker=function(e){var i,r=this.playerElement.getElementsByTagName("video")[0];if(i=r?r.parentElement:this.playerElement)for(var o=0;o<e.length;o++){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.src=e[o],i.appendChild(n),this.reportTrackersToKibana(e[o])}else x.sendAudit(this.sessionId,t.vidgetLog,"JsTrackers: could not find attach js tracker")},i.prototype.reportTrackersToKibana=function(e){this.providerConfig.loglevel.level>=b.DEBUG&&this.audit({eventType:t.PixelFired,description:e.substring(0,75)})},i.prototype.onPlay=function(t){e.prototype.onPlay.call(this,t),this.fireImpressionTrackers()},i.prototype.providerPlay=function(){var e=this;this.playerInitPromise.then((function(){try{e.playerConfig.adSystem=e.player.getAdSystem(),e.playerConfig.adBitrate=e.player.getVideoBitrate(),e.playerConfig.deliveryMode=e.player.getAdDeliveryType(),e.playerConfig.companionAds=e.player.getCompanionAds(),"minimal"===e.providerConfig.vidgetFootprint&&(e.playerConfig.heavyAdStatus=e.player.getHeavyAdStatus()),e.setRestrictions()}catch(t){x.error(e.sessionId,"Unable to get OPA data from obPlayer. "+t)}e.player&&e.player.getVastHeight&&e.player.getVastWidth&&(e.mediaHeight=e.player.getVastHeight(),e.mediaWidth=e.player.getVastWidth(),e.checkMediaRatio(),e.updatePlayerByRatio(),e.providerConfig.adLoaded=!0,e.clearProviderRejectTimeout(),"blockHeavy"===e.providerConfig.featureFlag&&/noBitrate|noMatchingTag|vpaid/gi.test(e.playerConfig.heavyAdStatus)&&e.closePlayerVideoRejected("heavy ad avoided",t.VideoRejected),R.callWidgetCallback(e.providerConfig.callbacks,"onReady",e.providerConfig.widgetIdx));var i=e.providerConfig.playerMaxWidth;if("none"!==e.stickyPlayer||null===i.horizontal&&null===i.vertical||(e.resizePlayer(),e.handlePlayerWrapperHeight()),!e.providerConfig.isReelWidget&&e.player&&(e.player.play(),e.player.resize()),e.providerConfig.provider===r.OPAdisplay){var o=e.outbrainPlayerElement.querySelector(".omp-volume-btn");o&&(o.style.pointerEvents="none")}}))},i.prototype.setRestrictions=function(){"adnxs"===this.playerConfig.adSystem&&(this.shouldPlayerAllowUiTransition=!1)},i.prototype.playLoadedAd=function(){this.player&&(this.player.play(),this.player.resize())},i.prototype.loadAd=function(){this.providerPlay()},i.prototype.getAdCurrentTime=function(){var e=0;return e=this.player.getAdCurrentTime()||e},i.prototype.hidePlayerButtons=function(){this.outbrainPlayerElement.querySelector("#omp-footer").style.display="none"},i.prototype.removeAllNativeElements=function(e){void 0===e&&(e=""),this.providerConfig.isNativeVideoPlay=!1;var i=this.getAboveAdTitleDescWrapperElement(),r=this.getAdTitleDescWrapperElement();i&&i.parentElement&&i.parentElement.removeChild(i),r&&r.parentElement&&r.parentElement.removeChild(r),x.sendAudit(this.sessionId,t.Debug,"All Native Elements removed if exist. "+e,b.DEBUG)},i.prototype.removeDescription=function(e){this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescription").classList.remove("adVideoDescription"),e.parentElement&&e.parentElement.removeChild(e)},i.prototype.getAdTitleDescWrapperElement=function(){return this.playerElement.querySelector(".adTitleDescWrapper")},i.prototype.getAboveAdTitleDescWrapperElement=function(){return this.playerElement.querySelector(".AboveAdTitleDescWrapper")},i.prototype.destroyPlayer=function(){this.player&&this.player.destroy&&(this.providerConfig.isNativeVideoPlay&&this.removeAllNativeElements("destroyPlayer()"),this.player.destroy(),this.providerConfig.isNativeVideoPlay=!1)},i.prototype.checkNativeSizePrecentege=function(){var e=R.getUpdatedPlayerDimensions(this.providerConfig),t=this.getAboveAdTitleDescWrapperElement(),i=this.getAdTitleDescWrapperElement(),r=t&&t.clientHeight?t.clientHeight:0;return(r+=i&&i.clientHeight?i.clientHeight:0)/e.height},i.prototype.checkIfNeedToRemoveNativeAssets=function(e,i){this.nativePixelDimensionsCheck();var r=this.checkNativeSizePrecentege();r>.35&&(0==e.removed&&(this.removeDescription(i),e.removed=!0,r=this.checkNativeSizePrecentege()),r>.35?this.providerConfig.nativeVideoMode===A.Required?(this.providerConfig.isNativeVideoPlay=!1,this.closePlayerNoAd("Native video skipped as assets bigger than 35% of the widget. (Required)")):this.removeAllNativeElements("Native assets not displayed, bigger than 35% of the widget"):e.hadValue&&x.sendAudit(this.sessionId,t.Debug,"Native description not displayed, bigger than 35% of the widget.",b.DEBUG))},i.prototype.appendDescriptionHTML=function(){var e=this;try{var i=R.getPlayerWrapperElement(this.providerConfig);x.sendAudit(this.sessionId,t.Verbose,"OB player appendDescriptionHTML",b.VERBOSE);var r=i.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),o=i.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),n=i.querySelector("#"+this.playerIdsPrefix+"adVideoDescription"),a=i.querySelector("#"+this.playerIdsPrefix+"ctaBtn"),s=i.querySelector("#"+this.playerIdsPrefix+"ctaUrlBtn"),d=i.querySelector("#"+this.playerIdsPrefix+"adVideoSponsoredChild"),l=i.querySelector("#"+this.playerIdsPrefix+"adVideoSponsoredLogo"),g=document.createTextNode(this.playerConfig.adTitle),h=document.createTextNode(this.playerConfig.adDescription),u=document.createTextNode(this.playerConfig.ctaButton),v=document.createTextNode(this.playerConfig.adSponsored),y={removed:!1,hadValue:this.playerConfig.adDescription};if(a&&a.setAttribute("title",this.playerConfig.ctaButton),s&&(s.setAttribute("href",this.playerConfig.adCtaUrl),s.addEventListener("click",(function(){window.open(e.playerConfig.adCtaUrl,"_blank"),e.audit({eventType:t.Click,description:"clickOnCTA: "+e.playerConfig.ctaButton,consentData:e.providerConfig.loglevel.level>=1?R.getConsentData(e.providerConfig):void 0}),e.pause()}))),this.playerConfig.adSponsorLogo.logo){var f=document.createElement("img");f.src=this.playerConfig.adSponsorLogo.logo,f.style.width=this.playerConfig.adSponsorLogo.width+"px",f.style.height=this.playerConfig.adSponsorLogo.height+"px",f.style.objectFit="contain",l.appendChild(f),f.parentElement.style.minWidth=this.playerConfig.adSponsorLogo.width+"px",f.parentElement.style.minHeight=this.playerConfig.adSponsorLogo.height+"px"}else l&&l.parentElement&&l.parentElement.removeChild(l);this.addNativeVideoStyling(),this.playerConfig.adTitle&&r?r.appendChild(g):r&&r.parentElement.removeChild(r),o&&(this.playerConfig.adDescription&&o?o.appendChild(h):(this.removeDescription(n),y.removed=!0)),this.playerConfig.ctaButton&&a?a.appendChild(u):a&&a.parentElement.removeChild(a),this.playerConfig.adSponsored&&d?d.appendChild(v):d&&d.parentElement.removeChild(d),this.playerConfig.adSponsorLogo||l||l&&l.parentElement.removeChild(l),void 0!==this.providerConfig.specificAdvName&&this.providerConfig.specificAdvName!==this.playerConfig.marketerName&&this.removeAllNativeElements("Native assets removed due to marketerName ("+this.playerConfig.marketerName+") and specificAdvName ("+this.playerConfig.specificAdvName+") mismatch"),this.providerConfig.playerLocation===c.InWidget&&this.checkIfNeedToRemoveNativeAssets(y,o);try{if("none"===this.stickyPlayer){var m=p.getSubtree(R.getWidgetElement(this.providerConfig.containerID)),C="white";if(m.querySelector(".ob-widget.ob-ultra-strip-layout")&&(C=getComputedStyle(m.querySelector(".ob-widget.ob-ultra-strip-layout")).getPropertyValue("background-color")),m.querySelector(".ob-dynamic-rec-container")){var P=getComputedStyle(m.querySelector(".ob-dynamic-rec-container")).getPropertyValue("background-color");"rgba(0, 0, 0, 0)"!=P&&(C=P)}Array.from(m.querySelectorAll(".ob_adTitleDescWrapper.Ob_direction")).forEach((function(e){e.style.backgroundColor=C}))}}catch(e){}}catch(e){this.audit({eventType:t.Verbose,description:"Debug: appendDescriptionHTML() "+e})}},i.prototype.getNativeAssetsHeight=function(e){if(void 0===e&&(e=!1),!this.providerConfig.isNativeVideoPlay)return 0;try{var t=this.getAboveAdTitleDescWrapperElement(),i=this.getAdTitleDescWrapperElement(),r=parseInt(window.getComputedStyle(i,null).getPropertyValue("height"));return t&&(r+=parseInt(window.getComputedStyle(t,null).getPropertyValue("height"))),!this.providerConfig.isTopBranding&&e&&(r+=20),r}catch(e){return 0}return 0},i.prototype.nativeCtaClick=function(){window.open(this.playerConfig.adCtaUrl,"_blank"),x.sendAudit(this.sessionId,t.Click,"clickOnCTA: "+this.playerConfig.ctaButton,b.INFO),this.pause()},i.prototype.hidePlayer=function(t){void 0===t&&(t=!1),e.prototype.hidePlayer.call(this,t),this.providerConfig.isReelWidget&&ge.removeNativeLayoutFromReel(this.nativeCtaClick)},i.prototype.showPlayer=function(){var t=this;e.prototype.showPlayer.call(this),this.providerConfig.isReelWidget&&this.isNativeVideoPlayAllowed&&ge.prepareReelLayoutForNative(this.providerConfig,this.nativeCtaClick);var i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"titleSrcWrapper");(this.isNativeVideoPlayAllowed||i&&i.innerText.length>0)&&window.setTimeout((function(){"none"===t.stickyPlayer&&t.resizePlayer()}),101)},i.prototype.btnTextAdjust=function(e){try{if(e)for(var t=0;e.offsetWidth<e.scrollWidth;t++){if(parseInt(e.style.fontSize,10)<9)return;e.style[p.toDash("fontSize")]=parseInt(e.style.fontSize,10)-2+"px"}}catch(e){}},i.prototype.addNativeVideoStyling=function(){if(this.providerConfig.isReelWidget){var e=this.getAdTitleDescWrapperElement();e&&(e.style.display="none")}this.nativeTextDirection()},i.prototype.nativeTextDirection=function(){try{var e=this.playerElement.querySelector(".ob_adTitleDescWrapper.Ob_direction"),i=R.getWidgetRecInfo(this.providerConfig,"title"),r=R.getWidgetRecInfo(this.providerConfig,"source");!0===this.providerConfig.rtlWidget?(e&&(e.style.direction="rtl"),"{}"!==JSON.stringify(i)&&i.style.hasOwnProperty("textAlign")&&("left"==i.style.textAlign?e.style.direction="ltr":"right"==i.style.textAlign||"center"==i.style.textAlign?e.style.direction="rtl":"left"==r.style.textAlign&&(e.style.direction="ltr"))):(e&&(e.style.direction="ltr!important"),"{}"!==JSON.stringify(i)&&i.style.hasOwnProperty("textAlign")&&("right"==i.style.textAlign?e.style.direction="rtl":"left"==i.style.textAlign||"center"==i.style.textAlign?e.style.direction="ltr":r.style&&r.style.hasOwnProperty("textAlign")&&"right"==r.style.textAlign&&(e.style.direction="rtl")))}catch(e){this.audit({eventType:t.Verbose,description:"Debug: addNativeVideoStyling() "+e})}},i.prototype.nativeBuildBelowDescriptionHTML=function(){var e=document.createElement("div");return e.classList.add("ob_adTitleDescWrapper","Ob_direction","adTitleDescWrapper"),e.innerHTML=this.prepareBelowNativeElm(),e},i.prototype.nativeBuildAboveDescriptionHTML=function(){var e=document.createElement("div");return e.classList.add("ob_adTitleDescWrapper","Ob_direction","AboveAdTitleDescWrapper"),e.innerHTML=this.prepareAboveNativeElm(),e},i.prototype.prepareBelowNativeElm=function(){var e='<div class="'+this.playerIdsPrefix+'ob_column" style="flex-basis:auto;flex-grow:1">\n                                        <div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoTitle"  id="'+this.playerIdsPrefix+'adVideoTitle"><div style="font-weight: 700" id="'+this.playerIdsPrefix+'adVideoTitleChild"></div></div>\n                                        <div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoDescription" id="'+this.playerIdsPrefix+'adVideoDescription"><div id="'+this.playerIdsPrefix+'adVideoDescChild"></div></div>\n                                        '+this.showLogoSponsorDecision("belowVideo")+"\n                                    </div>";return e+=""+this.showButtonDecision("belowVideo")},i.prototype.prepareAboveNativeElm=function(){return this.showLogoSponsorDecision("aboveVideo")+" "+this.showButtonDecision("aboveVideo")+" "},i.prototype.showButtonDecision=function(e){var t="belowVideo"==this.providerConfig.nativeVideoBtnPosition?"margin:10px 2px 10px 2px":"align-items: center; margin: 5px;",i="belowVideo"==this.providerConfig.nativeVideoBtnPosition?"":"addPadding";return(e==this.providerConfig.nativeVideoBtnPosition?'<div class="'+this.playerIdsPrefix+'ob_column adVideoCtaBtn" style="max-width: 40%; '+t+'">\n                                <a class="'+this.playerIdsPrefix+'ob_item ctaUrlBtn" id="'+this.playerIdsPrefix+'ctaUrlBtn" target="_blank"   rel="category tag">\n                                    <div class="ctaBtn '+i+'" id="'+this.playerIdsPrefix+'ctaBtn"></div>\n                                </a>\n                          </div>':'<div class="'+this.playerIdsPrefix+'ob_column adVideoCtaBtn" style="max-width: 40%; '+t+'"></div>')||""},i.prototype.showLogoSponsorDecision=function(e){var t="belowVideo"==this.providerConfig.nativeVideoLogoPosition?"":"display: flex; flex-grow: 15; flex-direction: row-reverse;";return(e==this.providerConfig.nativeVideoLogoPosition?"aboveVideo"==e?'<div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoSponsored adVideoSponsoredExtra" style="'+t+'">\n                                    <div class="adVideoSponsored adVideoSponsoredLogo" style="margin-left: 5px;margin-right: 5px" id="'+this.playerIdsPrefix+'adVideoSponsoredLogo"></div>\n                                    <div class="adVideoSponsoredExtra" style="display: flex;flex-direction: column;">\n                                        <div class="adVideoSponsored adVideoSponsoredChild aboveVideoSponsorBy">Sponsored by</div>\n                                        <div class="adVideoSponsored adVideoSponsoredChild defaultAboveVideo" id="'+this.playerIdsPrefix+'adVideoSponsoredChild"></div>\n                                        </div>\n                               </div>':'<div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoSponsored adVideoSponsoredExtra" style="display: flex;">\n                            <div class="adVideoSponsored adVideoSponsoredLogo" id="'+this.playerIdsPrefix+'adVideoSponsoredLogo"></div>\n                            <div class="adVideoSponsored adVideoSponsoredChild" id="'+this.playerIdsPrefix+'adVideoSponsoredChild"></div>\n                </div>':'<div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoSponsoredExtra" style="'+t+'"></div>')||""},i.prototype.btnStyleDecision=function(e,t,i){try{t&&t.style?(e.style[p.toDash("fontSize")]=t.style.fontSize,e.style[p.toDash("fontFamily")]=t.style.fontFamily,e.style[p.toDash("fontWeight")]=t.style.fontWeight):i&&i.style&&(e.style[p.toDash("fontSize")]=parseInt(i.style.fontSize,10)>14?"14px":i.style.fontSize,e.style[p.toDash("fontFamily")]=i.style.fontFamily)}catch(e){}},i.prototype.handleVideoDescriptionForNative=function(){var e=0,t=0,i=0,r=0;this.getElementMultiLineTruncation();var o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoSource"),n=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoTitle"),a=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoBranding .ob_what"),s=this.getAdTitleDescWrapperElement(),d=this.getAboveAdTitleDescWrapperElement(),l=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),g=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),h=this.playerElement.querySelector(".adVideoSponsoredExtra"),u=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoSponsoredChild"),v=this.playerElement.querySelector("#"+this.playerIdsPrefix+"ctaBtn"),y=this.providerConfig.title||!1,f=this.providerConfig.source||!1,m=this.providerConfig.isNativeVideoPlay;this.playerHeight=this.playerElement.clientHeight;var C=R.isEmptyWidget(this.providerConfig.containerID);if(!C&&(y||f||m)){var P=f||m?R.getWidgetRecInfo(this.providerConfig,"source"):{},b=y||m?R.getWidgetRecInfo(this.providerConfig,"title"):{},w=["color","fontStyle","lineHeight","fontFamily","fontWeight","border","fontSize","textAlign"];for(var I in w){var E=w[I];f&&P.style&&P.style.hasOwnProperty(E)&&(o.style[p.toDash(E)]=P.style[E]),y&&b.style&&b.style.hasOwnProperty(E)&&(n.style[p.toDash(E)]=b.style[E]),f&&(o.style.marginLeft="5px",o.style.marginRight="5px"),y&&(n.style.marginLeft="5px",n.style.marginRight="5px"),l&&b.style&&b.style.hasOwnProperty(E)&&(l.style[p.toDash(E)]=b.style[E]),h&&P.style&&P.style.hasOwnProperty(E)&&(h.style[p.toDash(E)]=P.style[E]),u&&b.style&&"aboveVideo"==this.providerConfig.nativeVideoLogoPosition&&b.style.hasOwnProperty(E)&&(u.style[p.toDash(E)]=b.style[E])}l&&b.style&&b.style.hasOwnProperty("textAlign")&&"center"==l.style.textAlign&&(l.style.textAlign="inherit"),g&&b.style&&b.style.hasOwnProperty("fontFamily")&&(g.style[p.toDash("fontFamily")]=b.style.fontFamily,g.style[p.toDash("color")]=b.style.color),g&&P.style&&b.style&&P.style.hasOwnProperty("fontSize")&&b.style.hasOwnProperty("fontSize")?g.style[p.toDash("fontSize")]=Math.round((parseInt(P.style.fontSize,10)+parseInt(b.style.fontSize,10))/2)+"px":g&&!P.style&&b.style&&((""==g.style.fontSize||parseInt(g.style.fontSize,10)>14)&&(g.style.fontSize="14px"),b.style.fontSize<g.style.fontSize&&(g.style.fontSize=b.style.fontSize)),g&&b.style&&b.style.hasOwnProperty("textAlign")&&(g.style[p.toDash("textAlign")]=b.style.textAlign,"center"==g.style.textAlign&&(g.style.textAlign="inherit")),v&&this.btnStyleDecision(v,g,l),y&&(e=Math.ceil(n.clientHeight)),f&&(t=Math.ceil(o.clientHeight)),s&&(i=Math.ceil(s.clientHeight)),d&&(i+=Math.ceil(d.clientHeight))}else C&&(y&&(e=Math.ceil(n.clientHeight)),f&&(t=Math.ceil(o.clientHeight)),s&&(i=Math.ceil(parseFloat(window.getComputedStyle(s,null).getPropertyValue("height")))),d&&(i+=Math.ceil(parseFloat(window.getComputedStyle(d,null).getPropertyValue("height")))),f&&(o.style.marginLeft="5px",o.style.marginRight="5px"),y&&(n.style.marginLeft="5px",n.style.marginRight="5px"));if(this.btnTextAdjust(v),null!==a){var S=window.getComputedStyle(a,null);r=Math.ceil(parseFloat(S.getPropertyValue("height"))+parseFloat(S.getPropertyValue("padding-top"))+parseFloat(S.getPropertyValue("padding-bottom")))}"none"!==this.stickyPlayer&&this.isPlayerOutOfViewport?this.playerDescriptionHeight=0===i?e+t:i:this.playerDescriptionHeight=e+t,this.playerBrandingHeight=r,this.setMarginWhenDescription(),this.providerConfig.playerLocation===c.InWidget&&this.isMobile&&(this.playerWrapperHeight+=this.getNativeAssetsHeight(),this.playerElement.style.paddingBottom="0px"),this.avoidSliderWhenSmall(),this.playerHeight="sliderAlwaysRight"===this.stickyPlayer?this.providerConfig.sticky.height:this.playerHeight},i.prototype.setMarginWhenDescription=function(e){void 0===e&&(e=this.playerDescriptionHeight),!R.isEmptyWidget(this.providerConfig.containerID)&&"none"!==this.stickyPlayer||this.providerConfig.isTopBranding?this.providerConfig.isNativeVideoPlay&&(e=Math.max(e,10)):e=Math.max(e,this.playerBrandingHeight),"none"===this.stickyPlayer||this.providerConfig.isTopBranding||(e+=this.playerBrandingHeight),"none"===this.stickyPlayer||this.isPlayerOutOfViewport||this.providerConfig.playerLocation!==c.InWidget||(e=0),this.playerElement.style.paddingBottom=e+"px",this.playerElement.style.marginBottom=R.vidgetBottomMargin+"px"},i.prototype.resizePlayer=function(){if(this.player){var e;if(null===(e=R.getPlayerDimensionsByMediaSize(this.providerConfig,this.mediaWidth,this.mediaHeight)))return;if(this.playerElement.style.width=e.width+"px",this.playerElement.style.maxWidth=e.width+"px",this.resize(e.width,e.height),this.providerConfig.playerLocation!==c.InWidget){var t=this.playerElement.querySelector("#"+this.getPlayerContainerId());if(t.offsetHeight!==Math.floor(9*e.width/16))t.style.height=e.height+"px",R.isEmptyWidget(this.providerConfig.containerID)&&this.providerConfig.ghostFixedSize?t.style.height=e.height-this.getNativeAssetsHeight()+"px":this.playerElement.style.height=e.height+this.getNativeAssetsHeight()+"px"}}},i.prototype.setNativeEndCard=function(){var e=this,i=this.outbrainPlayerElement,r=document.createElement("div");r.classList.add("ob-native-endcard"),this.playerConfig.adCtaUrl&&(r.style.cursor="pointer",r.addEventListener("click",(function(i){i.preventDefault(),e.audit({eventType:t.Click,description:"Native endcard clicked: "+e.playerConfig.ctaButton,consentData:e.providerConfig.loglevel.level>=1?R.getConsentData(e.providerConfig):void 0}),window.open(e.playerConfig.adCtaUrl,"_blank")}))),i.style.transition="opacity 0.5s linear, border-width 0.5s linear";var o=document.createElement("div");o.classList.add("omp-cover");var n=i.clientWidth/25;r.style.fontSize=n+"px",r.style.padding=.5*n+"px "+n+"px",r.innerHTML=this.playerConfig.ctaButton;var a=this.playerElement.querySelector("#"+this.playerIdsPrefix+"ctaBtn");a&&(r.style.fontFamily=a.style.fontFamily);var s=this.playerElement.querySelector("#omp-footer");s&&s.style&&(s.style.visibility="hidden"),o.appendChild(r),i.appendChild(o)},i.prototype.handleDescriptionInSlider=function(t,i){e.prototype.handleDescriptionInSlider.call(this,t,i);var r=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild");o&&parseInt(window.getComputedStyle(o).fontSize,10)>14&&(o.style.fontSize="14px"),r&&parseInt(window.getComputedStyle(r).fontSize,10)>16&&(r.style.fontSize="16px")},i.prototype.setDisplayAd=function(){var e=this.outbrainPlayerElement,t=document.createElement("iframe");t.classList.add("obv-display-ad"),t.width=this.providerConfig.displayAd.width+10,t.height=this.providerConfig.displayAd.height+10,e.appendChild(t);var i=window.unescape(this.providerConfig.displayAd.displayHTML);t.contentWindow.document.open(),t.contentWindow.document.write(i),t.contentWindow.document.close()},i.prototype.handleHeavyAds=function(e){return"vpaid"===e?"vpaid":e+" - "+this.playerConfig.adSystem},i.prototype.listenToPlayerHeightTransitionEnd=function(){var e=this;this.playerElement.ontransitionend=function(t){e.resize(e.playerElement.offsetWidth,e.playerElement.offsetHeight),e.playerElement.ontransitionend=null}},i}(F);!function(e){e[e.Pixel=1]="Pixel",e[e.JsTracker=2]="JsTracker"}(q||(q={})),function(e){e[e.Impression=1]="Impression",e[e.VideoViewable=4]="VideoViewable"}(U||(U={}));var ve=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ye=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDemo=!1,t}return ve(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){var r=null,o=R.getQueryString("wixp");if(o){if(!(!!(r=R.getQueryString("urlVast"))&&-1!==o.indexOf(e.videoProviderConfig.widgetID)))return void t();e.isDemo=!0}e.waterfallContinue=t,e.waterfallStop=i,e.player=new ue(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.isDemo?e.fakeVastVideo(r):e.lookupRTBVideo(e.waterfallContinue)}))},i.prototype.fakeVastVideo=function(e){fetch(decodeURIComponent(e)).then((function(e){return e.text()})).then(this.vastMock.bind(this)).then(this.onOutbrainRtbResponse.bind(this,(function(){})))},i.prototype.vastMock=function(e){var t=JSON.parse(new URLSearchParams(location.search).get("nativeOptions"))||{},i=!(t["native-title"]&&t["native-cta-text"]);return{doc:[{video:{vastxml:e,title:t["native-title"]?t["native-title"]:i?"Designer Outlet & Fashion Brands up to 80% off":"",url:t["native-cta-target-url"]?decodeURIComponent(t["native-cta-target-url"]):i?"https://www.outbrain.com/":""},advId:"00001",is_native_video:"true",adv_name:"Demo Page",desc:t["native-description"]?t["native-description"]:i?"The luxury handbag by Prada, the classic belt by Gucci or high quality sweater of Emporio Armani. Discover sought-after designer fashion from over 150 brands":"",cta:t["native-cta-text"]?t["native-cta-text"]:i?"Buy Now":"",source_display_name:t["native-brand-name"]?t["native-brand-name"]:i?"Fashionesta":"",logo:{url:t["native-logo-url"]?decodeURIComponent(t["native-logo-url"]):i?"https://libs.outbrain.com/video/omri/Outbrain_Emilia_logo.png":""}}]}},i.prototype.downloadOutbrainPlayerScript=function(e){var r=this;if(window.OutbrainMP)this.onPlayerScriptLoaded();else{var o=document.createElement("script");o.src=i.playerProviderUrl,o.onload=this.onPlayerScriptLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?x.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(r.sessionId,t.ProviderFailure,"OPA provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)}},i.prototype.onPlayerScriptLoaded=function(){this.player.createPlayer(),this.player.getPlayer()&&this.player.start()},i.prototype.onOutbrainRtbResponse=function(e,t){var i=this.getRtbDataFromResponse(t);i?(this.videoProviderConfig.vastXML=i.vastXML,this.videoProviderConfig.trackers=i.trackers,this.videoProviderConfig.provider===r.OPAdisplay?(this.videoProviderConfig.displayAd={},this.videoProviderConfig.displayAd.displayHTML=i.displayHTML,this.videoProviderConfig.displayAd.width=i.width,this.videoProviderConfig.displayAd.height=i.height,this.videoProviderConfig.trackers.pixels.videoViewable.push(i.onViewed)):(this.videoProviderConfig.advId=i.advId,this.videoProviderConfig.advName=i.advName,this.videoProviderConfig.campaignId=i.campaignId,this.videoProviderConfig.adTitle=i.title,this.videoProviderConfig.adDescription=i.description,this.videoProviderConfig.ctaButton=i.ctaButton,this.videoProviderConfig.adSponsored=i.sponsored,this.videoProviderConfig.adSponsorLogo=i.sponsorLogo,this.videoProviderConfig.adCtaUrl=i.ctaUrl,this.videoProviderConfig.opaPartnerId=i.opaPartnerId,this.videoProviderConfig.opaAdId=i.opaAdId,this.videoProviderConfig.agencyId=i.agencyId,this.videoProviderConfig.opaProductId=i.productId,this.videoProviderConfig.isNativeVideo=i.isNativeVideo),this.postVastXML(this.videoProviderConfig.vastXML,i.productId,i.opaPartnerId),this.downloadOutbrainPlayerScript(e)):this.player.closePlayerNoAd()},i.prototype.postVastXML=function(e,t,i){try{if(this.videoProviderConfig.vastXML&&this.videoProviderConfig.storeVast){var r=$.getVideoVastoreUrl(this.videoProviderConfig)+"/logVast?crid="+t+"&partnerId="+i,o=e;g.post(r,o)}}catch(e){}},i.prototype.getRtbDataFromResponse=function(e){var i=null,o=e.doc,n=this.videoProviderConfig.provider===r.OPA;if(o&&o[0]){var a=n?o[0].video:o[0];if(a){var s="belowVideo"==this.videoProviderConfig.nativeVideoLogoPosition?20:60;i={vastXML:n?a.vastxml:this.getTempVastForBlackVideo(o[0].url),trackers:this.extractEventTrackers(o[0].eventTrackers),advId:o[0].advId,advName:o[0].adv_name,campaignId:o[0].pc_cmp_id,title:a.title,description:o[0].desc,sponsored:o[0].source_display_name?o[0].source_display_name:"",ctaButton:o[0].cta,ctaUrl:a.url,sponsorLogo:{logo:o[0].logo?o[0].logo.url:"",width:s,height:s},opaPartnerId:o[0].partner_id,opaAdId:o[0].pc_id,agencyId:o[0].agency_id,displayHTML:o[0].display?o[0].display.html:void 0,width:o[0].display?o[0].display.width:0,height:o[0].display?o[0].display.height:0,onViewed:o[0]["on-viewed"],productId:o[0].product_id?o[0].product_id:null,isNativeVideo:o[0].is_native_video&&"true"===o[0].is_native_video},this.videoProviderConfig.isProviderControlledPauseOutOfView=o[0].video_pause_out_of_view&&/^(true)$/i.test(o[0].video_pause_out_of_view),x.sendAudit(this.sessionId,t.Debug,JSON.stringify(["title: "+a.title,"description: "+o[0].desc,"sponsored: "+o[0].source_display_name,"ctaButton: "+o[0].cta,"ctaUrl: "+a.url,"sponsorLogo: "+i.sponsorLogo.logo]),b.DEBUG)}}return i},i.prototype.extractEventTrackers=function(e){var i=this,r={pixels:{impressions:[],videoViewable:[]},jsTrackers:{impressions:[],videoViewable:[]}};return null==e||e.forEach((function(e){e.method===q.Pixel?(e.event===U.Impression&&r.pixels.impressions.push(e.url),e.event===U.VideoViewable&&r.pixels.videoViewable.push(e.url)):e.method===q.JsTracker?(e.event===U.Impression&&r.jsTrackers.impressions.push(e.url),e.event===U.VideoViewable&&r.jsTrackers.videoViewable.push(e.url)):x.sendAudit(i.sessionId,t.vidgetLog,"Event tracker of type: "+e.method)})),r},i.prototype.lookupRTBVideo=function(e){var t=this.getRequestData();this.isRTBVideoReceivedFromPreAuction()?this.useFirstAuctionVideo(e):R.odbCall(t,this.onOutbrainRtbResponse.bind(this,e))},i.prototype.getRequestData=function(){var e={permalink:this.videoProviderConfig.datasrc,widgetId:this.videoProviderConfig.widgetID,originWidgetIdx:this.videoProviderConfig.widgetIdx,rtbEnabled:!0,fId:this.videoProviderConfig.fid?this.videoProviderConfig.fid.toString():null,feedFatherIdx:this.videoProviderConfig.fIndex?this.videoProviderConfig.fIndex.toString():null,feedVersion:this.videoProviderConfig.feedVersion,extraParams:this.getExtraRequestParams(),et:!0};return this.videoProviderConfig.isVideoRequestInView=this.isWidgetInView(),e},i.prototype.useFirstAuctionVideo=function(e){var t=R.getOpaFirstAuction(this.videoProviderConfig.widget);this.onOutbrainRtbResponse(e,t.documents),this.videoProviderConfig.firstAucationExceuted=!0},i.prototype.isRTBVideoReceivedFromPreAuction=function(){return R.getOpaFirstAuction(this.videoProviderConfig.widget).documents&&!this.videoProviderConfig.firstAucationExceuted},i.prototype.getExtraRequestParams=function(){var e="";e+="servePc=true",e+="&maxNumAds=1",e+="&num=1",e+="&maxNumOrganicRecs=0",e+="2"===this.videoProviderConfig.feedVersion?"&fAB="+this.videoProviderConfig.fAB:"",e+=this.videoProviderConfig.feedIdx?"&feedIdx="+this.videoProviderConfig.feedIdx:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appName?"&appName="+this.videoProviderConfig.appName:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appCategory?"&appCategory="+this.videoProviderConfig.appCategory:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appStoreUrl?"&appStoreUrl="+this.videoProviderConfig.appStoreUrl:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.deviceIfa&&"ios"===this.videoProviderConfig.platform?"&deviceIfa="+this.videoProviderConfig.mobileUserId:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.deviceAid&&"android"===this.videoProviderConfig.platform?"&deviceAid="+this.videoProviderConfig.mobileUserId:"";var t=this.videoProviderConfig.isReelWidget?c.Midroll:this.videoProviderConfig.playerLocation;e+=t?"&playerLocation="+t:"";var i=this.videoProviderConfig.inApp&&"android"===this.videoProviderConfig.platform;return i&&this.videoProviderConfig.packageName?e+="&appBundle="+this.videoProviderConfig.packageName:!i&&this.videoProviderConfig.appBundle&&(e+="&appBundle="+this.videoProviderConfig.appBundle),e+=this.videoProviderConfig.externalCampaignId?"&extid="+this.videoProviderConfig.externalCampaignId:"",e+=this.videoProviderConfig.externalCampaignId2?"&extid2="+this.videoProviderConfig.externalCampaignId2:"",this.videoProviderConfig.provider===r.OPAdisplay?(e+="&recMode=odb_dynamic_display",e+="&isAdChoicesOnImage=true",e+="&isResponsiveDisplayAd=false",e+="&rtbEnabled=true",e+="&amplifyEnabled=false",e+=this.player.getPlayerWidth()?"&cw="+this.player.getPlayerWidth().toString():"",e+=this.player.getPlayerWidth()&&this.player.getPlayerHeight()?"&displayAdSize="+this.player.getPlayerWidth().toString()+"x"+this.player.getPlayerHeight().toString():""):(e+="&recMode=odb_video",e+=this.player.getPlayerWidth()?"&videoWidth="+this.player.getPlayerWidth().toString():"",e+=this.player.getPlayerHeight()?"&videoHeight="+this.player.getPlayerHeight().toString():"",e+=this.isWidgetInView()||this.videoProviderConfig.playMode==o.ViewPreload?"&videoPlaybackMethod=inView":"&videoPlaybackMethod=autoPlay",e+="&pauseOutOfView="+this.videoProviderConfig.pauseOutOfView,e+=void 0!==this.videoProviderConfig.bidFloor&&null!==this.videoProviderConfig.bidFloor?"&videoBidFloor="+this.videoProviderConfig.bidFloor:""),e+=void 0!==this.videoProviderConfig.opaDemoBidder?"&fakeRec=RTB-"+this.videoProviderConfig.opaDemoBidder:""},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.trafficType=this.videoProviderConfig.provider===r.OPAdisplay?11:9},i.prototype.getTempVastForBlackVideo=function(e){return'<?xml version="1.0" encoding="utf-8"?>\n            <VAST version="3.0">\n              <Ad id="md9ps1fw9">\n                <InLine>\n                  <AdSystem><![CDATA[Outbrain Ads]]></AdSystem>\n                  <AdTitle><![CDATA[OpaDisplayAd]]></AdTitle>\n                  <Impression/>\n                  <Creatives>\n                    <Creative id="1597659734779">\n                      <Linear>\n                        <Duration><![CDATA[00:00:15]]></Duration>\n                        <TrackingEvents/>\n                        <MediaFiles>\n                            <MediaFile delivery="progressive" type="video/mp4" width="640" height="360" bitrate="700"><![CDATA[https://ob-video-res.cloudinary.com/video/upload/q_auto,w_640/v1602418625/w90aroshnxpd48vg35xe.mp4]]></MediaFile>                       \n                        </MediaFiles>\n                        '+(e?"<VideoClicks>\n              <ClickThrough><![CDATA["+e+"]]></ClickThrough>\n              <ClickTracking/>\n            </VideoClicks>":"")+"\n                      </Linear>\n                    </Creative>\n                  </Creatives>\n                </InLine>\n              </Ad>\n            </VAST>"},i.playerProviderUrl="https://libs.outbrain.com/video/outbrain-player/current/omp.min.js",i}(D),fe=ye,me=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ce=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.isResized=!1,n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=M,n}return me(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"teadsplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Teads",width:this.playerElement.style.width.split("px")[0],height:this.playerHeight,HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.createPlayer=function(e){this.player=e,this.registerEvents()},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player[this.playerEvents[e]].push((function(){t()}))},t.prototype.onPlay=function(t){this.player&&this.player.pubCPM?(this.playerConfig.bid=this.player.pubCPM,this.playerConfig.partner="teads",this.playerConfig.prebid=!0):this.playerConfig.prebid=!1,e.prototype.onPlay.call(this,t)},t.prototype.destroyPlayer=function(){},t.prototype.providerLoad=function(){this.showPlayer()},t.prototype.handlePlayerWrapperHeight=function(){this.providerConfig.playerLocation!==c.InWidget&&(this.playerWrapperHeight=parseInt(this.playerElement.style.height.split("px")[0]),this.playerElement.style.transition="unset")},t.prototype.resize=function(e,t){var i=this.playerElement.querySelector("#"+this.getPlayerContainerId()).querySelector(".teads-inread"),r=i.querySelector("iframe");i.style.height=t+"px",i.style.maxWidth=e+"px",r.style.height=t+"px",r.style.maxHeight=t+"px",r.style.width=e+"px",this.isResized||(this.isResized=!0,this.resize(e,t))},t}(F),Pe=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),be=window,we=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Pe(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new Ce(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.videoProviderConfig.allowParallelInview||!e.checkForTeadsOnPage()?void 0!==e.videoProviderConfig.tagId&&""!==e.videoProviderConfig.tagId?e.videoProviderConfig.playMode===o.View?e.checkForAppendingPlayer(e.getPlayerContainerElement()).then(e.downloadTeadsScript.bind(e,e.waterfallContinue)).catch((function(e){return console.log("ERROR to play Teads: ",e)})):e.downloadTeadsScript(e.waterfallContinue):e.player.closePlayerNoAd("Wrong Teads tagId = "+e.videoProviderConfig.tagId):e.player.closePlayerNoAd("Teads player already on page")}))},i.prototype.checkForTeadsOnPage=function(){return!!document.querySelector(".teads, .teads-inread")},i.prototype.downloadTeadsScript=function(e){var r=this,o=document.createElement("script");o.src=i.playerProviderUrl.replace("#ID",this.videoProviderConfig.tagId),o.className="teads teads"+this.videoProviderConfig.widgetIdx,o.setAttribute("data-ob-"+this.videoProviderConfig.tagId,this.videoProviderConfig.widgetIdx),o.async=!0,o.onload=this.onTeadsLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?x.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(r.sessionId,t.ProviderFailure,"Teads provider failed to load",b.DEBUG),e()},this.getPlayerContainerElement().appendChild(o)},i.prototype.checkForAppendingPlayer=function(e){var t=this;return new Promise((function(i){new IntersectionObserver((function(e,r){return t.playerContainerElementLoaded(i,r,e)})).observe(e)}))},i.prototype.playerContainerElementLoaded=function(e,t,i){if(i[0].intersectionRatio>0)return t.disconnect(),e(!0)},i.prototype.onTeadsLoaded=function(){var e=this,t=setInterval((function(){var i=be["teadsObj"+e.videoProviderConfig.widgetIdx]||be.teadsObj;i&&(clearInterval(t),e.player.createPlayer(i),e.player.start(),e.setUiPlayer.call(e))}),20)},i.prototype.getPlayerContainerElement=function(){return document.getElementById(this.player.getPlayerContainerId())},i.prototype.setUiPlayer=function(){var e=this.player.playerElement,t=e.querySelector("#"+this.player.getPlayerContainerId());e.style.background="none",t.style.marginTop="unset"},i.playerProviderUrl="//a.teads.tv/page/#ID/tag",i}(D),Ie=we,Ee=(i(656),function(){return Ee=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ee.apply(this,arguments)}),Se=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function s(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))},xe=function(e,t){var i,r,o,n,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},Ae=function(){function i(){this.vidgetRuns={},this.videoPlayingCheckIntervalTime=5e3,this.delayOnWidgetValidationCheck=1e3,this.delayOnWidgetExecution=5e3,this.isVideoReelLoaded=!1,this.waterfallTasksExcludeParams={providers:["teads"],stickyPlayers:["slider","slideralwaysright"]},this.vidgetOrganicProviderUrl="https://libs.outbrain.com/organicVidget/vidgetOrganicProvider.js"}return i.prototype.init=function(e,i,r){return void 0===r&&(r={}),Se(this,void 0,void 0,(function(){var i,o,n,a=this;return xe(this,(function(s){return i=p.guid(),o=R.getVideoProviderWidgetSettings(e),R.isDfpIframe(o),(n={currentReload:1,sessionId:i,widgetSettings:o,widgetReqId:o.reqID,configuredReloadTime:o.configuredReloadTime?o.configuredReloadTime:4e3,videoPlayingCheckIntervalId:null,parallelPlay:o.parallelPlay,wasPendingAtCurrentReload:!1,canReload:!0,widgetProviders:null,initialDelay:o.initialDelay?o.initialDelay:5e3,loglevel:{level:o.logLevel in b?b[o.logLevel]:b.INFO,consoleLog:o.consoleLog},AniviewObject:null,reloadExtended:!1}).widgetSettings.loglevel={level:o.logLevel in b?b[o.logLevel]:b.INFO,consoleLog:o.consoleLog},n.widgetSettings.widgetProviders=R.getVidgetProviders(n),n.widgetSettings.modifiedWaterfall=null,this.audit=x.setAudit(n.sessionId,n.widgetSettings,"",n.widgetReqId),n.widgetSettings=Ee(Ee({},n.widgetSettings),{callbacks:r}),$.getDocFeatures(o.docId,o.pubID,"getVidgetData").then((function(e){a.processDocData(e,n),a.shouldStartExecutionWithDelay(o)?a.startVidgetExecutionWithDelay(o,n):a.startVidgetExecution(o,n)})).catch((function(e){x.debug(n.sessionId,"No response from videoClientServiceCalls: "+e.toString(),t.Error),a.shouldStartExecutionWithDelay(o)?a.startVidgetExecutionWithDelay(o,n):a.startVidgetExecution(o,n)})),[2]}))}))},i.prototype.startVidgetExecutionWithDelay=function(e,t){var i=this;window.setTimeout((function(){i.startVidgetExecution(e,t)}),this.delayOnWidgetExecution)},i.prototype.startVidgetExecution=function(e,i){var r=this,o=this.validateVideoExecutionCanRun(e,i);o.status?(this.vidgetRuns[e.containerID]=i,x.debug(i.sessionId,"VIDGET LOADED",t.Loaded),this.startVidgetIteration(i)):this.shouldRetryValidation(e)?(x.debug(i.sessionId,"Run retry on widget validation"),this.runDelayedValidation(e,i).then((function(){x.debug(i.sessionId,"Run vidget after widget validation retry"),r.startVidgetIteration(i)})).catch((function(e){x.debug(i.sessionId,"Vidget run rejected after validation retry "+e)}))):x.debug(i.sessionId,"Vidget run cancelled because of bad widget strucure "+o.message)},i.prototype.runDelayedValidation=function(e,t){var i=this;return new Promise((function(r,o){window.setTimeout((function(){var n=i.validateVideoExecutionCanRun(e,t);n.status&&r(),o(n.message)}),i.delayOnWidgetValidationCheck)}))},i.prototype.shouldRetryValidation=function(e){return R.shouldRetryValidationOnWidget(e)},i.prototype.shouldStartExecutionWithDelay=function(e){return R.shouldStartExecutionWithDelay(e)},i.prototype.validateVideoExecutionCanRun=function(e,t){return this.vidgetRuns[e.containerID]?{status:!1,message:"Same widget container already exists"}:R.isWidgetExistingOnPage(e.containerID)?this.canVideoBeProvidedOnWidget(t.sessionId,t.widgetSettings)?{status:!0}:{status:!1,message:"Bad widget structure for current player location. rec mode: "+e.recMode}:{status:!1,message:"Missing widget element in page"}},i.prototype.processDocData=function(e,i){var r;try{(r=JSON.parse(e))&&(i.widgetSettings.docServices=r,r.externalPubId?i.widgetSettings.sellerJsonChain.nodes[0].sid=r.externalPubId:x.error(i.sessionId,"schain: no external id"),r.publisherName?i.widgetSettings.publisherName=r.publisherName:x.debug(i.sessionId,"no publisher name",t.VidgetFailure))}catch(e){x.error("Unable to parse vcsc response: "+e.toString(),t.Error)}},i.prototype.vidgetHandshake=function(e){if("VIDGET_OP"===e)this.onOrganicRequest()},i.prototype.onOrganicRequest=function(){this.vidgetOrganicSettings.widgetSettings.callbacks={audit:this.auditHandler.bind(this),playPaidVideo:this.play.bind(this)},window.VIDGET_OP.init(this.vidgetOrganicSettings)},i.prototype.auditHandler=function(e,t,i,r,o){x.sendAudit(e,t,i,r,o)},i.prototype.play=function(e,i){for(var r in void 0===i&&(i={}),this.vidgetRuns)if(this.vidgetRuns[r].widgetSettings.callbacks=Ee(Ee({},this.vidgetRuns[r].widgetSettings.callbacks),i),this.vidgetRuns[r].widgetSettings.isReelWidget&&!this.vidgetRuns[r].widgetSettings.isVideoReel&&x.debug(this.vidgetRuns[r].sessionId,"VIDGET START REQUEST",t.StartRequest),this.vidgetRuns[r].widgetSettings.widgetIdx==e&&1==this.vidgetRuns[r].widgetSettings.adLoaded){x.debug(this.vidgetRuns[r].sessionId,"VIDGET START READY",t.PlayReadyRequest),this.vidgetRuns[r].widgetSettings.adLoaded=!1;var o=new CustomEvent("playLoadedAd",{detail:{widgetIdx:e}});return window.dispatchEvent(o),!0}return!1},i.prototype.pauseResume=function(e,i,r){for(var o in void 0===r&&(r=!0),this.vidgetRuns)if(this.vidgetRuns[o].widgetSettings.widgetIdx==e){x.debug(this.vidgetRuns[o].sessionId,"VIDGET PAUSE-RESUME REQUEST - "+i,t.Debug);var n=new CustomEvent("pauseResumeAd",{detail:{widgetIdx:e,eventName:i,displayPlayerWrapper:r}});return window.dispatchEvent(n),!0}return!1},i.prototype.startVideoReel=function(e){if(e.widgetSettings.isVideoReel&&"local"===e.widgetSettings.vidgetContentSource.toLowerCase()){var t=document.createElement("script");t.src=this.vidgetOrganicProviderUrl,this.vidgetOrganicSettings=e,document.getElementsByTagName("head")[0].appendChild(t),this.isVideoReelLoaded=!0}},i.prototype.increaseInitialReloadCount=function(e){if(e.widgetSettings.vidgetDynamicReloads>0){var i=e.widgetSettings.playedReloadIndexes.some((function(t){return t===e.widgetSettings.configuredReloadCount}));if((e.widgetSettings.playedReloadIndexes.length>1||i)&&!e.reloadExtended){var r=e.widgetSettings.vidgetDynamicReloads;e.widgetSettings.actualReloadCount=e.widgetSettings.configuredReloadCount+r,e.reloadExtended=!0,x.sendAudit(e.sessionId,t.Debug,"reloads extended by "+r+" - "+(i?"Last play":"2 successive")+" ",b.DEBUG)}}},i.prototype.startVidgetIteration=function(i){return Se(this,void 0,void 0,(function(){var r;return xe(this,(function(o){switch(o.label){case 0:return x.verbose(i.sessionId),i.wasPendingAtCurrentReload=!1,i.canReload?(this.increaseInitialReloadCount(i),i.currentReload<=i.widgetSettings.actualReloadCount?[4,p.isVideoPlayingOnPageAsync(i.parallelPlay,i.initialDelay)]:[3,2]):[3,4];case 1:if((o.sent()||h.isRunning())&&i.parallelPlay!==e.Allow&&i.parallelPlay!==e.AvoidInViewport){if(r=h.isRunning()?"Another Vidget is running":"Other video is playing on page",i.parallelPlay===e.Strict)return x.debug(i.sessionId,"Other video player exist on page",t.VidgetConfigError),[2];this.checkAtIntervalsIfVidgetCanBePlayed(i,r)}else this.isVideoReelLoaded||this.startVideoReel(i),this.runVidget(i);return[3,3];case 2:return this.fireNoFillEvent(i),R.callWidgetCallback(i.widgetSettings.callbacks,"onCompleteReloads",i.widgetSettings.widgetIdx),[2];case 3:return[3,5];case 4:case 5:return[2]}}))}))},i.prototype.fireNoFillEvent=function(e,i){void 0===i&&(i=""),x.verbose(e.sessionId);try{if(e.widgetSettings.currentReload--,e.widgetSettings.fillEvent||e.widgetSettings.vidgetPassBack){if(0===e.widgetSettings.playedReloadIndexes.length)if(e.widgetSettings.vidgetPassBack)p.firePassbackSportrac(e.widgetSettings.vidgetPassBack);else{var r=new CustomEvent("vidgetWF");R.getWidgetElement(e.widgetSettings.containerID).dispatchEvent(r)}x.sendAudit(e.sessionId,t.FillCount,"numOfPlays: "+e.widgetSettings.playedReloadIndexes.length+". "+i)}}catch(t){x.error(e.sessionId,"fireNoFillEvent: "+t)}},i.prototype.checkAtIntervalsIfVidgetCanBePlayed=function(e,i){var r=this;void 0===i&&(i=""),x.verbose(e.sessionId),e.wasPendingAtCurrentReload=!0,x.debug(e.sessionId,"Inside checkAtIntervalsIfVidgetCanBePlayed",t.Pending),this.setIntervalTillNoVideoIsPlayed(e).then((function(){r.runVidget(e)})).catch((function(){x.debug(e.sessionId,"inside checkAtIntervalsIfVidgetCanBePlayed "+i,t.IterationCanceled),r.onVidgetIterationFinished(e)}))},i.prototype.runVidget=function(i){return Se(this,void 0,void 0,(function(){var r;return xe(this,(function(o){switch(o.label){case 0:return x.verbose(i.sessionId),[4,this.doubleCheckIsVideoPlaying(i.sessionId,i.widgetSettings)];case 1:if(o.sent()||i.parallelPlay!==e.Allow&&i.parallelPlay!==e.AvoidInViewport&&h.isRunning()){if(r=h.isRunning()?"Another Vidget is running":"Other video is playing on page",i.parallelPlay==e.Strict)return x.debug(i.sessionId,"runVidget: "+r,t.VidgetConfigError),[2];i.wasPendingAtCurrentReload?(i.debug&&x.debug(i.sessionId,"runVidget: "+r,t.IterationCanceled),this.onVidgetIterationFinished(i)):this.checkAtIntervalsIfVidgetCanBePlayed(i,r)}else i.widgetSettings.isVideoReel||h.setRunning(i.widgetSettings.widgetIdx),this.handleWaterfall(i);return[2]}}))}))},i.prototype.prepareOPAFirstAuctionProvider=function(e){return x.sendAudit(e.sessionId,t.Debug,"OPA First Auction Ready",b.DEBUG),e.currentReload=0,Ee(Ee({},u[r.OPA]),{name:r.OPA})},i.prototype.isFirstAuctionFlow=function(e){return R.getOpaFirstAuction(e.widgetSettings.widget).documents&&!e.widgetSettings.firstAucationExceuted},i.prototype.prepareWaterfallTasks=function(e){var i=[],r=e.widgetSettings.vidgetWaterfallOptimization>0;if(r)try{e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes=e.widgetSettings.vidgetWaterfallOptimization,e.widgetSettings.vidgetWaterfallOptimization>10&&(e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes=10)}catch(e){}var o=0;if(this.isFirstAuctionFlow(e)){var n=this.prepareOPAFirstAuctionProvider(e);i.push(this.provide(n,e,o))}else{x.sendAudit(e.sessionId,t.Debug,JSON.stringify(e.widgetSettings.optimizeLogicExcludeCount),b.DEBUG);for(var a=function(t){return s.waterfallTasksExclude(e.sessionId,t.name,e.widgetSettings)||s.waterfallTasksExcludeByPlayMode(e.sessionId,t.playMode,e.widgetSettings)||r&&s.waterfallTasksExcludeOptimizeLogic(e,t.name)||t.iterations>1&&!s.waterfallTasksExcludeIterations(e,t)?"continue":"syndication"!==e.widgetSettings.vidgetContentSource.toLowerCase()||y.some((function(e){return e===t.name}))?(o++,void i.push(s.provide(t,e,o))):"continue"},s=this,d=0,l=e.widgetSettings.widgetProviders;d<l.length;d++){a(l[d])}r&&0===o&&e.widgetSettings.optimizeLogicExcludeCount.waterfallExcludeList.length>0&&(this.endIterations(e),this.fireNoFillEvent(e,"Reload stopped"),x.sendAudit(e.sessionId,t.Debug,"After optimizeLogic waterfall empty"))}return i},i.prototype.reportMobileParamsData=function(e){if(e.widgetSettings.appName||e.widgetSettings.packageName||e.widgetSettings.bundleId){var i=e.widgetSettings.appName?"appName: "+e.widgetSettings.appName+"  ":"",r=e.widgetSettings.packageName?"appId: "+e.widgetSettings.packageName+" (Android/packageName)  ":"",o=e.widgetSettings.bundleId?"appId: "+e.widgetSettings.bundleId+" (iOS/bundleId)":"";x.sendAudit(e.sessionId,t.Debug,""+i+r+o,b.DEBUG)}},i.prototype.handleWaterfall=function(e){var i=this;try{x.verbose(e.sessionId);var r=this.prepareWaterfallTasks(e);this.reportMobileParamsData(e),p.checkWidgetElementExists(e),p.waterfall(r,this).catch((function(t){t&&i.endIterations(e)})).then((function(){h.isRunning()&&h.setNotRunning(e.widgetSettings.widgetIdx),i.onVidgetIterationFinished(e)}))}catch(i){x.debug(e.sessionId,"Waterfall stopped "+i,t.VidgetFailure),h.setNotRunning(e.widgetSettings.widgetIdx)}},i.prototype.waterfallTasksExclude=function(e,t,i){x.verbose(e);var r=this.waterfallTasksExcludeParams;return r.providers.includes(t.toLowerCase())&&r.stickyPlayers.includes(i.stickyPlayer.toLowerCase())},i.prototype.waterfallTasksExcludeIterations=function(e,t){var i=e.widgetSettings.optimizeLogicExcludeCount,r=e.widgetSettings.widgetProviders.filter((function(e){return 1==e.iterations})),o=e.widgetSettings.vidgetWaterfallOptimization>0&&r.every((function(e){return i.providers[e.name]==i.numberOfStrikes})),n=r.length>0&&o,a=e.widgetSettings.widgetProviders.every((function(t){return t.iterations>1&&t.iterations!==e.currentReload})),s=e.currentReload==e.widgetSettings.actualReloadCount&&t.iterations>e.widgetSettings.actualReloadCount;return!!(n||a||s)||(1==e.widgetSettings.widgetProviders.length||e.currentReload%t.iterations==0)},i.prototype.waterfallTasksExcludeOptimizeLogic=function(e,t){var i=e.widgetSettings.optimizeLogicExcludeCount;if(x.verbose(e.sessionId),i.providers[t]>e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes-1)return-1===i.waterfallExcludeList.indexOf(t)&&i.waterfallExcludeList.push(t),!0},i.prototype.waterfallTasksExcludeByPlayMode=function(e,t,i){return x.verbose(e),!this.waterfallTasksExcludeParams.stickyPlayers.includes(i.stickyPlayer.toLowerCase())&&(t==o.View&&!p.elementInViewport(R.getWidgetElement(i.containerID),0))},i.prototype.endIterations=function(e){x.verbose(e.sessionId),e.canReload=!1,R.callWidgetCallback(e.widgetSettings.callbacks,"onCompleteReloads",e.widgetSettings.widgetIdx)},i.prototype.onVidgetIterationFinished=function(e){var t=this;x.verbose(e.sessionId),e.currentReload++,x.increaseReload(e.sessionId,e.currentReload),window.setTimeout((function(){R.reset(e.widgetSettings),t.startVidgetIteration(e)}),e.configuredReloadTime)},i.prototype.provide=function(e,t,i){var r=this;return x.verbose(t.sessionId),function(){return r.createProvider(e,t,i).provide()}},i.prototype.createProvider=function(e,t,i){switch(x.verbose(t.sessionId),e.name){case r.Aniview:return"pause"!==t.test?new K(t.widgetSettings,t.sessionId,i,t.currentReload,e):(1===t.currentReload?t.AniviewObject=new K(t.widgetSettings,t.sessionId,i,t.currentReload,e):t.AniviewObject.updateCurrentReload(t.currentReload),t.AniviewObject);case r.Vidazoo:return t.widgetSettings.isSyndicationAllowed?new pe(t.widgetSettings,t.sessionId,i,t.currentReload,e):new oe(t.widgetSettings,t.sessionId,i,t.currentReload,e);case r.OPA:case r.OPAdisplay:return new fe(t.widgetSettings,t.sessionId,i,t.currentReload,e);case r.Teads:return new Ie(t.widgetSettings,t.sessionId,i,t.currentReload,e);default:return x.error(t.sessionId,"Wrong providerName. Play default provider"),new fe(t.widgetSettings,t.sessionId,i,t.currentReload,e)}},i.prototype.setIntervalTillNoVideoIsPlayed=function(e){var t=this;x.verbose(e.sessionId);var i=24;return new Promise((function(r,o){e.videoPlayingCheckIntervalId=setInterval((function(){i--,p.isVideoPlayingOnPageSync(e.widgetSettings.parallelPlay)||(clearInterval(e.videoPlayingCheckIntervalId),r(!0)),0==i&&(clearInterval(e.videoPlayingCheckIntervalId),o(!1))}),t.videoPlayingCheckIntervalTime)}))},i.prototype.doubleCheckIsVideoPlaying=function(e,t){return Se(this,void 0,void 0,(function(){return xe(this,(function(i){return x.verbose(e),"allow"!==t.parallelPlay?[2,p.delay(1e3).then((function(){return Promise.resolve(p.isVideoPlayingOnPageSync(t.parallelPlay))}))]:[2,Promise.resolve(!1)]}))}))},i.prototype.canVideoBeProvidedOnWidget=function(e,t){return x.verbose(e),R.canVideoBeProvided(t)},i.prototype.reloadVidget=function(){if(this.vidgetRuns)for(var e in this.vidgetRuns)this.vidgetRuns[e].canReload=!1;delete window.OB_VIDGET,window.OB_VIDGET=new i},i}();p.addPolyfills(),window.OB_VIDGET=window.OB_VIDGET||new Ae,R.makeHandshake("VIDGET")}()}();